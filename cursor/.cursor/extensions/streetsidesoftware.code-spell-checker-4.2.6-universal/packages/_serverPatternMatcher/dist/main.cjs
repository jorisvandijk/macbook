var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));const l=c(require(`node:util`)),u=c(require(`node:worker_threads`));var d;(function(e){e[e.NONE=0]=`NONE`,e[e.ERROR=1]=`ERROR`,e[e.WARNING=2]=`WARNING`,e[e.INFO=3]=`INFO`,e[e.DEBUG=4]=`DEBUG`})(d||(d={}));const f=[[d[d.NONE],d.NONE],[d[d.ERROR],d.ERROR],[d[d.WARNING],d.WARNING],[d[d.INFO],d.INFO],[d[d.DEBUG],d.DEBUG],[`INFORMATION`,d.INFO]],p=new Map(f),m=()=>void 0;var h=class{logLevel;_connection;seq=0;logs=[];loggers={[d.NONE]:m,[d.ERROR]:m,[d.WARNING]:m,[d.INFO]:m,[d.DEBUG]:m};logTime=!0;logSequence=!0;constructor(e=d.DEBUG,t){this.logLevel=e,t&&this.setConnection(t)}writeLog(e){if(!this._connection)this.logs.push(e);else{if(e.level>this.logLevel)return;let t=this.logSequence?`${e.seq}\t`:``,n=this.logTime?`${e.ts.toISOString()}\t`:``,r=`${t}${n}${e.msg}`,i=this.loggers[e.level];i?i(r):console.error(`Unknown log level: ${e.level}; msg: ${e.msg}`)}}get connection(){return this._connection}logMessage(e,t){let n=++this.seq,r={seq:n,level:e,ts:new Date,msg:t};this.writeLog(r)}set level(e){this.logLevel=g(e)}get level(){return this.logLevel}setConnection(e){this._connection=e,this._connection.onExit(()=>{this._connection=void 0,this.loggers[d.ERROR]=m,this.loggers[d.WARNING]=m,this.loggers[d.INFO]=m,this.loggers[d.DEBUG]=m}),this.loggers[d.ERROR]=t=>{e.console.error(t)},this.loggers[d.WARNING]=t=>{e.console.warn(t)},this.loggers[d.INFO]=t=>{e.console.info(t)},this.loggers[d.DEBUG]=t=>{e.console.log(t)},this.logs.forEach(e=>this.writeLog(e)),this.logs.length=0}error(e){this.logMessage(d.ERROR,e)}warn(e){this.logMessage(d.WARNING,e)}info(e){this.logMessage(d.INFO,e)}debug(e){this.logMessage(d.DEBUG,e)}log(e){this.debug(e)}getPendingEntries(){return this.logs}clearPendingEntries(){this.logs=[]}};function g(e){let t=typeof e==`string`?p.get(e.toUpperCase())||d.NONE:e;return typeof t!=`number`||t<d.NONE||t>d.DEBUG?d.DEBUG:t}let _=``;const v=new h;function y(e,t){v.log(C(e,t))}function b(...e){v.log((0,l.format)(...e))}function x(...e){v.error((0,l.format)(...e))}function S(e){y(`setWorkspaceBase URI: ${e}`),_=e}function C(e,t){let n=Array.isArray(t)?t:[t];return e+`	`+n.map(w).join(`
			`)}function w(e){if(!e)return``;let t=T(e,_);return t?e.replace(t,`...`):e}function T(e,t){let n=E(e,t);return e.slice(0,n)}function E(e,t){let n=e.split(`/`),r=t.split(`/`),i=Math.min(n.length,r.length),a=0;for(;a<i&&n[a]===r[a];)++a;return n.slice(0,a).join(`/`).length}var D=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.thenable=exports.typedArray=exports.stringArray=exports.array=exports.func=exports.error=exports.number=exports.string=exports.boolean=void 0;function t(e){return e===!0||e===!1}exports.boolean=t;function n(e){return typeof e==`string`||e instanceof String}exports.string=n;function r(e){return typeof e==`number`||e instanceof Number}exports.number=r;function i(e){return e instanceof Error}exports.error=i;function a(e){return typeof e==`function`}exports.func=a;function o(e){return Array.isArray(e)}exports.array=o;function s(e){return o(e)&&e.every(e=>n(e))}exports.stringArray=s;function c(e,t){return Array.isArray(e)&&e.every(t)}exports.typedArray=c;function l(e){return e&&a(e.then)}exports.thenable=l})),O=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.stringArray=exports.array=exports.func=exports.error=exports.number=exports.string=exports.boolean=void 0;function t(e){return e===!0||e===!1}exports.boolean=t;function n(e){return typeof e==`string`||e instanceof String}exports.string=n;function r(e){return typeof e==`number`||e instanceof Number}exports.number=r;function i(e){return e instanceof Error}exports.error=i;function a(e){return typeof e==`function`}exports.func=a;function o(e){return Array.isArray(e)}exports.array=o;function s(e){return o(e)&&e.every(e=>n(e))}exports.stringArray=s})),k=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.Message=exports.NotificationType9=exports.NotificationType8=exports.NotificationType7=exports.NotificationType6=exports.NotificationType5=exports.NotificationType4=exports.NotificationType3=exports.NotificationType2=exports.NotificationType1=exports.NotificationType0=exports.NotificationType=exports.RequestType9=exports.RequestType8=exports.RequestType7=exports.RequestType6=exports.RequestType5=exports.RequestType4=exports.RequestType3=exports.RequestType2=exports.RequestType1=exports.RequestType=exports.RequestType0=exports.AbstractMessageSignature=exports.ParameterStructures=exports.ResponseError=exports.ErrorCodes=void 0;let t=O();var n;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(n||(exports.ErrorCodes=n={}));var r=class e extends Error{constructor(r,i,a){super(i),this.code=t.number(r)?r:n.UnknownErrorCode,this.data=a,Object.setPrototypeOf(this,e.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};exports.ResponseError=r;var i=class e{constructor(e){this.kind=e}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};exports.ParameterStructures=i,i.auto=new i(`auto`),i.byPosition=new i(`byPosition`),i.byName=new i(`byName`);var a=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return i.auto}};exports.AbstractMessageSignature=a;var o=class extends a{constructor(e){super(e,0)}};exports.RequestType0=o;var s=class extends a{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};exports.RequestType=s;var c=class extends a{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};exports.RequestType1=c;var l=class extends a{constructor(e){super(e,2)}};exports.RequestType2=l;var u=class extends a{constructor(e){super(e,3)}};exports.RequestType3=u;var d=class extends a{constructor(e){super(e,4)}};exports.RequestType4=d;var f=class extends a{constructor(e){super(e,5)}};exports.RequestType5=f;var p=class extends a{constructor(e){super(e,6)}};exports.RequestType6=p;var m=class extends a{constructor(e){super(e,7)}};exports.RequestType7=m;var h=class extends a{constructor(e){super(e,8)}};exports.RequestType8=h;var g=class extends a{constructor(e){super(e,9)}};exports.RequestType9=g;var _=class extends a{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};exports.NotificationType=_;var v=class extends a{constructor(e){super(e,0)}};exports.NotificationType0=v;var y=class extends a{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};exports.NotificationType1=y;var b=class extends a{constructor(e){super(e,2)}};exports.NotificationType2=b;var x=class extends a{constructor(e){super(e,3)}};exports.NotificationType3=x;var S=class extends a{constructor(e){super(e,4)}};exports.NotificationType4=S;var C=class extends a{constructor(e){super(e,5)}};exports.NotificationType5=C;var w=class extends a{constructor(e){super(e,6)}};exports.NotificationType6=w;var T=class extends a{constructor(e){super(e,7)}};exports.NotificationType7=T;var E=class extends a{constructor(e){super(e,8)}};exports.NotificationType8=E;var D=class extends a{constructor(e){super(e,9)}};exports.NotificationType9=D;var k;(function(e){function n(e){let n=e;return n&&t.string(n.method)&&(t.string(n.id)||t.number(n.id))}e.isRequest=n;function r(e){let n=e;return n&&t.string(n.method)&&e.id===void 0}e.isNotification=r;function i(e){let n=e;return n&&(n.result!==void 0||!!n.error)&&(t.string(n.id)||t.number(n.id)||n.id===null)}e.isResponse=i})(k||(exports.Message=k={}))})),A=o((exports=>{var t;Object.defineProperty(exports,`__esModule`,{value:!0}),exports.LRUCache=exports.LinkedMap=exports.Touch=void 0;var n;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(n||(exports.Touch=n={}));var r=class{constructor(){this[t]=`LinkedMap`,this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=n.None){let r=this._map.get(e);if(r)return t!==n.None&&this.touch(r,t),r.value}set(e,t,r=n.None){let i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw Error(`Invalid list`);let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw Error(`LinkedMap got modified during iteration.`);r=r.next}}keys(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw Error(`LinkedMap got modified during iteration.`);if(t){let e={value:t.key,done:!1};return t=t.next,e}else return{value:void 0,done:!0}}};return n}values(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw Error(`LinkedMap got modified during iteration.`);if(t){let e={value:t.value,done:!1};return t=t.next,e}else return{value:void 0,done:!0}}};return n}entries(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw Error(`LinkedMap got modified during iteration.`);if(t){let e={value:[t.key,t.value],done:!1};return t=t.next,e}else return{value:void 0,done:!0}}};return n}[(t=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw Error(`Invalid list`);this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw Error(`Invalid list`);this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw Error(`Invalid list`);e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw Error(`Invalid list`);e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw Error(`Invalid list`);t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw Error(`Invalid list`);if(!(t!==n.First&&t!==n.Last)){if(t===n.First){if(e===this._head)return;let t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===n.Last){if(e===this._tail)return;let t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}};exports.LinkedMap=r;var i=class extends r{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=n.AsNew){return super.get(e,t)}peek(e){return super.get(e,n.None)}set(e,t){return super.set(e,t,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};exports.LRUCache=i})),j=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.Disposable=void 0;var t;(function(e){function t(e){return{dispose:e}}e.create=t})(t||(exports.Disposable=t={}))})),M=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});let t;function n(){if(t===void 0)throw Error(`No runtime abstraction layer installed`);return t}(function(e){function n(e){if(e===void 0)throw Error(`No runtime abstraction layer provided`);t=e}e.install=n})(n||(n={})),exports.default=n})),N=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.Emitter=exports.Event=void 0;let t=M();var n;(function(e){let t={dispose(){}};e.None=function(){return t}})(n||(exports.Event=n={}));var r=class{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e)if(this._contexts[r]===t){this._callbacks.splice(r,1),this._contexts.splice(r,1);return}else n=!0;if(n)throw Error(`When adding a listener with a context, you should remove it with the same context`)}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let a=0,o=r.length;a<o;a++)try{n.push(r[a].apply(i[a],e))}catch(e){(0,t.default)().console.error(e)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},i=class e{constructor(e){this._options=e}get event(){return this._event||(this._event=(t,n,i)=>{this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let a={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,n),a.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(i)&&i.push(a),a}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};exports.Emitter=i,i._noop=function(){}})),P=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.CancellationTokenSource=exports.CancellationToken=void 0;let t=M(),n=O(),r=N();var i;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None});function t(t){let r=t;return r&&(r===e.None||r===e.Cancelled||n.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(i||(exports.CancellationToken=i={}));let a=Object.freeze(function(e,n){let r=(0,t.default)().timer.setTimeout(e.bind(n),0);return{dispose(){r.dispose()}}});var o=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},s=class{get token(){return this._token||(this._token=new o),this._token}cancel(){this._token?this._token.cancel():this._token=i.Cancelled}dispose(){this._token?this._token instanceof o&&this._token.dispose():this._token=i.None}};exports.CancellationTokenSource=s})),F=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.SharedArrayReceiverStrategy=exports.SharedArraySenderStrategy=void 0;let t=P();var n;(function(e){e.Continue=0,e.Cancelled=1})(n||(n={}));var r=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),r=new Int32Array(t,0,1);r[0]=n.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,n.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};exports.SharedArraySenderStrategy=r;var i=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===n.Cancelled}get onCancellationRequested(){throw Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`)}},a=class{constructor(e){this.token=new i(e)}cancel(){}dispose(){}},o=class{constructor(){this.kind=`request`}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new t.CancellationTokenSource:new a(n)}};exports.SharedArrayReceiverStrategy=o})),I=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.Semaphore=void 0;let t=M();var n=class{constructor(e=1){if(e<=0)throw Error(`Capacity must be greater than 0`);this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,t.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw Error(`To many thunks active`);try{let t=e.thunk();t instanceof Promise?t.then(t=>{this._active--,e.resolve(t),this.runNext()},t=>{this._active--,e.reject(t),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};exports.Semaphore=n})),L=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ReadableStreamMessageReader=exports.AbstractMessageReader=exports.MessageReader=void 0;let t=M(),n=O(),r=N(),i=I();var a;(function(e){function t(e){let t=e;return t&&n.func(t.listen)&&n.func(t.dispose)&&n.func(t.onError)&&n.func(t.onClose)&&n.func(t.onPartialMessage)}e.is=t})(a||(exports.MessageReader=a={}));var o=class{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:Error(`Reader received error. Reason: ${n.string(e.message)?e.message:`unknown`}`)}};exports.AbstractMessageReader=o;var s;(function(e){function n(e){let n,r,i=new Map,a,o=new Map;if(e===void 0||typeof e==`string`)n=e??`utf-8`;else{if(n=e.charset??`utf-8`,e.contentDecoder!==void 0&&(r=e.contentDecoder,i.set(r.name,r)),e.contentDecoders!==void 0)for(let t of e.contentDecoders)i.set(t.name,t);if(e.contentTypeDecoder!==void 0&&(a=e.contentTypeDecoder,o.set(a.name,a)),e.contentTypeDecoders!==void 0)for(let t of e.contentTypeDecoders)o.set(t.name,t)}return a===void 0&&(a=(0,t.default)().applicationJson.decoder,o.set(a.name,a)),{charset:n,contentDecoder:r,contentDecoders:i,contentTypeDecoder:a,contentTypeDecoders:o}}e.fromOptions=n})(s||(s={}));var c=class extends o{constructor(e,n){super(),this.readable=e,this.options=s.fromOptions(n),this.buffer=(0,t.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new i.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(e=>{this.onData(e)});return this.readable.onError(e=>this.fireError(e)),this.readable.onClose(()=>this.fireClose()),t}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let e=this.buffer.tryReadHeaders(!0);if(!e)return;let t=e.get(`content-length`);if(!t){this.fireError(Error(`Header must provide a Content-Length property.\n${JSON.stringify(Object.fromEntries(e))}`));return}let n=parseInt(t);if(isNaN(n)){this.fireError(Error(`Content-Length value must be a number. Got ${t}`));return}this.nextMessageLength=n}let e=this.buffer.tryReadBody(this.nextMessageLength);if(e===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let t=this.options.contentDecoder===void 0?e:await this.options.contentDecoder.decode(e),n=await this.options.contentTypeDecoder.decode(t,this.options);this.callback(n)}).catch(e=>{this.fireError(e)})}}catch(e){this.fireError(e)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,t.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};exports.ReadableStreamMessageReader=c})),R=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.WriteableStreamMessageWriter=exports.AbstractMessageWriter=exports.MessageWriter=void 0;let t=M(),n=O(),r=I(),i=N();var a;(function(e){function t(e){let t=e;return t&&n.func(t.dispose)&&n.func(t.onClose)&&n.func(t.onError)&&n.func(t.write)}e.is=t})(a||(exports.MessageWriter=a={}));var o=class{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:Error(`Writer received error. Reason: ${n.string(e.message)?e.message:`unknown`}`)}};exports.AbstractMessageWriter=o;var s;(function(e){function n(e){return e===void 0||typeof e==`string`?{charset:e??`utf-8`,contentTypeEncoder:(0,t.default)().applicationJson.encoder}:{charset:e.charset??`utf-8`,contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,t.default)().applicationJson.encoder}}e.fromOptions=n})(s||(s={}));var c=class extends o{constructor(e,t){super(),this.writable=e,this.options=s.fromOptions(t),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError(e=>this.fireError(e)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>{let t=this.options.contentTypeEncoder.encode(e,this.options).then(e=>this.options.contentEncoder===void 0?e:this.options.contentEncoder.encode(e));return t.then(t=>{let n=[];return n.push(`Content-Length: `,t.byteLength.toString(),`\r
`),n.push(`\r
`),this.doWrite(e,n,t)},e=>{throw this.fireError(e),e})})}async doWrite(e,t,n){try{return await this.writable.write(t.join(``),`ascii`),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};exports.WriteableStreamMessageWriter=c})),z=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.AbstractMessageBuffer=void 0;var t=class{constructor(e=`utf-8`){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e==`string`?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,n=0,r=0,i=0;row:for(;n<this._chunks.length;){let e=this._chunks[n];r=0;column:for(;r<e.length;){let n=e[r];switch(n){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,r++;break row;default:t=0}break;default:t=0}r++}i+=e.byteLength,n++}if(t!==4)return;let a=this._read(i+r),o=new Map,s=this.toString(a,`ascii`).split(`\r
`);if(s.length<2)return o;for(let t=0;t<s.length-2;t++){let n=s[t],r=n.indexOf(`:`);if(r===-1)throw Error(`Message header must separate key and value using ':'\n${n}`);let i=n.substr(0,r),a=n.substr(r+1).trim();o.set(e?i.toLowerCase():i,a)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw Error(`Cannot read so many bytes!`);if(this._chunks[0].byteLength===e){let t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){let t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}let t=this.allocNative(e),n=0;for(;e>0;){let r=this._chunks[0];if(r.byteLength>e){let i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}};exports.AbstractMessageBuffer=t})),B=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createMessageConnection=exports.ConnectionOptions=exports.MessageStrategy=exports.CancellationStrategy=exports.CancellationSenderStrategy=exports.CancellationReceiverStrategy=exports.RequestCancellationReceiverStrategy=exports.IdCancellationReceiverStrategy=exports.ConnectionStrategy=exports.ConnectionError=exports.ConnectionErrors=exports.LogTraceNotification=exports.SetTraceNotification=exports.TraceFormat=exports.TraceValues=exports.Trace=exports.NullLogger=exports.ProgressType=exports.ProgressToken=void 0;let t=M(),n=O(),r=k(),i=A(),a=N(),o=P();var s;(function(e){e.type=new r.NotificationType(`$/cancelRequest`)})(s||(s={}));var c;(function(e){function t(e){return typeof e==`string`||typeof e==`number`}e.is=t})(c||(exports.ProgressToken=c={}));var l;(function(e){e.type=new r.NotificationType(`$/progress`)})(l||(l={}));var u=class{constructor(){}};exports.ProgressType=u;var d;(function(e){function t(e){return n.func(e)}e.is=t})(d||(d={})),exports.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var f;(function(e){e[e.Off=0]=`Off`,e[e.Messages=1]=`Messages`,e[e.Compact=2]=`Compact`,e[e.Verbose=3]=`Verbose`})(f||(exports.Trace=f={}));var p;(function(e){e.Off=`off`,e.Messages=`messages`,e.Compact=`compact`,e.Verbose=`verbose`})(p||(exports.TraceValues=p={})),(function(e){function t(t){if(!n.string(t))return e.Off;switch(t=t.toLowerCase(),t){case`off`:return e.Off;case`messages`:return e.Messages;case`compact`:return e.Compact;case`verbose`:return e.Verbose;default:return e.Off}}e.fromString=t;function r(t){switch(t){case e.Off:return`off`;case e.Messages:return`messages`;case e.Compact:return`compact`;case e.Verbose:return`verbose`;default:return`off`}}e.toString=r})(f||(exports.Trace=f={}));var m;(function(e){e.Text=`text`,e.JSON=`json`})(m||(exports.TraceFormat=m={})),(function(e){function t(t){return n.string(t)?(t=t.toLowerCase(),t===`json`?e.JSON:e.Text):e.Text}e.fromString=t})(m||(exports.TraceFormat=m={}));var h;(function(e){e.type=new r.NotificationType(`$/setTrace`)})(h||(exports.SetTraceNotification=h={}));var g;(function(e){e.type=new r.NotificationType(`$/logTrace`)})(g||(exports.LogTraceNotification=g={}));var _;(function(e){e[e.Closed=1]=`Closed`,e[e.Disposed=2]=`Disposed`,e[e.AlreadyListening=3]=`AlreadyListening`})(_||(exports.ConnectionErrors=_={}));var v=class e extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,e.prototype)}};exports.ConnectionError=v;var y;(function(e){function t(e){let t=e;return t&&n.func(t.cancelUndispatched)}e.is=t})(y||(exports.ConnectionStrategy=y={}));var b;(function(e){function t(e){let t=e;return t&&(t.kind===void 0||t.kind===`id`)&&n.func(t.createCancellationTokenSource)&&(t.dispose===void 0||n.func(t.dispose))}e.is=t})(b||(exports.IdCancellationReceiverStrategy=b={}));var x;(function(e){function t(e){let t=e;return t&&t.kind===`request`&&n.func(t.createCancellationTokenSource)&&(t.dispose===void 0||n.func(t.dispose))}e.is=t})(x||(exports.RequestCancellationReceiverStrategy=x={}));var S;(function(e){e.Message=Object.freeze({createCancellationTokenSource(e){return new o.CancellationTokenSource}});function t(e){return b.is(e)||x.is(e)}e.is=t})(S||(exports.CancellationReceiverStrategy=S={}));var C;(function(e){e.Message=Object.freeze({sendCancellation(e,t){return e.sendNotification(s.type,{id:t})},cleanup(e){}});function t(e){let t=e;return t&&n.func(t.sendCancellation)&&n.func(t.cleanup)}e.is=t})(C||(exports.CancellationSenderStrategy=C={}));var w;(function(e){e.Message=Object.freeze({receiver:S.Message,sender:C.Message});function t(e){let t=e;return t&&S.is(t.receiver)&&C.is(t.sender)}e.is=t})(w||(exports.CancellationStrategy=w={}));var T;(function(e){function t(e){let t=e;return t&&n.func(t.handleMessage)}e.is=t})(T||(exports.MessageStrategy=T={}));var E;(function(e){function t(e){let t=e;return t&&(w.is(t.cancellationStrategy)||y.is(t.connectionStrategy)||T.is(t.messageStrategy))}e.is=t})(E||(exports.ConnectionOptions=E={}));var D;(function(e){e[e.New=1]=`New`,e[e.Listening=2]=`Listening`,e[e.Closed=3]=`Closed`,e[e.Disposed=4]=`Disposed`})(D||(D={}));function j(u,p,y,x){let S=y===void 0?exports.NullLogger:y,C=0,E=0,O=0,k,A=new Map,j,M=new Map,N=new Map,P,F=new i.LinkedMap,I=new Map,L=new Set,R=new Map,z=f.Off,B=m.Text,V,H=D.New,U=new a.Emitter,W=new a.Emitter,ee=new a.Emitter,G=new a.Emitter,te=new a.Emitter,K=x&&x.cancellationStrategy?x.cancellationStrategy:w.Message;function ne(e){if(e===null)throw Error(`Can't send requests with id null since the response can't be correlated.`);return`req-`+e.toString()}function re(e){return e===null?`res-unknown-`+(++O).toString():`res-`+e.toString()}function ie(){return`not-`+(++E).toString()}function ae(e,t){r.Message.isRequest(t)?e.set(ne(t.id),t):r.Message.isResponse(t)?e.set(re(t.id),t):e.set(ie(),t)}function oe(e){}function se(){return H===D.Listening}function ce(){return H===D.Closed}function le(){return H===D.Disposed}function ue(){(H===D.New||H===D.Listening)&&(H=D.Closed,W.fire(void 0))}function de(e){U.fire([e,void 0,void 0])}function fe(e){U.fire(e)}u.onClose(ue),u.onError(de),p.onClose(ue),p.onError(fe);function pe(){P||F.size===0||(P=(0,t.default)().timer.setImmediate(()=>{P=void 0,he()}))}function me(e){r.Message.isRequest(e)?_e(e):r.Message.isNotification(e)?ye(e):r.Message.isResponse(e)?ve(e):be(e)}function he(){if(F.size===0)return;let e=F.shift();try{let t=x?.messageStrategy;T.is(t)?t.handleMessage(e,me):me(e)}finally{pe()}}let ge=e=>{try{if(r.Message.isNotification(e)&&e.method===s.type.method){let t=e.params.id,n=ne(t),i=F.get(n);if(r.Message.isRequest(i)){let r=x?.connectionStrategy,a=r&&r.cancelUndispatched?r.cancelUndispatched(i,oe):void 0;if(a&&(a.error!==void 0||a.result!==void 0)){F.delete(n),R.delete(t),a.id=i.id,Ce(a,e.method,Date.now()),p.write(a).catch(()=>S.error(`Sending response for canceled message failed.`));return}}let a=R.get(t);if(a!==void 0){a.cancel(),Y(e);return}else L.add(t)}ae(F,e)}finally{pe()}};function _e(e){if(le())return;function t(t,n,i){let a={jsonrpc:`2.0`,id:e.id};t instanceof r.ResponseError?a.error=t.toJson():a.result=t===void 0?null:t,Ce(a,n,i),p.write(a).catch(()=>S.error(`Sending response failed.`))}function i(t,n,r){let i={jsonrpc:`2.0`,id:e.id,error:t.toJson()};Ce(i,n,r),p.write(i).catch(()=>S.error(`Sending response failed.`))}function a(t,n,r){t===void 0&&(t=null);let i={jsonrpc:`2.0`,id:e.id,result:t};Ce(i,n,r),p.write(i).catch(()=>S.error(`Sending response failed.`))}J(e);let o=A.get(e.method),s,c;o&&(s=o.type,c=o.handler);let l=Date.now();if(c||k){let o=e.id??String(Date.now()),u=b.is(K.receiver)?K.receiver.createCancellationTokenSource(o):K.receiver.createCancellationTokenSource(e);e.id!==null&&L.has(e.id)&&u.cancel(),e.id!==null&&R.set(o,u);try{let d;if(c)if(e.params===void 0){if(s!==void 0&&s.numberOfParams!==0){i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines ${s.numberOfParams} params but received none.`),e.method,l);return}d=c(u.token)}else if(Array.isArray(e.params)){if(s!==void 0&&s.parameterStructures===r.ParameterStructures.byName){i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);return}d=c(...e.params,u.token)}else{if(s!==void 0&&s.parameterStructures===r.ParameterStructures.byPosition){i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);return}d=c(e.params,u.token)}else k&&(d=k(e.method,e.params,u.token));let f=d;d?f.then?f.then(n=>{R.delete(o),t(n,e.method,l)},t=>{R.delete(o),t instanceof r.ResponseError?i(t,e.method,l):t&&n.string(t.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}):(R.delete(o),t(d,e.method,l)):(R.delete(o),a(d,e.method,l))}catch(a){R.delete(o),a instanceof r.ResponseError?t(a,e.method,l):a&&n.string(a.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${a.message}`),e.method,l):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else i(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}function ve(e){if(!le())if(e.id===null)e.error?S.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):S.error(`Received response message without id. No further error information provided.`);else{let t=e.id,n=I.get(t);if(we(e,n),n!==void 0){I.delete(t);try{if(e.error){let t=e.error;n.reject(new r.ResponseError(t.code,t.message,t.data))}else if(e.result!==void 0)n.resolve(e.result);else throw Error(`Should never happen.`)}catch(e){e.message?S.error(`Response handler '${n.method}' failed with message: ${e.message}`):S.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}function ye(e){if(le())return;let t,n;if(e.method===s.type.method){let t=e.params.id;L.delete(t),Y(e);return}else{let r=M.get(e.method);r&&(n=r.handler,t=r.type)}if(n||j)try{if(Y(e),n)if(e.params===void 0)t!==void 0&&t.numberOfParams!==0&&t.parameterStructures!==r.ParameterStructures.byName&&S.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){let i=e.params;e.method===l.type.method&&i.length===2&&c.is(i[0])?n({token:i[0],value:i[1]}):(t!==void 0&&(t.parameterStructures===r.ParameterStructures.byName&&S.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&S.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${i.length} arguments`)),n(...i))}else t!==void 0&&t.parameterStructures===r.ParameterStructures.byPosition&&S.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else j&&j(e.method,e.params)}catch(t){t.message?S.error(`Notification handler '${e.method}' failed with message: ${t.message}`):S.error(`Notification handler '${e.method}' failed unexpectedly.`)}else ee.fire(e)}function be(e){if(!e){S.error(`Received empty message.`);return}S.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(n.string(t.id)||n.number(t.id)){let e=t.id,n=I.get(e);n&&n.reject(Error(`The received response has neither a result nor an error property.`))}}function q(e){if(e!=null)switch(z){case f.Verbose:return JSON.stringify(e,null,4);case f.Compact:return JSON.stringify(e);default:return}}function xe(e){if(!(z===f.Off||!V))if(B===m.Text){let t;(z===f.Verbose||z===f.Compact)&&e.params&&(t=`Params: ${q(e.params)}\n\n`),V.log(`Sending request '${e.method} - (${e.id})'.`,t)}else X(`send-request`,e)}function Se(e){if(!(z===f.Off||!V))if(B===m.Text){let t;(z===f.Verbose||z===f.Compact)&&(t=e.params?`Params: ${q(e.params)}\n\n`:`No parameters provided.

`),V.log(`Sending notification '${e.method}'.`,t)}else X(`send-notification`,e)}function Ce(e,t,n){if(!(z===f.Off||!V))if(B===m.Text){let r;(z===f.Verbose||z===f.Compact)&&(e.error&&e.error.data?r=`Error data: ${q(e.error.data)}\n\n`:e.result?r=`Result: ${q(e.result)}\n\n`:e.error===void 0&&(r=`No result returned.

`)),V.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else X(`send-response`,e)}function J(e){if(!(z===f.Off||!V))if(B===m.Text){let t;(z===f.Verbose||z===f.Compact)&&e.params&&(t=`Params: ${q(e.params)}\n\n`),V.log(`Received request '${e.method} - (${e.id})'.`,t)}else X(`receive-request`,e)}function Y(e){if(!(z===f.Off||!V||e.method===g.type.method))if(B===m.Text){let t;(z===f.Verbose||z===f.Compact)&&(t=e.params?`Params: ${q(e.params)}\n\n`:`No parameters provided.

`),V.log(`Received notification '${e.method}'.`,t)}else X(`receive-notification`,e)}function we(e,t){if(!(z===f.Off||!V))if(B===m.Text){let n;if((z===f.Verbose||z===f.Compact)&&(e.error&&e.error.data?n=`Error data: ${q(e.error.data)}\n\n`:e.result?n=`Result: ${q(e.result)}\n\n`:e.error===void 0&&(n=`No result returned.

`)),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:``;V.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else V.log(`Received response ${e.id} without active response promise.`,n)}else X(`receive-response`,e)}function X(e,t){if(!V||z===f.Off)return;let n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};V.log(n)}function Z(){if(ce())throw new v(_.Closed,`Connection is closed.`);if(le())throw new v(_.Disposed,`Connection is disposed.`)}function Te(){if(se())throw new v(_.AlreadyListening,`Connection is already listening`)}function Ee(){if(!se())throw Error(`Call listen() first.`)}function Q(e){return e===void 0?null:e}function De(e){if(e!==null)return e}function Oe(e){return e!=null&&!Array.isArray(e)&&typeof e==`object`}function ke(e,t){switch(e){case r.ParameterStructures.auto:return Oe(t)?De(t):[Q(t)];case r.ParameterStructures.byName:if(!Oe(t))throw Error(`Received parameters by name but param is not an object literal.`);return De(t);case r.ParameterStructures.byPosition:return[Q(t)];default:throw Error(`Unknown parameter structure ${e.toString()}`)}}function Ae(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=ke(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(Q(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null);break}return n}let je={sendNotification:(e,...t)=>{Z();let i,a;if(n.string(e)){i=e;let n=t[0],o=0,s=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(o=1,s=n);let c=t.length,l=c-o;switch(l){case 0:a=void 0;break;case 1:a=ke(s,t[o]);break;default:if(s===r.ParameterStructures.byName)throw Error(`Received ${l} parameters for 'by Name' notification parameter structure.`);a=t.slice(o,c).map(e=>Q(e));break}}else{let n=t;i=e.method,a=Ae(e,n)}let o={jsonrpc:`2.0`,method:i,params:a};return Se(o),p.write(o).catch(e=>{throw S.error(`Sending notification failed.`),e})},onNotification:(e,t)=>{Z();let r;return n.func(e)?j=e:t&&(n.string(e)?(r=e,M.set(e,{type:void 0,handler:t})):(r=e.method,M.set(e.method,{type:e,handler:t}))),{dispose:()=>{r===void 0?j=void 0:M.delete(r)}}},onProgress:(e,t,n)=>{if(N.has(t))throw Error(`Progress handler for token ${t} already registered`);return N.set(t,n),{dispose:()=>{N.delete(t)}}},sendProgress:(e,t,n)=>je.sendNotification(l.type,{token:t,value:n}),onUnhandledProgress:G.event,sendRequest:(e,...t)=>{Z(),Ee();let i,a,s;if(n.string(e)){i=e;let n=t[0],c=t[t.length-1],l=0,u=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(l=1,u=n);let d=t.length;o.CancellationToken.is(c)&&(--d,s=c);let f=d-l;switch(f){case 0:a=void 0;break;case 1:a=ke(u,t[l]);break;default:if(u===r.ParameterStructures.byName)throw Error(`Received ${f} parameters for 'by Name' request parameter structure.`);a=t.slice(l,d).map(e=>Q(e));break}}else{let n=t;i=e.method,a=Ae(e,n);let r=e.numberOfParams;s=o.CancellationToken.is(n[r])?n[r]:void 0}let c=C++,l;s&&(l=s.onCancellationRequested(()=>{let e=K.sender.sendCancellation(je,c);return e===void 0?(S.log(`Received no promise from cancellation strategy when cancelling id ${c}`),Promise.resolve()):e.catch(()=>{S.log(`Sending cancellation messages for id ${c} failed`)})}));let u={jsonrpc:`2.0`,id:c,method:i,params:a};return xe(u),typeof K.sender.enableCancellation==`function`&&K.sender.enableCancellation(u),new Promise(async(e,t)=>{let n=t=>{e(t),K.sender.cleanup(c),l?.dispose()},a=e=>{t(e),K.sender.cleanup(c),l?.dispose()},o={method:i,timerStart:Date.now(),resolve:n,reject:a};try{await p.write(u),I.set(c,o)}catch(e){throw S.error(`Sending request failed.`),o.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,e.message?e.message:`Unknown reason`)),e}})},onRequest:(e,t)=>{Z();let r=null;return d.is(e)?(r=void 0,k=e):n.string(e)?(r=null,t!==void 0&&(r=e,A.set(e,{handler:t,type:void 0}))):t!==void 0&&(r=e.method,A.set(e.method,{type:e,handler:t})),{dispose:()=>{r!==null&&(r===void 0?k=void 0:A.delete(r))}}},hasPendingResponse:()=>I.size>0,trace:async(e,t,r)=>{let i=!1,a=m.Text;r!==void 0&&(n.boolean(r)?i=r:(i=r.sendNotification||!1,a=r.traceFormat||m.Text)),z=e,B=a,V=z===f.Off?void 0:t,i&&!ce()&&!le()&&await je.sendNotification(h.type,{value:f.toString(e)})},onError:U.event,onClose:W.event,onUnhandledNotification:ee.event,onDispose:te.event,end:()=>{p.end()},dispose:()=>{if(le())return;H=D.Disposed,te.fire(void 0);let e=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,`Pending response rejected since connection got disposed`);for(let t of I.values())t.reject(e);I=new Map,R=new Map,L=new Set,F=new i.LinkedMap,n.func(p.dispose)&&p.dispose(),n.func(u.dispose)&&u.dispose()},listen:()=>{Z(),Te(),H=D.Listening,u.listen(ge)},inspect:()=>{(0,t.default)().console.log(`inspect`)}};return je.onNotification(g.type,e=>{if(z===f.Off||!V)return;let t=z===f.Verbose||z===f.Compact;V.log(e.message,t?e.verbose:void 0)}),je.onNotification(l.type,e=>{let t=N.get(e.token);t?t(e.value):G.fire(e)}),je}exports.createMessageConnection=j})),V=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ProgressType=exports.ProgressToken=exports.createMessageConnection=exports.NullLogger=exports.ConnectionOptions=exports.ConnectionStrategy=exports.AbstractMessageBuffer=exports.WriteableStreamMessageWriter=exports.AbstractMessageWriter=exports.MessageWriter=exports.ReadableStreamMessageReader=exports.AbstractMessageReader=exports.MessageReader=exports.SharedArrayReceiverStrategy=exports.SharedArraySenderStrategy=exports.CancellationToken=exports.CancellationTokenSource=exports.Emitter=exports.Event=exports.Disposable=exports.LRUCache=exports.Touch=exports.LinkedMap=exports.ParameterStructures=exports.NotificationType9=exports.NotificationType8=exports.NotificationType7=exports.NotificationType6=exports.NotificationType5=exports.NotificationType4=exports.NotificationType3=exports.NotificationType2=exports.NotificationType1=exports.NotificationType0=exports.NotificationType=exports.ErrorCodes=exports.ResponseError=exports.RequestType9=exports.RequestType8=exports.RequestType7=exports.RequestType6=exports.RequestType5=exports.RequestType4=exports.RequestType3=exports.RequestType2=exports.RequestType1=exports.RequestType0=exports.RequestType=exports.Message=exports.RAL=void 0,exports.MessageStrategy=exports.CancellationStrategy=exports.CancellationSenderStrategy=exports.CancellationReceiverStrategy=exports.ConnectionError=exports.ConnectionErrors=exports.LogTraceNotification=exports.SetTraceNotification=exports.TraceFormat=exports.TraceValues=exports.Trace=void 0;let t=k();Object.defineProperty(exports,`Message`,{enumerable:!0,get:function(){return t.Message}}),Object.defineProperty(exports,`RequestType`,{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(exports,`RequestType0`,{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(exports,`RequestType1`,{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(exports,`RequestType2`,{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(exports,`RequestType3`,{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(exports,`RequestType4`,{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(exports,`RequestType5`,{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(exports,`RequestType6`,{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(exports,`RequestType7`,{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(exports,`RequestType8`,{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(exports,`RequestType9`,{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(exports,`ResponseError`,{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(exports,`ErrorCodes`,{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(exports,`NotificationType`,{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(exports,`NotificationType0`,{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(exports,`NotificationType1`,{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(exports,`NotificationType2`,{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(exports,`NotificationType3`,{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(exports,`NotificationType4`,{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(exports,`NotificationType5`,{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(exports,`NotificationType6`,{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(exports,`NotificationType7`,{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(exports,`NotificationType8`,{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(exports,`NotificationType9`,{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(exports,`ParameterStructures`,{enumerable:!0,get:function(){return t.ParameterStructures}});let n=A();Object.defineProperty(exports,`LinkedMap`,{enumerable:!0,get:function(){return n.LinkedMap}}),Object.defineProperty(exports,`LRUCache`,{enumerable:!0,get:function(){return n.LRUCache}}),Object.defineProperty(exports,`Touch`,{enumerable:!0,get:function(){return n.Touch}});let r=j();Object.defineProperty(exports,`Disposable`,{enumerable:!0,get:function(){return r.Disposable}});let i=N();Object.defineProperty(exports,`Event`,{enumerable:!0,get:function(){return i.Event}}),Object.defineProperty(exports,`Emitter`,{enumerable:!0,get:function(){return i.Emitter}});let a=P();Object.defineProperty(exports,`CancellationTokenSource`,{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(exports,`CancellationToken`,{enumerable:!0,get:function(){return a.CancellationToken}});let o=F();Object.defineProperty(exports,`SharedArraySenderStrategy`,{enumerable:!0,get:function(){return o.SharedArraySenderStrategy}}),Object.defineProperty(exports,`SharedArrayReceiverStrategy`,{enumerable:!0,get:function(){return o.SharedArrayReceiverStrategy}});let s=L();Object.defineProperty(exports,`MessageReader`,{enumerable:!0,get:function(){return s.MessageReader}}),Object.defineProperty(exports,`AbstractMessageReader`,{enumerable:!0,get:function(){return s.AbstractMessageReader}}),Object.defineProperty(exports,`ReadableStreamMessageReader`,{enumerable:!0,get:function(){return s.ReadableStreamMessageReader}});let c=R();Object.defineProperty(exports,`MessageWriter`,{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(exports,`AbstractMessageWriter`,{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(exports,`WriteableStreamMessageWriter`,{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});let l=z();Object.defineProperty(exports,`AbstractMessageBuffer`,{enumerable:!0,get:function(){return l.AbstractMessageBuffer}});let u=B();Object.defineProperty(exports,`ConnectionStrategy`,{enumerable:!0,get:function(){return u.ConnectionStrategy}}),Object.defineProperty(exports,`ConnectionOptions`,{enumerable:!0,get:function(){return u.ConnectionOptions}}),Object.defineProperty(exports,`NullLogger`,{enumerable:!0,get:function(){return u.NullLogger}}),Object.defineProperty(exports,`createMessageConnection`,{enumerable:!0,get:function(){return u.createMessageConnection}}),Object.defineProperty(exports,`ProgressToken`,{enumerable:!0,get:function(){return u.ProgressToken}}),Object.defineProperty(exports,`ProgressType`,{enumerable:!0,get:function(){return u.ProgressType}}),Object.defineProperty(exports,`Trace`,{enumerable:!0,get:function(){return u.Trace}}),Object.defineProperty(exports,`TraceValues`,{enumerable:!0,get:function(){return u.TraceValues}}),Object.defineProperty(exports,`TraceFormat`,{enumerable:!0,get:function(){return u.TraceFormat}}),Object.defineProperty(exports,`SetTraceNotification`,{enumerable:!0,get:function(){return u.SetTraceNotification}}),Object.defineProperty(exports,`LogTraceNotification`,{enumerable:!0,get:function(){return u.LogTraceNotification}}),Object.defineProperty(exports,`ConnectionErrors`,{enumerable:!0,get:function(){return u.ConnectionErrors}}),Object.defineProperty(exports,`ConnectionError`,{enumerable:!0,get:function(){return u.ConnectionError}}),Object.defineProperty(exports,`CancellationReceiverStrategy`,{enumerable:!0,get:function(){return u.CancellationReceiverStrategy}}),Object.defineProperty(exports,`CancellationSenderStrategy`,{enumerable:!0,get:function(){return u.CancellationSenderStrategy}}),Object.defineProperty(exports,`CancellationStrategy`,{enumerable:!0,get:function(){return u.CancellationStrategy}}),Object.defineProperty(exports,`MessageStrategy`,{enumerable:!0,get:function(){return u.MessageStrategy}});let d=M();exports.RAL=d.default})),H=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});let t=require(`util`),n=V();var r=class e extends n.AbstractMessageBuffer{constructor(e=`utf-8`){super(e)}emptyBuffer(){return e.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,n){return e instanceof Buffer?e.toString(n):new t.TextDecoder(n).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};r.emptyBuffer=Buffer.allocUnsafe(0);var i=class{constructor(e){this.stream=e}onClose(e){return this.stream.on(`close`,e),n.Disposable.create(()=>this.stream.off(`close`,e))}onError(e){return this.stream.on(`error`,e),n.Disposable.create(()=>this.stream.off(`error`,e))}onEnd(e){return this.stream.on(`end`,e),n.Disposable.create(()=>this.stream.off(`end`,e))}onData(e){return this.stream.on(`data`,e),n.Disposable.create(()=>this.stream.off(`data`,e))}},a=class{constructor(e){this.stream=e}onClose(e){return this.stream.on(`close`,e),n.Disposable.create(()=>this.stream.off(`close`,e))}onError(e){return this.stream.on(`error`,e),n.Disposable.create(()=>this.stream.off(`error`,e))}onEnd(e){return this.stream.on(`end`,e),n.Disposable.create(()=>this.stream.off(`end`,e))}write(e,t){return new Promise((n,r)=>{let i=e=>{e==null?n():r(e)};typeof e==`string`?this.stream.write(e,t,i):this.stream.write(e,i)})}end(){this.stream.end()}};let o=Object.freeze({messageBuffer:Object.freeze({create:e=>new r(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:`application/json`,encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:`application/json`,decode:(e,n)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(n.charset))):Promise.resolve(JSON.parse(new t.TextDecoder(n.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new i(e),asWritableStream:e=>new a(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function s(){return o}(function(e){function t(){n.RAL.install(o)}e.install=t})(s||(s={})),exports.default=s})),U=o((exports=>{var t=exports&&exports.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=exports&&exports.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createMessageConnection=exports.createServerSocketTransport=exports.createClientSocketTransport=exports.createServerPipeTransport=exports.createClientPipeTransport=exports.generateRandomPipeName=exports.StreamMessageWriter=exports.StreamMessageReader=exports.SocketMessageWriter=exports.SocketMessageReader=exports.PortMessageWriter=exports.PortMessageReader=exports.IPCMessageWriter=exports.IPCMessageReader=void 0;let r=H();r.default.install();let i=require(`path`),a=require(`os`),o=require(`crypto`),s=require(`net`),c=V();n(V(),exports);var l=class extends c.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on(`error`,e=>this.fireError(e)),t.on(`close`,()=>this.fireClose())}listen(e){return this.process.on(`message`,e),c.Disposable.create(()=>this.process.off(`message`,e))}};exports.IPCMessageReader=l;var u=class extends c.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on(`error`,e=>this.fireError(e)),t.on(`close`,()=>this.fireClose)}write(e){try{return typeof this.process.send==`function`&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};exports.IPCMessageWriter=u;var d=class extends c.AbstractMessageReader{constructor(e){super(),this.onData=new c.Emitter,e.on(`close`,()=>this.fireClose),e.on(`error`,e=>this.fireError(e)),e.on(`message`,e=>{this.onData.fire(e)})}listen(e){return this.onData.event(e)}};exports.PortMessageReader=d;var f=class extends c.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on(`close`,()=>this.fireClose()),e.on(`error`,e=>this.fireError(e))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};exports.PortMessageWriter=f;var p=class extends c.ReadableStreamMessageReader{constructor(e,t=`utf-8`){super((0,r.default)().stream.asReadableStream(e),t)}};exports.SocketMessageReader=p;var m=class extends c.WriteableStreamMessageWriter{constructor(e,t){super((0,r.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};exports.SocketMessageWriter=m;var h=class extends c.ReadableStreamMessageReader{constructor(e,t){super((0,r.default)().stream.asReadableStream(e),t)}};exports.StreamMessageReader=h;var g=class extends c.WriteableStreamMessageWriter{constructor(e,t){super((0,r.default)().stream.asWritableStream(e),t)}};exports.StreamMessageWriter=g;let _=process.env.XDG_RUNTIME_DIR,v=new Map([[`linux`,107],[`darwin`,103]]);function y(){let e=(0,o.randomBytes)(21).toString(`hex`);if(process.platform===`win32`)return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;t=_?i.join(_,`vscode-ipc-${e}.sock`):i.join(a.tmpdir(),`vscode-${e}.sock`);let n=v.get(process.platform);return n!==void 0&&t.length>n&&(0,r.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t}exports.generateRandomPipeName=y;function b(e,t=`utf-8`){let n,r=new Promise((e,t)=>{n=e});return new Promise((i,a)=>{let o=(0,s.createServer)(e=>{o.close(),n([new p(e,t),new m(e,t)])});o.on(`error`,a),o.listen(e,()=>{o.removeListener(`error`,a),i({onConnected:()=>r})})})}exports.createClientPipeTransport=b;function x(e,t=`utf-8`){let n=(0,s.createConnection)(e);return[new p(n,t),new m(n,t)]}exports.createServerPipeTransport=x;function S(e,t=`utf-8`){let n,r=new Promise((e,t)=>{n=e});return new Promise((i,a)=>{let o=(0,s.createServer)(e=>{o.close(),n([new p(e,t),new m(e,t)])});o.on(`error`,a),o.listen(e,`127.0.0.1`,()=>{o.removeListener(`error`,a),i({onConnected:()=>r})})})}exports.createClientSocketTransport=S;function C(e,t=`utf-8`){let n=(0,s.createConnection)(e,`127.0.0.1`);return[new p(n,t),new m(n,t)]}exports.createServerSocketTransport=C;function w(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function T(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function E(e,t,n,r){n||(n=c.NullLogger);let i=w(e)?new h(e):e,a=T(t)?new g(t):t;return c.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,c.createMessageConnection)(i,a,n,r)}exports.createMessageConnection=E})),W=o(((exports,t)=>{t.exports=U()})),ee=o(((exports,t)=>{(function(n){if(typeof t==`object`&&typeof t.exports==`object`){var r=n(require,exports);r!==void 0&&(t.exports=r)}else typeof define==`function`&&define.amd&&define([`require`,`exports`],n)})(function(e,t){Object.defineProperty(t,`__esModule`,{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var n;(function(e){function t(e){return typeof e==`string`}e.is=t})(n||(t.DocumentUri=n={}));var r;(function(e){function t(e){return typeof e==`string`}e.is=t})(r||(t.URI=r={}));var i;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(t){return typeof t==`number`&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=t})(i||(t.integer=i={}));var a;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(t){return typeof t==`number`&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=t})(a||(t.uinteger=a={}));var o;(function(e){function t(e,t){return e===Number.MAX_VALUE&&(e=a.MAX_VALUE),t===Number.MAX_VALUE&&(t=a.MAX_VALUE),{line:e,character:t}}e.create=t;function n(e){var t=e;return $.objectLiteral(t)&&$.uinteger(t.line)&&$.uinteger(t.character)}e.is=n})(o||(t.Position=o={}));var s;(function(e){function t(e,t,n,r){if($.uinteger(e)&&$.uinteger(t)&&$.uinteger(n)&&$.uinteger(r))return{start:o.create(e,t),end:o.create(n,r)};if(o.is(e)&&o.is(t))return{start:e,end:t};throw Error(`Range#create called with invalid arguments[${e}, ${t}, ${n}, ${r}]`)}e.create=t;function n(e){var t=e;return $.objectLiteral(t)&&o.is(t.start)&&o.is(t.end)}e.is=n})(s||(t.Range=s={}));var c;(function(e){function t(e,t){return{uri:e,range:t}}e.create=t;function n(e){var t=e;return $.objectLiteral(t)&&s.is(t.range)&&($.string(t.uri)||$.undefined(t.uri))}e.is=n})(c||(t.Location=c={}));var l;(function(e){function t(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}}e.create=t;function n(e){var t=e;return $.objectLiteral(t)&&s.is(t.targetRange)&&$.string(t.targetUri)&&s.is(t.targetSelectionRange)&&(s.is(t.originSelectionRange)||$.undefined(t.originSelectionRange))}e.is=n})(l||(t.LocationLink=l={}));var u;(function(e){function t(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}}e.create=t;function n(e){var t=e;return $.objectLiteral(t)&&$.numberRange(t.red,0,1)&&$.numberRange(t.green,0,1)&&$.numberRange(t.blue,0,1)&&$.numberRange(t.alpha,0,1)}e.is=n})(u||(t.Color=u={}));var d;(function(e){function t(e,t){return{range:e,color:t}}e.create=t;function n(e){var t=e;return $.objectLiteral(t)&&s.is(t.range)&&u.is(t.color)}e.is=n})(d||(t.ColorInformation=d={}));var f;(function(e){function t(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}}e.create=t;function n(e){var t=e;return $.objectLiteral(t)&&$.string(t.label)&&($.undefined(t.textEdit)||x.is(t))&&($.undefined(t.additionalTextEdits)||$.typedArray(t.additionalTextEdits,x.is))}e.is=n})(f||(t.ColorPresentation=f={}));var p;(function(e){e.Comment=`comment`,e.Imports=`imports`,e.Region=`region`})(p||(t.FoldingRangeKind=p={}));var m;(function(e){function t(e,t,n,r,i,a){var o={startLine:e,endLine:t};return $.defined(n)&&(o.startCharacter=n),$.defined(r)&&(o.endCharacter=r),$.defined(i)&&(o.kind=i),$.defined(a)&&(o.collapsedText=a),o}e.create=t;function n(e){var t=e;return $.objectLiteral(t)&&$.uinteger(t.startLine)&&$.uinteger(t.startLine)&&($.undefined(t.startCharacter)||$.uinteger(t.startCharacter))&&($.undefined(t.endCharacter)||$.uinteger(t.endCharacter))&&($.undefined(t.kind)||$.string(t.kind))}e.is=n})(m||(t.FoldingRange=m={}));var h;(function(e){function t(e,t){return{location:e,message:t}}e.create=t;function n(e){var t=e;return $.defined(t)&&c.is(t.location)&&$.string(t.message)}e.is=n})(h||(t.DiagnosticRelatedInformation=h={}));var g;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(g||(t.DiagnosticSeverity=g={}));var _;(function(e){e.Unnecessary=1,e.Deprecated=2})(_||(t.DiagnosticTag=_={}));var v;(function(e){function t(e){var t=e;return $.objectLiteral(t)&&$.string(t.href)}e.is=t})(v||(t.CodeDescription=v={}));var y;(function(e){function t(e,t,n,r,i,a){var o={range:e,message:t};return $.defined(n)&&(o.severity=n),$.defined(r)&&(o.code=r),$.defined(i)&&(o.source=i),$.defined(a)&&(o.relatedInformation=a),o}e.create=t;function n(e){var t,n=e;return $.defined(n)&&s.is(n.range)&&$.string(n.message)&&($.number(n.severity)||$.undefined(n.severity))&&($.integer(n.code)||$.string(n.code)||$.undefined(n.code))&&($.undefined(n.codeDescription)||$.string((t=n.codeDescription)==null?void 0:t.href))&&($.string(n.source)||$.undefined(n.source))&&($.undefined(n.relatedInformation)||$.typedArray(n.relatedInformation,h.is))}e.is=n})(y||(t.Diagnostic=y={}));var b;(function(e){function t(e,t){var n=[...arguments].slice(2),r={title:e,command:t};return $.defined(n)&&n.length>0&&(r.arguments=n),r}e.create=t;function n(e){var t=e;return $.defined(t)&&$.string(t.title)&&$.string(t.command)}e.is=n})(b||(t.Command=b={}));var x;(function(e){function t(e,t){return{range:e,newText:t}}e.replace=t;function n(e,t){return{range:{start:e,end:e},newText:t}}e.insert=n;function r(e){return{range:e,newText:``}}e.del=r;function i(e){var t=e;return $.objectLiteral(t)&&$.string(t.newText)&&s.is(t.range)}e.is=i})(x||(t.TextEdit=x={}));var S;(function(e){function t(e,t,n){var r={label:e};return t!==void 0&&(r.needsConfirmation=t),n!==void 0&&(r.description=n),r}e.create=t;function n(e){var t=e;return $.objectLiteral(t)&&$.string(t.label)&&($.boolean(t.needsConfirmation)||t.needsConfirmation===void 0)&&($.string(t.description)||t.description===void 0)}e.is=n})(S||(t.ChangeAnnotation=S={}));var C;(function(e){function t(e){var t=e;return $.string(t)}e.is=t})(C||(t.ChangeAnnotationIdentifier=C={}));var w;(function(e){function t(e,t,n){return{range:e,newText:t,annotationId:n}}e.replace=t;function n(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}}e.insert=n;function r(e,t){return{range:e,newText:``,annotationId:t}}e.del=r;function i(e){var t=e;return x.is(t)&&(S.is(t.annotationId)||C.is(t.annotationId))}e.is=i})(w||(t.AnnotatedTextEdit=w={}));var T;(function(e){function t(e,t){return{textDocument:e,edits:t}}e.create=t;function n(e){var t=e;return $.defined(t)&&F.is(t.textDocument)&&Array.isArray(t.edits)}e.is=n})(T||(t.TextDocumentEdit=T={}));var E;(function(e){function t(e,t,n){var r={kind:`create`,uri:e};return t!==void 0&&(t.overwrite!==void 0||t.ignoreIfExists!==void 0)&&(r.options=t),n!==void 0&&(r.annotationId=n),r}e.create=t;function n(e){var t=e;return t&&t.kind===`create`&&$.string(t.uri)&&(t.options===void 0||(t.options.overwrite===void 0||$.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||$.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||C.is(t.annotationId))}e.is=n})(E||(t.CreateFile=E={}));var D;(function(e){function t(e,t,n,r){var i={kind:`rename`,oldUri:e,newUri:t};return n!==void 0&&(n.overwrite!==void 0||n.ignoreIfExists!==void 0)&&(i.options=n),r!==void 0&&(i.annotationId=r),i}e.create=t;function n(e){var t=e;return t&&t.kind===`rename`&&$.string(t.oldUri)&&$.string(t.newUri)&&(t.options===void 0||(t.options.overwrite===void 0||$.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||$.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||C.is(t.annotationId))}e.is=n})(D||(t.RenameFile=D={}));var O;(function(e){function t(e,t,n){var r={kind:`delete`,uri:e};return t!==void 0&&(t.recursive!==void 0||t.ignoreIfNotExists!==void 0)&&(r.options=t),n!==void 0&&(r.annotationId=n),r}e.create=t;function n(e){var t=e;return t&&t.kind===`delete`&&$.string(t.uri)&&(t.options===void 0||(t.options.recursive===void 0||$.boolean(t.options.recursive))&&(t.options.ignoreIfNotExists===void 0||$.boolean(t.options.ignoreIfNotExists)))&&(t.annotationId===void 0||C.is(t.annotationId))}e.is=n})(O||(t.DeleteFile=O={}));var k;(function(e){function t(e){var t=e;return t&&(t.changes!==void 0||t.documentChanges!==void 0)&&(t.documentChanges===void 0||t.documentChanges.every(function(e){return $.string(e.kind)?E.is(e)||D.is(e)||O.is(e):T.is(e)}))}e.is=t})(k||(t.WorkspaceEdit=k={}));var A=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var r,i;if(n===void 0?r=x.insert(e,t):C.is(n)?(i=n,r=w.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=w.insert(e,t,i)),this.edits.push(r),i!==void 0)return i},e.prototype.replace=function(e,t,n){var r,i;if(n===void 0?r=x.replace(e,t):C.is(n)?(i=n,r=w.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=w.replace(e,t,i)),this.edits.push(r),i!==void 0)return i},e.prototype.delete=function(e,t){var n,r;if(t===void 0?n=x.del(e):C.is(t)?(r=t,n=w.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=w.del(e,r)),this.edits.push(n),r!==void 0)return r},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw Error(`Text edit change is not configured to manage change annotations.`)},e}(),j=function(){function e(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,`size`,{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(C.is(e)?n=e:(n=this.nextId(),t=e),this._annotations[n]!==void 0)throw Error(`Id ${n} is already in use.`);if(t===void 0)throw Error(`No annotation provided for id ${n}`);return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),M=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e===void 0?this._workspaceEdit={}:(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new j(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(e){if(T.is(e)){var n=new A(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach(function(n){var r=new A(e.changes[n]);t._textEditChanges[n]=r}))}return Object.defineProperty(e.prototype,`edit`,{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(F.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);var t={uri:e.uri,version:e.version},n=this._textEditChanges[t.uri];if(!n){var r=[],i={textDocument:t,edits:r};this._workspaceEdit.documentChanges.push(i),n=new A(r,this._changeAnnotations),this._textEditChanges[t.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw Error(`Workspace edit is not configured for normal text edit changes.`);var n=this._textEditChanges[e];if(!n){var r=[];this._workspaceEdit.changes[e]=r,n=new A(r),this._textEditChanges[e]=n}return n}},e.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new j,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);var r;S.is(t)||C.is(t)?r=t:n=t;var i,a;if(r===void 0?i=E.create(e,n):(a=C.is(r)?r:this._changeAnnotations.manage(r),i=E.create(e,n,a)),this._workspaceEdit.documentChanges.push(i),a!==void 0)return a},e.prototype.renameFile=function(e,t,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);var i;S.is(n)||C.is(n)?i=n:r=n;var a,o;if(i===void 0?a=D.create(e,t,r):(o=C.is(i)?i:this._changeAnnotations.manage(i),a=D.create(e,t,r,o)),this._workspaceEdit.documentChanges.push(a),o!==void 0)return o},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);var r;S.is(t)||C.is(t)?r=t:n=t;var i,a;if(r===void 0?i=O.create(e,n):(a=C.is(r)?r:this._changeAnnotations.manage(r),i=O.create(e,n,a)),this._workspaceEdit.documentChanges.push(i),a!==void 0)return a},e}();t.WorkspaceChange=M;var N;(function(e){function t(e){return{uri:e}}e.create=t;function n(e){var t=e;return $.defined(t)&&$.string(t.uri)}e.is=n})(N||(t.TextDocumentIdentifier=N={}));var P;(function(e){function t(e,t){return{uri:e,version:t}}e.create=t;function n(e){var t=e;return $.defined(t)&&$.string(t.uri)&&$.integer(t.version)}e.is=n})(P||(t.VersionedTextDocumentIdentifier=P={}));var F;(function(e){function t(e,t){return{uri:e,version:t}}e.create=t;function n(e){var t=e;return $.defined(t)&&$.string(t.uri)&&(t.version===null||$.integer(t.version))}e.is=n})(F||(t.OptionalVersionedTextDocumentIdentifier=F={}));var I;(function(e){function t(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}}e.create=t;function n(e){var t=e;return $.defined(t)&&$.string(t.uri)&&$.string(t.languageId)&&$.integer(t.version)&&$.string(t.text)}e.is=n})(I||(t.TextDocumentItem=I={}));var L;(function(e){e.PlainText=`plaintext`,e.Markdown=`markdown`;function t(t){var n=t;return n===e.PlainText||n===e.Markdown}e.is=t})(L||(t.MarkupKind=L={}));var R;(function(e){function t(e){var t=e;return $.objectLiteral(e)&&L.is(t.kind)&&$.string(t.value)}e.is=t})(R||(t.MarkupContent=R={}));var z;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(z||(t.CompletionItemKind=z={}));var B;(function(e){e.PlainText=1,e.Snippet=2})(B||(t.InsertTextFormat=B={}));var V;(function(e){e.Deprecated=1})(V||(t.CompletionItemTag=V={}));var H;(function(e){function t(e,t,n){return{newText:e,insert:t,replace:n}}e.create=t;function n(e){var t=e;return t&&$.string(t.newText)&&s.is(t.insert)&&s.is(t.replace)}e.is=n})(H||(t.InsertReplaceEdit=H={}));var U;(function(e){e.asIs=1,e.adjustIndentation=2})(U||(t.InsertTextMode=U={}));var W;(function(e){function t(e){var t=e;return t&&($.string(t.detail)||t.detail===void 0)&&($.string(t.description)||t.description===void 0)}e.is=t})(W||(t.CompletionItemLabelDetails=W={}));var ee;(function(e){function t(e){return{label:e}}e.create=t})(ee||(t.CompletionItem=ee={}));var G;(function(e){function t(e,t){return{items:e||[],isIncomplete:!!t}}e.create=t})(G||(t.CompletionList=G={}));var te;(function(e){function t(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,`\\$&`)}e.fromPlainText=t;function n(e){var t=e;return $.string(t)||$.objectLiteral(t)&&$.string(t.language)&&$.string(t.value)}e.is=n})(te||(t.MarkedString=te={}));var K;(function(e){function t(e){var t=e;return!!t&&$.objectLiteral(t)&&(R.is(t.contents)||te.is(t.contents)||$.typedArray(t.contents,te.is))&&(e.range===void 0||s.is(e.range))}e.is=t})(K||(t.Hover=K={}));var ne;(function(e){function t(e,t){return t?{label:e,documentation:t}:{label:e}}e.create=t})(ne||(t.ParameterInformation=ne={}));var re;(function(e){function t(e,t){var n=[...arguments].slice(2),r={label:e};return $.defined(t)&&(r.documentation=t),$.defined(n)?r.parameters=n:r.parameters=[],r}e.create=t})(re||(t.SignatureInformation=re={}));var ie;(function(e){e.Text=1,e.Read=2,e.Write=3})(ie||(t.DocumentHighlightKind=ie={}));var ae;(function(e){function t(e,t){var n={range:e};return $.number(t)&&(n.kind=t),n}e.create=t})(ae||(t.DocumentHighlight=ae={}));var oe;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(oe||(t.SymbolKind=oe={}));var se;(function(e){e.Deprecated=1})(se||(t.SymbolTag=se={}));var ce;(function(e){function t(e,t,n,r,i){var a={name:e,kind:t,location:{uri:r,range:n}};return i&&(a.containerName=i),a}e.create=t})(ce||(t.SymbolInformation=ce={}));var le;(function(e){function t(e,t,n,r){return r===void 0?{name:e,kind:t,location:{uri:n}}:{name:e,kind:t,location:{uri:n,range:r}}}e.create=t})(le||(t.WorkspaceSymbol=le={}));var ue;(function(e){function t(e,t,n,r,i,a){var o={name:e,detail:t,kind:n,range:r,selectionRange:i};return a!==void 0&&(o.children=a),o}e.create=t;function n(e){var t=e;return t&&$.string(t.name)&&$.number(t.kind)&&s.is(t.range)&&s.is(t.selectionRange)&&(t.detail===void 0||$.string(t.detail))&&(t.deprecated===void 0||$.boolean(t.deprecated))&&(t.children===void 0||Array.isArray(t.children))&&(t.tags===void 0||Array.isArray(t.tags))}e.is=n})(ue||(t.DocumentSymbol=ue={}));var de;(function(e){e.Empty=``,e.QuickFix=`quickfix`,e.Refactor=`refactor`,e.RefactorExtract=`refactor.extract`,e.RefactorInline=`refactor.inline`,e.RefactorRewrite=`refactor.rewrite`,e.Source=`source`,e.SourceOrganizeImports=`source.organizeImports`,e.SourceFixAll=`source.fixAll`})(de||(t.CodeActionKind=de={}));var fe;(function(e){e.Invoked=1,e.Automatic=2})(fe||(t.CodeActionTriggerKind=fe={}));var pe;(function(e){function t(e,t,n){var r={diagnostics:e};return t!=null&&(r.only=t),n!=null&&(r.triggerKind=n),r}e.create=t;function n(e){var t=e;return $.defined(t)&&$.typedArray(t.diagnostics,y.is)&&(t.only===void 0||$.typedArray(t.only,$.string))&&(t.triggerKind===void 0||t.triggerKind===fe.Invoked||t.triggerKind===fe.Automatic)}e.is=n})(pe||(t.CodeActionContext=pe={}));var me;(function(e){function t(e,t,n){var r={title:e},i=!0;return typeof t==`string`?(i=!1,r.kind=t):b.is(t)?r.command=t:r.edit=t,i&&n!==void 0&&(r.kind=n),r}e.create=t;function n(e){var t=e;return t&&$.string(t.title)&&(t.diagnostics===void 0||$.typedArray(t.diagnostics,y.is))&&(t.kind===void 0||$.string(t.kind))&&(t.edit!==void 0||t.command!==void 0)&&(t.command===void 0||b.is(t.command))&&(t.isPreferred===void 0||$.boolean(t.isPreferred))&&(t.edit===void 0||k.is(t.edit))}e.is=n})(me||(t.CodeAction=me={}));var he;(function(e){function t(e,t){var n={range:e};return $.defined(t)&&(n.data=t),n}e.create=t;function n(e){var t=e;return $.defined(t)&&s.is(t.range)&&($.undefined(t.command)||b.is(t.command))}e.is=n})(he||(t.CodeLens=he={}));var ge;(function(e){function t(e,t){return{tabSize:e,insertSpaces:t}}e.create=t;function n(e){var t=e;return $.defined(t)&&$.uinteger(t.tabSize)&&$.boolean(t.insertSpaces)}e.is=n})(ge||(t.FormattingOptions=ge={}));var _e;(function(e){function t(e,t,n){return{range:e,target:t,data:n}}e.create=t;function n(e){var t=e;return $.defined(t)&&s.is(t.range)&&($.undefined(t.target)||$.string(t.target))}e.is=n})(_e||(t.DocumentLink=_e={}));var ve;(function(e){function t(e,t){return{range:e,parent:t}}e.create=t;function n(t){var n=t;return $.objectLiteral(n)&&s.is(n.range)&&(n.parent===void 0||e.is(n.parent))}e.is=n})(ve||(t.SelectionRange=ve={}));var ye;(function(e){e.namespace=`namespace`,e.type=`type`,e.class=`class`,e.enum=`enum`,e.interface=`interface`,e.struct=`struct`,e.typeParameter=`typeParameter`,e.parameter=`parameter`,e.variable=`variable`,e.property=`property`,e.enumMember=`enumMember`,e.event=`event`,e.function=`function`,e.method=`method`,e.macro=`macro`,e.keyword=`keyword`,e.modifier=`modifier`,e.comment=`comment`,e.string=`string`,e.number=`number`,e.regexp=`regexp`,e.operator=`operator`,e.decorator=`decorator`})(ye||(t.SemanticTokenTypes=ye={}));var be;(function(e){e.declaration=`declaration`,e.definition=`definition`,e.readonly=`readonly`,e.static=`static`,e.deprecated=`deprecated`,e.abstract=`abstract`,e.async=`async`,e.modification=`modification`,e.documentation=`documentation`,e.defaultLibrary=`defaultLibrary`})(be||(t.SemanticTokenModifiers=be={}));var q;(function(e){function t(e){var t=e;return $.objectLiteral(t)&&(t.resultId===void 0||typeof t.resultId==`string`)&&Array.isArray(t.data)&&(t.data.length===0||typeof t.data[0]==`number`)}e.is=t})(q||(t.SemanticTokens=q={}));var xe;(function(e){function t(e,t){return{range:e,text:t}}e.create=t;function n(e){var t=e;return t!=null&&s.is(t.range)&&$.string(t.text)}e.is=n})(xe||(t.InlineValueText=xe={}));var Se;(function(e){function t(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}}e.create=t;function n(e){var t=e;return t!=null&&s.is(t.range)&&$.boolean(t.caseSensitiveLookup)&&($.string(t.variableName)||t.variableName===void 0)}e.is=n})(Se||(t.InlineValueVariableLookup=Se={}));var Ce;(function(e){function t(e,t){return{range:e,expression:t}}e.create=t;function n(e){var t=e;return t!=null&&s.is(t.range)&&($.string(t.expression)||t.expression===void 0)}e.is=n})(Ce||(t.InlineValueEvaluatableExpression=Ce={}));var J;(function(e){function t(e,t){return{frameId:e,stoppedLocation:t}}e.create=t;function n(e){var t=e;return $.defined(t)&&s.is(e.stoppedLocation)}e.is=n})(J||(t.InlineValueContext=J={}));var Y;(function(e){e.Type=1,e.Parameter=2;function t(e){return e===1||e===2}e.is=t})(Y||(t.InlayHintKind=Y={}));var we;(function(e){function t(e){return{value:e}}e.create=t;function n(e){var t=e;return $.objectLiteral(t)&&(t.tooltip===void 0||$.string(t.tooltip)||R.is(t.tooltip))&&(t.location===void 0||c.is(t.location))&&(t.command===void 0||b.is(t.command))}e.is=n})(we||(t.InlayHintLabelPart=we={}));var X;(function(e){function t(e,t,n){var r={position:e,label:t};return n!==void 0&&(r.kind=n),r}e.create=t;function n(e){var t=e;return $.objectLiteral(t)&&o.is(t.position)&&($.string(t.label)||$.typedArray(t.label,we.is))&&(t.kind===void 0||Y.is(t.kind))&&t.textEdits===void 0||$.typedArray(t.textEdits,x.is)&&(t.tooltip===void 0||$.string(t.tooltip)||R.is(t.tooltip))&&(t.paddingLeft===void 0||$.boolean(t.paddingLeft))&&(t.paddingRight===void 0||$.boolean(t.paddingRight))}e.is=n})(X||(t.InlayHint=X={}));var Z;(function(e){function t(e){return{kind:`snippet`,value:e}}e.createSnippet=t})(Z||(t.StringValue=Z={}));var Te;(function(e){function t(e,t,n,r){return{insertText:e,filterText:t,range:n,command:r}}e.create=t})(Te||(t.InlineCompletionItem=Te={}));var Ee;(function(e){function t(e){return{items:e}}e.create=t})(Ee||(t.InlineCompletionList=Ee={}));var Q;(function(e){e.Invoked=0,e.Automatic=1})(Q||(t.InlineCompletionTriggerKind=Q={}));var De;(function(e){function t(e,t){return{range:e,text:t}}e.create=t})(De||(t.SelectedCompletionInfo=De={}));var Oe;(function(e){function t(e,t){return{triggerKind:e,selectedCompletionInfo:t}}e.create=t})(Oe||(t.InlineCompletionContext=Oe={}));var ke;(function(e){function t(e){var t=e;return $.objectLiteral(t)&&r.is(t.uri)&&$.string(t.name)}e.is=t})(ke||(t.WorkspaceFolder=ke={})),t.EOL=[`
`,`\r
`,`\r`];var Ae;(function(e){function t(e,t,n,r){return new je(e,t,n,r)}e.create=t;function n(e){var t=e;return!!($.defined(t)&&$.string(t.uri)&&($.undefined(t.languageId)||$.string(t.languageId))&&$.uinteger(t.lineCount)&&$.func(t.getText)&&$.func(t.positionAt)&&$.func(t.offsetAt))}e.is=n;function r(e,t){for(var n=e.getText(),r=i(t,function(e,t){var n=e.range.start.line-t.range.start.line;return n===0?e.range.start.character-t.range.start.character:n}),a=n.length,o=r.length-1;o>=0;o--){var s=r[o],c=e.offsetAt(s.range.start),l=e.offsetAt(s.range.end);if(l<=a)n=n.substring(0,c)+s.newText+n.substring(l,n.length);else throw Error(`Overlapping edit`);a=c}return n}e.applyEdits=r;function i(e,t){if(e.length<=1)return e;var n=e.length/2|0,r=e.slice(0,n),a=e.slice(n);i(r,t),i(a,t);for(var o=0,s=0,c=0;o<r.length&&s<a.length;){var l=t(r[o],a[s]);l<=0?e[c++]=r[o++]:e[c++]=a[s++]}for(;o<r.length;)e[c++]=r[o++];for(;s<a.length;)e[c++]=a[s++];return e}})(Ae||(t.TextDocument=Ae={}));var je=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,`uri`,{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`languageId`,{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,`version`,{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n=i===`\r`||i===`
`,i===`\r`&&r+1<t.length&&t.charAt(r+1)===`
`&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(r===0)return o.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var a=n-1;return o.create(a,e-t[a])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,`lineCount`,{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}(),$;(function(e){var t=Object.prototype.toString;function n(e){return e!==void 0}e.defined=n;function r(e){return e===void 0}e.undefined=r;function i(e){return e===!0||e===!1}e.boolean=i;function a(e){return t.call(e)===`[object String]`}e.string=a;function o(e){return t.call(e)===`[object Number]`}e.number=o;function s(e,n,r){return t.call(e)===`[object Number]`&&n<=e&&e<=r}e.numberRange=s;function c(e){return t.call(e)===`[object Number]`&&-2147483648<=e&&e<=2147483647}e.integer=c;function l(e){return t.call(e)===`[object Number]`&&0<=e&&e<=2147483647}e.uinteger=l;function u(e){return t.call(e)===`[object Function]`}e.func=u;function d(e){return typeof e==`object`&&!!e}e.objectLiteral=d;function f(e,t){return Array.isArray(e)&&e.every(t)}e.typedArray=f})($||($={}))})})),G=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ProtocolNotificationType=exports.ProtocolNotificationType0=exports.ProtocolRequestType=exports.ProtocolRequestType0=exports.RegistrationType=exports.MessageDirection=void 0;let t=U();var n;(function(e){e.clientToServer=`clientToServer`,e.serverToClient=`serverToClient`,e.both=`both`})(n||(exports.MessageDirection=n={}));var r=class{constructor(e){this.method=e}};exports.RegistrationType=r;var i=class extends t.RequestType0{constructor(e){super(e)}};exports.ProtocolRequestType0=i;var a=class extends t.RequestType{constructor(e){super(e,t.ParameterStructures.byName)}};exports.ProtocolRequestType=a;var o=class extends t.NotificationType0{constructor(e){super(e)}};exports.ProtocolNotificationType0=o;var s=class extends t.NotificationType{constructor(e){super(e,t.ParameterStructures.byName)}};exports.ProtocolNotificationType=s})),te=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.objectLiteral=exports.typedArray=exports.stringArray=exports.array=exports.func=exports.error=exports.number=exports.string=exports.boolean=void 0;function t(e){return e===!0||e===!1}exports.boolean=t;function n(e){return typeof e==`string`||e instanceof String}exports.string=n;function r(e){return typeof e==`number`||e instanceof Number}exports.number=r;function i(e){return e instanceof Error}exports.error=i;function a(e){return typeof e==`function`}exports.func=a;function o(e){return Array.isArray(e)}exports.array=o;function s(e){return o(e)&&e.every(e=>n(e))}exports.stringArray=s;function c(e,t){return Array.isArray(e)&&e.every(t)}exports.typedArray=c;function l(e){return typeof e==`object`&&!!e}exports.objectLiteral=l})),K=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ImplementationRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/implementation`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.ImplementationRequest=n={}))})),ne=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.TypeDefinitionRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/typeDefinition`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.TypeDefinitionRequest=n={}))})),re=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.DidChangeWorkspaceFoldersNotification=exports.WorkspaceFoldersRequest=void 0;let t=G();var n;(function(e){e.method=`workspace/workspaceFolders`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(n||(exports.WorkspaceFoldersRequest=n={}));var r;(function(e){e.method=`workspace/didChangeWorkspaceFolders`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(r||(exports.DidChangeWorkspaceFoldersNotification=r={}))})),ie=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ConfigurationRequest=void 0;let t=G();var n;(function(e){e.method=`workspace/configuration`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.ConfigurationRequest=n={}))})),ae=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ColorPresentationRequest=exports.DocumentColorRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/documentColor`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.DocumentColorRequest=n={}));var r;(function(e){e.method=`textDocument/colorPresentation`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(exports.ColorPresentationRequest=r={}))})),oe=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.FoldingRangeRefreshRequest=exports.FoldingRangeRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/foldingRange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.FoldingRangeRequest=n={}));var r;(function(e){e.method=`workspace/foldingRange/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(r||(exports.FoldingRangeRefreshRequest=r={}))})),se=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.DeclarationRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/declaration`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.DeclarationRequest=n={}))})),ce=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.SelectionRangeRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/selectionRange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.SelectionRangeRequest=n={}))})),le=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.WorkDoneProgressCancelNotification=exports.WorkDoneProgressCreateRequest=exports.WorkDoneProgress=void 0;let t=U(),n=G();var r;(function(e){e.type=new t.ProgressType;function n(t){return t===e.type}e.is=n})(r||(exports.WorkDoneProgress=r={}));var i;(function(e){e.method=`window/workDoneProgress/create`,e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType(e.method)})(i||(exports.WorkDoneProgressCreateRequest=i={}));var a;(function(e){e.method=`window/workDoneProgress/cancel`,e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)})(a||(exports.WorkDoneProgressCancelNotification=a={}))})),ue=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.CallHierarchyOutgoingCallsRequest=exports.CallHierarchyIncomingCallsRequest=exports.CallHierarchyPrepareRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/prepareCallHierarchy`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.CallHierarchyPrepareRequest=n={}));var r;(function(e){e.method=`callHierarchy/incomingCalls`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(exports.CallHierarchyIncomingCallsRequest=r={}));var i;(function(e){e.method=`callHierarchy/outgoingCalls`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(i||(exports.CallHierarchyOutgoingCallsRequest=i={}))})),de=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.SemanticTokensRefreshRequest=exports.SemanticTokensRangeRequest=exports.SemanticTokensDeltaRequest=exports.SemanticTokensRequest=exports.SemanticTokensRegistrationType=exports.TokenFormat=void 0;let t=G();var n;(function(e){e.Relative=`relative`})(n||(exports.TokenFormat=n={}));var r;(function(e){e.method=`textDocument/semanticTokens`,e.type=new t.RegistrationType(e.method)})(r||(exports.SemanticTokensRegistrationType=r={}));var i;(function(e){e.method=`textDocument/semanticTokens/full`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method),e.registrationMethod=r.method})(i||(exports.SemanticTokensRequest=i={}));var a;(function(e){e.method=`textDocument/semanticTokens/full/delta`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method),e.registrationMethod=r.method})(a||(exports.SemanticTokensDeltaRequest=a={}));var o;(function(e){e.method=`textDocument/semanticTokens/range`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method),e.registrationMethod=r.method})(o||(exports.SemanticTokensRangeRequest=o={}));var s;(function(e){e.method=`workspace/semanticTokens/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(s||(exports.SemanticTokensRefreshRequest=s={}))})),fe=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ShowDocumentRequest=void 0;let t=G();var n;(function(e){e.method=`window/showDocument`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.ShowDocumentRequest=n={}))})),pe=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.LinkedEditingRangeRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/linkedEditingRange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.LinkedEditingRangeRequest=n={}))})),me=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.WillDeleteFilesRequest=exports.DidDeleteFilesNotification=exports.DidRenameFilesNotification=exports.WillRenameFilesRequest=exports.DidCreateFilesNotification=exports.WillCreateFilesRequest=exports.FileOperationPatternKind=void 0;let t=G();var n;(function(e){e.file=`file`,e.folder=`folder`})(n||(exports.FileOperationPatternKind=n={}));var r;(function(e){e.method=`workspace/willCreateFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(exports.WillCreateFilesRequest=r={}));var i;(function(e){e.method=`workspace/didCreateFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(i||(exports.DidCreateFilesNotification=i={}));var a;(function(e){e.method=`workspace/willRenameFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(a||(exports.WillRenameFilesRequest=a={}));var o;(function(e){e.method=`workspace/didRenameFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(o||(exports.DidRenameFilesNotification=o={}));var s;(function(e){e.method=`workspace/didDeleteFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(s||(exports.DidDeleteFilesNotification=s={}));var c;(function(e){e.method=`workspace/willDeleteFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(c||(exports.WillDeleteFilesRequest=c={}))})),he=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.MonikerRequest=exports.MonikerKind=exports.UniquenessLevel=void 0;let t=G();var n;(function(e){e.document=`document`,e.project=`project`,e.group=`group`,e.scheme=`scheme`,e.global=`global`})(n||(exports.UniquenessLevel=n={}));var r;(function(e){e.$import=`import`,e.$export=`export`,e.local=`local`})(r||(exports.MonikerKind=r={}));var i;(function(e){e.method=`textDocument/moniker`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(i||(exports.MonikerRequest=i={}))})),ge=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.TypeHierarchySubtypesRequest=exports.TypeHierarchySupertypesRequest=exports.TypeHierarchyPrepareRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/prepareTypeHierarchy`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.TypeHierarchyPrepareRequest=n={}));var r;(function(e){e.method=`typeHierarchy/supertypes`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(exports.TypeHierarchySupertypesRequest=r={}));var i;(function(e){e.method=`typeHierarchy/subtypes`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(i||(exports.TypeHierarchySubtypesRequest=i={}))})),_e=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlineValueRefreshRequest=exports.InlineValueRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/inlineValue`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.InlineValueRequest=n={}));var r;(function(e){e.method=`workspace/inlineValue/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(r||(exports.InlineValueRefreshRequest=r={}))})),ve=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlayHintRefreshRequest=exports.InlayHintResolveRequest=exports.InlayHintRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/inlayHint`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.InlayHintRequest=n={}));var r;(function(e){e.method=`inlayHint/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(exports.InlayHintResolveRequest=r={}));var i;(function(e){e.method=`workspace/inlayHint/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(i||(exports.InlayHintRefreshRequest=i={}))})),ye=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.DiagnosticRefreshRequest=exports.WorkspaceDiagnosticRequest=exports.DocumentDiagnosticRequest=exports.DocumentDiagnosticReportKind=exports.DiagnosticServerCancellationData=void 0;let t=U(),n=te(),r=G();var i;(function(e){function t(e){let t=e;return t&&n.boolean(t.retriggerRequest)}e.is=t})(i||(exports.DiagnosticServerCancellationData=i={}));var a;(function(e){e.Full=`full`,e.Unchanged=`unchanged`})(a||(exports.DocumentDiagnosticReportKind=a={}));var o;(function(e){e.method=`textDocument/diagnostic`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method),e.partialResult=new t.ProgressType})(o||(exports.DocumentDiagnosticRequest=o={}));var s;(function(e){e.method=`workspace/diagnostic`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method),e.partialResult=new t.ProgressType})(s||(exports.WorkspaceDiagnosticRequest=s={}));var c;(function(e){e.method=`workspace/diagnostic/refresh`,e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType0(e.method)})(c||(exports.DiagnosticRefreshRequest=c={}))})),be=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.DidCloseNotebookDocumentNotification=exports.DidSaveNotebookDocumentNotification=exports.DidChangeNotebookDocumentNotification=exports.NotebookCellArrayChange=exports.DidOpenNotebookDocumentNotification=exports.NotebookDocumentSyncRegistrationType=exports.NotebookDocument=exports.NotebookCell=exports.ExecutionSummary=exports.NotebookCellKind=void 0;let t=ee(),n=te(),r=G();var i;(function(e){e.Markup=1,e.Code=2;function t(e){return e===1||e===2}e.is=t})(i||(exports.NotebookCellKind=i={}));var a;(function(e){function r(e,t){let n={executionOrder:e};return(t===!0||t===!1)&&(n.success=t),n}e.create=r;function i(e){let r=e;return n.objectLiteral(r)&&t.uinteger.is(r.executionOrder)&&(r.success===void 0||n.boolean(r.success))}e.is=i;function a(e,t){return e===t?!0:e==null||t==null?!1:e.executionOrder===t.executionOrder&&e.success===t.success}e.equals=a})(a||(exports.ExecutionSummary=a={}));var o;(function(e){function r(e,t){return{kind:e,document:t}}e.create=r;function o(e){let r=e;return n.objectLiteral(r)&&i.is(r.kind)&&t.DocumentUri.is(r.document)&&(r.metadata===void 0||n.objectLiteral(r.metadata))}e.is=o;function s(e,t){let n=new Set;return e.document!==t.document&&n.add(`document`),e.kind!==t.kind&&n.add(`kind`),e.executionSummary!==t.executionSummary&&n.add(`executionSummary`),(e.metadata!==void 0||t.metadata!==void 0)&&!c(e.metadata,t.metadata)&&n.add(`metadata`),(e.executionSummary!==void 0||t.executionSummary!==void 0)&&!a.equals(e.executionSummary,t.executionSummary)&&n.add(`executionSummary`),n}e.diff=s;function c(e,t){if(e===t)return!0;if(e==null||t==null||typeof e!=typeof t||typeof e!=`object`)return!1;let r=Array.isArray(e),i=Array.isArray(t);if(r!==i)return!1;if(r&&i){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!c(e[n],t[n]))return!1}if(n.objectLiteral(e)&&n.objectLiteral(t)){let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!c(n,r)))return!1;for(let r=0;r<n.length;r++){let i=n[r];if(!c(e[i],t[i]))return!1}}return!0}})(o||(exports.NotebookCell=o={}));var s;(function(e){function r(e,t,n,r){return{uri:e,notebookType:t,version:n,cells:r}}e.create=r;function i(e){let r=e;return n.objectLiteral(r)&&n.string(r.uri)&&t.integer.is(r.version)&&n.typedArray(r.cells,o.is)}e.is=i})(s||(exports.NotebookDocument=s={}));var c;(function(e){e.method=`notebookDocument/sync`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.RegistrationType(e.method)})(c||(exports.NotebookDocumentSyncRegistrationType=c={}));var l;(function(e){e.method=`notebookDocument/didOpen`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=c.method})(l||(exports.DidOpenNotebookDocumentNotification=l={}));var u;(function(e){function r(e){let r=e;return n.objectLiteral(r)&&t.uinteger.is(r.start)&&t.uinteger.is(r.deleteCount)&&(r.cells===void 0||n.typedArray(r.cells,o.is))}e.is=r;function i(e,t,n){let r={start:e,deleteCount:t};return n!==void 0&&(r.cells=n),r}e.create=i})(u||(exports.NotebookCellArrayChange=u={}));var d;(function(e){e.method=`notebookDocument/didChange`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=c.method})(d||(exports.DidChangeNotebookDocumentNotification=d={}));var f;(function(e){e.method=`notebookDocument/didSave`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=c.method})(f||(exports.DidSaveNotebookDocumentNotification=f={}));var p;(function(e){e.method=`notebookDocument/didClose`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=c.method})(p||(exports.DidCloseNotebookDocumentNotification=p={}))})),q=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlineCompletionRequest=void 0;let t=G();var n;(function(e){e.method=`textDocument/inlineCompletion`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.InlineCompletionRequest=n={}))})),xe=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.WorkspaceSymbolRequest=exports.CodeActionResolveRequest=exports.CodeActionRequest=exports.DocumentSymbolRequest=exports.DocumentHighlightRequest=exports.ReferencesRequest=exports.DefinitionRequest=exports.SignatureHelpRequest=exports.SignatureHelpTriggerKind=exports.HoverRequest=exports.CompletionResolveRequest=exports.CompletionRequest=exports.CompletionTriggerKind=exports.PublishDiagnosticsNotification=exports.WatchKind=exports.RelativePattern=exports.FileChangeType=exports.DidChangeWatchedFilesNotification=exports.WillSaveTextDocumentWaitUntilRequest=exports.WillSaveTextDocumentNotification=exports.TextDocumentSaveReason=exports.DidSaveTextDocumentNotification=exports.DidCloseTextDocumentNotification=exports.DidChangeTextDocumentNotification=exports.TextDocumentContentChangeEvent=exports.DidOpenTextDocumentNotification=exports.TextDocumentSyncKind=exports.TelemetryEventNotification=exports.LogMessageNotification=exports.ShowMessageRequest=exports.ShowMessageNotification=exports.MessageType=exports.DidChangeConfigurationNotification=exports.ExitNotification=exports.ShutdownRequest=exports.InitializedNotification=exports.InitializeErrorCodes=exports.InitializeRequest=exports.WorkDoneProgressOptions=exports.TextDocumentRegistrationOptions=exports.StaticRegistrationOptions=exports.PositionEncodingKind=exports.FailureHandlingKind=exports.ResourceOperationKind=exports.UnregistrationRequest=exports.RegistrationRequest=exports.DocumentSelector=exports.NotebookCellTextDocumentFilter=exports.NotebookDocumentFilter=exports.TextDocumentFilter=void 0,exports.MonikerRequest=exports.MonikerKind=exports.UniquenessLevel=exports.WillDeleteFilesRequest=exports.DidDeleteFilesNotification=exports.WillRenameFilesRequest=exports.DidRenameFilesNotification=exports.WillCreateFilesRequest=exports.DidCreateFilesNotification=exports.FileOperationPatternKind=exports.LinkedEditingRangeRequest=exports.ShowDocumentRequest=exports.SemanticTokensRegistrationType=exports.SemanticTokensRefreshRequest=exports.SemanticTokensRangeRequest=exports.SemanticTokensDeltaRequest=exports.SemanticTokensRequest=exports.TokenFormat=exports.CallHierarchyPrepareRequest=exports.CallHierarchyOutgoingCallsRequest=exports.CallHierarchyIncomingCallsRequest=exports.WorkDoneProgressCancelNotification=exports.WorkDoneProgressCreateRequest=exports.WorkDoneProgress=exports.SelectionRangeRequest=exports.DeclarationRequest=exports.FoldingRangeRefreshRequest=exports.FoldingRangeRequest=exports.ColorPresentationRequest=exports.DocumentColorRequest=exports.ConfigurationRequest=exports.DidChangeWorkspaceFoldersNotification=exports.WorkspaceFoldersRequest=exports.TypeDefinitionRequest=exports.ImplementationRequest=exports.ApplyWorkspaceEditRequest=exports.ExecuteCommandRequest=exports.PrepareRenameRequest=exports.RenameRequest=exports.PrepareSupportDefaultBehavior=exports.DocumentOnTypeFormattingRequest=exports.DocumentRangesFormattingRequest=exports.DocumentRangeFormattingRequest=exports.DocumentFormattingRequest=exports.DocumentLinkResolveRequest=exports.DocumentLinkRequest=exports.CodeLensRefreshRequest=exports.CodeLensResolveRequest=exports.CodeLensRequest=exports.WorkspaceSymbolResolveRequest=void 0,exports.InlineCompletionRequest=exports.DidCloseNotebookDocumentNotification=exports.DidSaveNotebookDocumentNotification=exports.DidChangeNotebookDocumentNotification=exports.NotebookCellArrayChange=exports.DidOpenNotebookDocumentNotification=exports.NotebookDocumentSyncRegistrationType=exports.NotebookDocument=exports.NotebookCell=exports.ExecutionSummary=exports.NotebookCellKind=exports.DiagnosticRefreshRequest=exports.WorkspaceDiagnosticRequest=exports.DocumentDiagnosticRequest=exports.DocumentDiagnosticReportKind=exports.DiagnosticServerCancellationData=exports.InlayHintRefreshRequest=exports.InlayHintResolveRequest=exports.InlayHintRequest=exports.InlineValueRefreshRequest=exports.InlineValueRequest=exports.TypeHierarchySupertypesRequest=exports.TypeHierarchySubtypesRequest=exports.TypeHierarchyPrepareRequest=void 0;let t=G(),n=ee(),r=te(),i=K();Object.defineProperty(exports,`ImplementationRequest`,{enumerable:!0,get:function(){return i.ImplementationRequest}});let a=ne();Object.defineProperty(exports,`TypeDefinitionRequest`,{enumerable:!0,get:function(){return a.TypeDefinitionRequest}});let o=re();Object.defineProperty(exports,`WorkspaceFoldersRequest`,{enumerable:!0,get:function(){return o.WorkspaceFoldersRequest}}),Object.defineProperty(exports,`DidChangeWorkspaceFoldersNotification`,{enumerable:!0,get:function(){return o.DidChangeWorkspaceFoldersNotification}});let s=ie();Object.defineProperty(exports,`ConfigurationRequest`,{enumerable:!0,get:function(){return s.ConfigurationRequest}});let c=ae();Object.defineProperty(exports,`DocumentColorRequest`,{enumerable:!0,get:function(){return c.DocumentColorRequest}}),Object.defineProperty(exports,`ColorPresentationRequest`,{enumerable:!0,get:function(){return c.ColorPresentationRequest}});let l=oe();Object.defineProperty(exports,`FoldingRangeRequest`,{enumerable:!0,get:function(){return l.FoldingRangeRequest}}),Object.defineProperty(exports,`FoldingRangeRefreshRequest`,{enumerable:!0,get:function(){return l.FoldingRangeRefreshRequest}});let u=se();Object.defineProperty(exports,`DeclarationRequest`,{enumerable:!0,get:function(){return u.DeclarationRequest}});let d=ce();Object.defineProperty(exports,`SelectionRangeRequest`,{enumerable:!0,get:function(){return d.SelectionRangeRequest}});let f=le();Object.defineProperty(exports,`WorkDoneProgress`,{enumerable:!0,get:function(){return f.WorkDoneProgress}}),Object.defineProperty(exports,`WorkDoneProgressCreateRequest`,{enumerable:!0,get:function(){return f.WorkDoneProgressCreateRequest}}),Object.defineProperty(exports,`WorkDoneProgressCancelNotification`,{enumerable:!0,get:function(){return f.WorkDoneProgressCancelNotification}});let p=ue();Object.defineProperty(exports,`CallHierarchyIncomingCallsRequest`,{enumerable:!0,get:function(){return p.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(exports,`CallHierarchyOutgoingCallsRequest`,{enumerable:!0,get:function(){return p.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(exports,`CallHierarchyPrepareRequest`,{enumerable:!0,get:function(){return p.CallHierarchyPrepareRequest}});let m=de();Object.defineProperty(exports,`TokenFormat`,{enumerable:!0,get:function(){return m.TokenFormat}}),Object.defineProperty(exports,`SemanticTokensRequest`,{enumerable:!0,get:function(){return m.SemanticTokensRequest}}),Object.defineProperty(exports,`SemanticTokensDeltaRequest`,{enumerable:!0,get:function(){return m.SemanticTokensDeltaRequest}}),Object.defineProperty(exports,`SemanticTokensRangeRequest`,{enumerable:!0,get:function(){return m.SemanticTokensRangeRequest}}),Object.defineProperty(exports,`SemanticTokensRefreshRequest`,{enumerable:!0,get:function(){return m.SemanticTokensRefreshRequest}}),Object.defineProperty(exports,`SemanticTokensRegistrationType`,{enumerable:!0,get:function(){return m.SemanticTokensRegistrationType}});let h=fe();Object.defineProperty(exports,`ShowDocumentRequest`,{enumerable:!0,get:function(){return h.ShowDocumentRequest}});let g=pe();Object.defineProperty(exports,`LinkedEditingRangeRequest`,{enumerable:!0,get:function(){return g.LinkedEditingRangeRequest}});let _=me();Object.defineProperty(exports,`FileOperationPatternKind`,{enumerable:!0,get:function(){return _.FileOperationPatternKind}}),Object.defineProperty(exports,`DidCreateFilesNotification`,{enumerable:!0,get:function(){return _.DidCreateFilesNotification}}),Object.defineProperty(exports,`WillCreateFilesRequest`,{enumerable:!0,get:function(){return _.WillCreateFilesRequest}}),Object.defineProperty(exports,`DidRenameFilesNotification`,{enumerable:!0,get:function(){return _.DidRenameFilesNotification}}),Object.defineProperty(exports,`WillRenameFilesRequest`,{enumerable:!0,get:function(){return _.WillRenameFilesRequest}}),Object.defineProperty(exports,`DidDeleteFilesNotification`,{enumerable:!0,get:function(){return _.DidDeleteFilesNotification}}),Object.defineProperty(exports,`WillDeleteFilesRequest`,{enumerable:!0,get:function(){return _.WillDeleteFilesRequest}});let v=he();Object.defineProperty(exports,`UniquenessLevel`,{enumerable:!0,get:function(){return v.UniquenessLevel}}),Object.defineProperty(exports,`MonikerKind`,{enumerable:!0,get:function(){return v.MonikerKind}}),Object.defineProperty(exports,`MonikerRequest`,{enumerable:!0,get:function(){return v.MonikerRequest}});let y=ge();Object.defineProperty(exports,`TypeHierarchyPrepareRequest`,{enumerable:!0,get:function(){return y.TypeHierarchyPrepareRequest}}),Object.defineProperty(exports,`TypeHierarchySubtypesRequest`,{enumerable:!0,get:function(){return y.TypeHierarchySubtypesRequest}}),Object.defineProperty(exports,`TypeHierarchySupertypesRequest`,{enumerable:!0,get:function(){return y.TypeHierarchySupertypesRequest}});let b=_e();Object.defineProperty(exports,`InlineValueRequest`,{enumerable:!0,get:function(){return b.InlineValueRequest}}),Object.defineProperty(exports,`InlineValueRefreshRequest`,{enumerable:!0,get:function(){return b.InlineValueRefreshRequest}});let x=ve();Object.defineProperty(exports,`InlayHintRequest`,{enumerable:!0,get:function(){return x.InlayHintRequest}}),Object.defineProperty(exports,`InlayHintResolveRequest`,{enumerable:!0,get:function(){return x.InlayHintResolveRequest}}),Object.defineProperty(exports,`InlayHintRefreshRequest`,{enumerable:!0,get:function(){return x.InlayHintRefreshRequest}});let S=ye();Object.defineProperty(exports,`DiagnosticServerCancellationData`,{enumerable:!0,get:function(){return S.DiagnosticServerCancellationData}}),Object.defineProperty(exports,`DocumentDiagnosticReportKind`,{enumerable:!0,get:function(){return S.DocumentDiagnosticReportKind}}),Object.defineProperty(exports,`DocumentDiagnosticRequest`,{enumerable:!0,get:function(){return S.DocumentDiagnosticRequest}}),Object.defineProperty(exports,`WorkspaceDiagnosticRequest`,{enumerable:!0,get:function(){return S.WorkspaceDiagnosticRequest}}),Object.defineProperty(exports,`DiagnosticRefreshRequest`,{enumerable:!0,get:function(){return S.DiagnosticRefreshRequest}});let C=be();Object.defineProperty(exports,`NotebookCellKind`,{enumerable:!0,get:function(){return C.NotebookCellKind}}),Object.defineProperty(exports,`ExecutionSummary`,{enumerable:!0,get:function(){return C.ExecutionSummary}}),Object.defineProperty(exports,`NotebookCell`,{enumerable:!0,get:function(){return C.NotebookCell}}),Object.defineProperty(exports,`NotebookDocument`,{enumerable:!0,get:function(){return C.NotebookDocument}}),Object.defineProperty(exports,`NotebookDocumentSyncRegistrationType`,{enumerable:!0,get:function(){return C.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(exports,`DidOpenNotebookDocumentNotification`,{enumerable:!0,get:function(){return C.DidOpenNotebookDocumentNotification}}),Object.defineProperty(exports,`NotebookCellArrayChange`,{enumerable:!0,get:function(){return C.NotebookCellArrayChange}}),Object.defineProperty(exports,`DidChangeNotebookDocumentNotification`,{enumerable:!0,get:function(){return C.DidChangeNotebookDocumentNotification}}),Object.defineProperty(exports,`DidSaveNotebookDocumentNotification`,{enumerable:!0,get:function(){return C.DidSaveNotebookDocumentNotification}}),Object.defineProperty(exports,`DidCloseNotebookDocumentNotification`,{enumerable:!0,get:function(){return C.DidCloseNotebookDocumentNotification}});let w=q();Object.defineProperty(exports,`InlineCompletionRequest`,{enumerable:!0,get:function(){return w.InlineCompletionRequest}});var T;(function(e){function t(e){let t=e;return r.string(t)||r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}e.is=t})(T||(exports.TextDocumentFilter=T={}));var E;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(r.string(t.notebookType)||r.string(t.scheme)||r.string(t.pattern))}e.is=t})(E||(exports.NotebookDocumentFilter=E={}));var D;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(r.string(t.notebook)||E.is(t.notebook))&&(t.language===void 0||r.string(t.language))}e.is=t})(D||(exports.NotebookCellTextDocumentFilter=D={}));var O;(function(e){function t(e){if(!Array.isArray(e))return!1;for(let t of e)if(!r.string(t)&&!T.is(t)&&!D.is(t))return!1;return!0}e.is=t})(O||(exports.DocumentSelector=O={}));var k;(function(e){e.method=`client/registerCapability`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(k||(exports.RegistrationRequest=k={}));var A;(function(e){e.method=`client/unregisterCapability`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(A||(exports.UnregistrationRequest=A={}));var j;(function(e){e.Create=`create`,e.Rename=`rename`,e.Delete=`delete`})(j||(exports.ResourceOperationKind=j={}));var M;(function(e){e.Abort=`abort`,e.Transactional=`transactional`,e.TextOnlyTransactional=`textOnlyTransactional`,e.Undo=`undo`})(M||(exports.FailureHandlingKind=M={}));var N;(function(e){e.UTF8=`utf-8`,e.UTF16=`utf-16`,e.UTF32=`utf-32`})(N||(exports.PositionEncodingKind=N={}));var P;(function(e){function t(e){let t=e;return t&&r.string(t.id)&&t.id.length>0}e.hasId=t})(P||(exports.StaticRegistrationOptions=P={}));var F;(function(e){function t(e){let t=e;return t&&(t.documentSelector===null||O.is(t.documentSelector))}e.is=t})(F||(exports.TextDocumentRegistrationOptions=F={}));var I;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(t.workDoneProgress===void 0||r.boolean(t.workDoneProgress))}e.is=t;function n(e){let t=e;return t&&r.boolean(t.workDoneProgress)}e.hasWorkDoneProgress=n})(I||(exports.WorkDoneProgressOptions=I={}));var L;(function(e){e.method=`initialize`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(L||(exports.InitializeRequest=L={}));var R;(function(e){e.unknownProtocolVersion=1})(R||(exports.InitializeErrorCodes=R={}));var z;(function(e){e.method=`initialized`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(z||(exports.InitializedNotification=z={}));var B;(function(e){e.method=`shutdown`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType0(e.method)})(B||(exports.ShutdownRequest=B={}));var V;(function(e){e.method=`exit`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType0(e.method)})(V||(exports.ExitNotification=V={}));var H;(function(e){e.method=`workspace/didChangeConfiguration`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(H||(exports.DidChangeConfigurationNotification=H={}));var U;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(U||(exports.MessageType=U={}));var W;(function(e){e.method=`window/showMessage`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})(W||(exports.ShowMessageNotification=W={}));var xe;(function(e){e.method=`window/showMessageRequest`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(xe||(exports.ShowMessageRequest=xe={}));var Se;(function(e){e.method=`window/logMessage`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})(Se||(exports.LogMessageNotification=Se={}));var Ce;(function(e){e.method=`telemetry/event`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})(Ce||(exports.TelemetryEventNotification=Ce={}));var J;(function(e){e.None=0,e.Full=1,e.Incremental=2})(J||(exports.TextDocumentSyncKind=J={}));var Y;(function(e){e.method=`textDocument/didOpen`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(Y||(exports.DidOpenTextDocumentNotification=Y={}));var we;(function(e){function t(e){let t=e;return t!=null&&typeof t.text==`string`&&t.range!==void 0&&(t.rangeLength===void 0||typeof t.rangeLength==`number`)}e.isIncremental=t;function n(e){let t=e;return t!=null&&typeof t.text==`string`&&t.range===void 0&&t.rangeLength===void 0}e.isFull=n})(we||(exports.TextDocumentContentChangeEvent=we={}));var X;(function(e){e.method=`textDocument/didChange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(X||(exports.DidChangeTextDocumentNotification=X={}));var Z;(function(e){e.method=`textDocument/didClose`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(Z||(exports.DidCloseTextDocumentNotification=Z={}));var Te;(function(e){e.method=`textDocument/didSave`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(Te||(exports.DidSaveTextDocumentNotification=Te={}));var Ee;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(Ee||(exports.TextDocumentSaveReason=Ee={}));var Q;(function(e){e.method=`textDocument/willSave`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(Q||(exports.WillSaveTextDocumentNotification=Q={}));var De;(function(e){e.method=`textDocument/willSaveWaitUntil`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(De||(exports.WillSaveTextDocumentWaitUntilRequest=De={}));var Oe;(function(e){e.method=`workspace/didChangeWatchedFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(Oe||(exports.DidChangeWatchedFilesNotification=Oe={}));var ke;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(ke||(exports.FileChangeType=ke={}));var Ae;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(n.URI.is(t.baseUri)||n.WorkspaceFolder.is(t.baseUri))&&r.string(t.pattern)}e.is=t})(Ae||(exports.RelativePattern=Ae={}));var je;(function(e){e.Create=1,e.Change=2,e.Delete=4})(je||(exports.WatchKind=je={}));var $;(function(e){e.method=`textDocument/publishDiagnostics`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})($||(exports.PublishDiagnosticsNotification=$={}));var Me;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(Me||(exports.CompletionTriggerKind=Me={}));var Ne;(function(e){e.method=`textDocument/completion`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ne||(exports.CompletionRequest=Ne={}));var Pe;(function(e){e.method=`completionItem/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Pe||(exports.CompletionResolveRequest=Pe={}));var Fe;(function(e){e.method=`textDocument/hover`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Fe||(exports.HoverRequest=Fe={}));var Ie;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(Ie||(exports.SignatureHelpTriggerKind=Ie={}));var Le;(function(e){e.method=`textDocument/signatureHelp`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Le||(exports.SignatureHelpRequest=Le={}));var Re;(function(e){e.method=`textDocument/definition`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Re||(exports.DefinitionRequest=Re={}));var ze;(function(e){e.method=`textDocument/references`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(ze||(exports.ReferencesRequest=ze={}));var Be;(function(e){e.method=`textDocument/documentHighlight`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Be||(exports.DocumentHighlightRequest=Be={}));var Ve;(function(e){e.method=`textDocument/documentSymbol`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ve||(exports.DocumentSymbolRequest=Ve={}));var He;(function(e){e.method=`textDocument/codeAction`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(He||(exports.CodeActionRequest=He={}));var Ue;(function(e){e.method=`codeAction/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ue||(exports.CodeActionResolveRequest=Ue={}));var We;(function(e){e.method=`workspace/symbol`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(We||(exports.WorkspaceSymbolRequest=We={}));var Ge;(function(e){e.method=`workspaceSymbol/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ge||(exports.WorkspaceSymbolResolveRequest=Ge={}));var Ke;(function(e){e.method=`textDocument/codeLens`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ke||(exports.CodeLensRequest=Ke={}));var qe;(function(e){e.method=`codeLens/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(qe||(exports.CodeLensResolveRequest=qe={}));var Je;(function(e){e.method=`workspace/codeLens/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(Je||(exports.CodeLensRefreshRequest=Je={}));var Ye;(function(e){e.method=`textDocument/documentLink`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ye||(exports.DocumentLinkRequest=Ye={}));var Xe;(function(e){e.method=`documentLink/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Xe||(exports.DocumentLinkResolveRequest=Xe={}));var Ze;(function(e){e.method=`textDocument/formatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ze||(exports.DocumentFormattingRequest=Ze={}));var Qe;(function(e){e.method=`textDocument/rangeFormatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Qe||(exports.DocumentRangeFormattingRequest=Qe={}));var $e;(function(e){e.method=`textDocument/rangesFormatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})($e||(exports.DocumentRangesFormattingRequest=$e={}));var et;(function(e){e.method=`textDocument/onTypeFormatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(et||(exports.DocumentOnTypeFormattingRequest=et={}));var tt;(function(e){e.Identifier=1})(tt||(exports.PrepareSupportDefaultBehavior=tt={}));var nt;(function(e){e.method=`textDocument/rename`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(nt||(exports.RenameRequest=nt={}));var rt;(function(e){e.method=`textDocument/prepareRename`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(rt||(exports.PrepareRenameRequest=rt={}));var it;(function(e){e.method=`workspace/executeCommand`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(it||(exports.ExecuteCommandRequest=it={}));var at;(function(e){e.method=`workspace/applyEdit`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(`workspace/applyEdit`)})(at||(exports.ApplyWorkspaceEditRequest=at={}))})),Se=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createProtocolConnection=void 0;let t=U();function n(e,n,r,i){return t.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,t.createMessageConnection)(e,n,r,i)}exports.createProtocolConnection=n})),Ce=o((exports=>{var t=exports&&exports.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=exports&&exports.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.LSPErrorCodes=exports.createProtocolConnection=void 0,n(U(),exports),n(ee(),exports),n(G(),exports),n(xe(),exports);var r=Se();Object.defineProperty(exports,`createProtocolConnection`,{enumerable:!0,get:function(){return r.createProtocolConnection}});var i;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(i||(exports.LSPErrorCodes=i={}))})),J=o((exports=>{var t=exports&&exports.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=exports&&exports.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createProtocolConnection=void 0;let r=W();n(W(),exports),n(Ce(),exports);function i(e,t,n,i){return(0,r.createMessageConnection)(e,t,n,i)}exports.createProtocolConnection=i})),Y=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.generateUuid=exports.parse=exports.isUUID=exports.v4=exports.empty=void 0;var t=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},n=class e extends t{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),`-`,e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),`-`,`4`,e._randomHex(),e._randomHex(),e._randomHex(),`-`,e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),`-`,e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(``))}};n._chars=[`0`,`1`,`2`,`3`,`4`,`5`,`6`,`6`,`7`,`8`,`9`,`a`,`b`,`c`,`d`,`e`,`f`],n._timeHighBits=[`8`,`9`,`a`,`b`],exports.empty=new t(`00000000-0000-0000-0000-000000000000`);function r(){return new n}exports.v4=r;let i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return i.test(e)}exports.isUUID=a;function o(e){if(!a(e))throw Error(`invalid uuid`);return new t(e)}exports.parse=o;function s(){return r().asHex()}exports.generateUuid=s})),we=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.attachPartialResult=exports.ProgressFeature=exports.attachWorkDone=void 0;let t=J(),n=Y();var r=class e{constructor(t,n){this._connection=t,this._token=n,e.Instances.set(this._token,this)}begin(e,n,r,i){let a={kind:`begin`,title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(t.WorkDoneProgress.type,this._token,a)}report(e,n){let r={kind:`report`};typeof e==`number`?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(t.WorkDoneProgress.type,this._token,r)}done(){e.Instances.delete(this._token),this._connection.sendProgress(t.WorkDoneProgress.type,this._token,{kind:`end`})}};r.Instances=new Map;var i=class extends r{constructor(e,n){super(e,n),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},a=class{constructor(){}begin(){}report(){}done(){}},o=class extends a{constructor(){super(),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function s(e,t){if(t===void 0||t.workDoneToken===void 0)return new a;let n=t.workDoneToken;return delete t.workDoneToken,new r(e,n)}exports.attachWorkDone=s;let c=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(t.WorkDoneProgressCancelNotification.type,e=>{let t=r.Instances.get(e.token);(t instanceof i||t instanceof o)&&t.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new a:new r(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,n.generateUuid)();return this.connection.sendRequest(t.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>{let t=new i(this.connection,e);return t})}else return Promise.resolve(new o)}};exports.ProgressFeature=c;var l;(function(e){e.type=new t.ProgressType})(l||(l={}));var u=class{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(l.type,this._token,e)}};function d(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new u(e,n)}exports.attachPartialResult=d})),X=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ConfigurationFeature=void 0;let t=J(),n=D(),r=e=>class extends e{getConfiguration(e){return e?n.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(t.ConfigurationRequest.type,n).then(t=>Array.isArray(t)?Array.isArray(e)?t:t[0]:Array.isArray(e)?[]:null)}};exports.ConfigurationFeature=r})),Z=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.WorkspaceFoldersFeature=void 0;let t=J(),n=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new t.Emitter,this.connection.onNotification(t.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let t=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=t===!0||typeof t==`string`}getWorkspaceFolders(){return this.connection.sendRequest(t.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw Error(`Client doesn't support sending workspace folder change events.`);return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(t.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};exports.WorkspaceFoldersFeature=n})),Te=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.CallHierarchyFeature=void 0;let t=J(),n=e=>class extends e{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(t.CallHierarchyPrepareRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)),onIncomingCalls:e=>{let n=t.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onOutgoingCalls:e=>{let n=t.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}};exports.CallHierarchyFeature=n})),Ee=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.SemanticTokensBuilder=exports.SemanticTokensDiff=exports.SemanticTokensFeature=void 0;let t=J(),n=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(t.SemanticTokensRefreshRequest.type),on:e=>{let n=t.SemanticTokensRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onDelta:e=>{let n=t.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onRange:e=>{let n=t.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}};exports.SemanticTokensFeature=n;var r=class{constructor(e,t){this.originalSequence=e,this.modifiedSequence=t}computeDiff(){let e=this.originalSequence.length,t=this.modifiedSequence.length,n=0;for(;n<t&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<t&&n<e){let r=e-1,i=t-1;for(;r>=n&&i>=n&&this.originalSequence[r]===this.modifiedSequence[i];)r--,i--;(r<n||i<n)&&(r++,i++);let a=r-n+1,o=this.modifiedSequence.slice(n,i+1);return o.length===1&&o[0]===this.originalSequence[r]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:o}]}else if(n<t)return[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}];else if(n<e)return[{start:n,deleteCount:e-n}];else return[]}};exports.SemanticTokensDiff=r;var i=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,n,r,i){let a=e,o=t;this._dataLen>0&&(a-=this._prevLine,a===0&&(o-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=o,this._data[this._dataLen++]=n,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData===void 0?this.build():{resultId:this.id,edits:new r(this._prevData,this._data).computeDiff()}}};exports.SemanticTokensBuilder=i})),Q=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ShowDocumentFeature=void 0;let t=J(),n=e=>class extends e{showDocument(e){return this.connection.sendRequest(t.ShowDocumentRequest.type,e)}};exports.ShowDocumentFeature=n})),De=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.FileOperationsFeature=void 0;let t=J(),n=e=>class extends e{onDidCreateFiles(e){return this.connection.onNotification(t.DidCreateFilesNotification.type,t=>{e(t)})}onDidRenameFiles(e){return this.connection.onNotification(t.DidRenameFilesNotification.type,t=>{e(t)})}onDidDeleteFiles(e){return this.connection.onNotification(t.DidDeleteFilesNotification.type,t=>{e(t)})}onWillCreateFiles(e){return this.connection.onRequest(t.WillCreateFilesRequest.type,(t,n)=>e(t,n))}onWillRenameFiles(e){return this.connection.onRequest(t.WillRenameFilesRequest.type,(t,n)=>e(t,n))}onWillDeleteFiles(e){return this.connection.onRequest(t.WillDeleteFilesRequest.type,(t,n)=>e(t,n))}};exports.FileOperationsFeature=n})),Oe=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.LinkedEditingRangeFeature=void 0;let t=J(),n=e=>class extends e{onLinkedEditingRange(e){return this.connection.onRequest(t.LinkedEditingRangeRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0))}};exports.LinkedEditingRangeFeature=n})),ke=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.TypeHierarchyFeature=void 0;let t=J(),n=e=>class extends e{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(t.TypeHierarchyPrepareRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)),onSupertypes:e=>{let n=t.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onSubtypes:e=>{let n=t.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}};exports.TypeHierarchyFeature=n})),Ae=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlineValueFeature=void 0;let t=J(),n=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(t.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(t.InlineValueRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t)))}}};exports.InlineValueFeature=n})),je=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.FoldingRangeFeature=void 0;let t=J(),n=e=>class extends e{get foldingRange(){return{refresh:()=>this.connection.sendRequest(t.FoldingRangeRefreshRequest.type),on:e=>{let n=t.FoldingRangeRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}};exports.FoldingRangeFeature=n})),$=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlayHintFeature=void 0;let t=J(),n=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(t.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(t.InlayHintRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t))),resolve:e=>this.connection.onRequest(t.InlayHintResolveRequest.type,(t,n)=>e(t,n))}}};exports.InlayHintFeature=n})),Me=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.DiagnosticFeature=void 0;let t=J(),n=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(t.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(t.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(t.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t.WorkspaceDiagnosticRequest.partialResult,n)))}}};exports.DiagnosticFeature=n})),Ne=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.TextDocuments=void 0;let t=J();var n=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new t.Emitter,this._onDidOpen=new t.Emitter,this._onDidClose=new t.Emitter,this._onDidSave=new t.Emitter,this._onWillSave=new t.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=t.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(e=>{let t=e.textDocument,n=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._syncedDocuments.set(t.uri,n);let r=Object.freeze({document:n});this._onDidOpen.fire(r),this._onDidChangeContent.fire(r)})),n.push(e.onDidChangeTextDocument(e=>{let t=e.textDocument,n=e.contentChanges;if(n.length===0)return;let{version:r}=t;if(r==null)throw Error(`Received document change event for ${t.uri} without valid version identifier`);let i=this._syncedDocuments.get(t.uri);i!==void 0&&(i=this._configuration.update(i,n,r),this._syncedDocuments.set(t.uri,i),this._onDidChangeContent.fire(Object.freeze({document:i})))})),n.push(e.onDidCloseTextDocument(e=>{let t=this._syncedDocuments.get(e.textDocument.uri);t!==void 0&&(this._syncedDocuments.delete(e.textDocument.uri),this._onDidClose.fire(Object.freeze({document:t})))})),n.push(e.onWillSaveTextDocument(e=>{let t=this._syncedDocuments.get(e.textDocument.uri);t!==void 0&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((e,t)=>{let n=this._syncedDocuments.get(e.textDocument.uri);return n!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]})),n.push(e.onDidSaveTextDocument(e=>{let t=this._syncedDocuments.get(e.textDocument.uri);t!==void 0&&this._onDidSave.fire(Object.freeze({document:t}))})),t.Disposable.create(()=>{n.forEach(e=>e.dispose())})}};exports.TextDocuments=n})),Pe=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.NotebookDocuments=exports.NotebookSyncFeature=void 0;let t=J(),n=Ne(),r=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(t.DidOpenNotebookDocumentNotification.type,t=>{e(t)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(t.DidChangeNotebookDocumentNotification.type,t=>{e(t)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(t.DidSaveNotebookDocumentNotification.type,t=>{e(t)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(t.DidCloseNotebookDocumentNotification.type,t=>{e(t)})}}};exports.NotebookSyncFeature=r;var i=class e{onDidOpenTextDocument(e){return this.openHandler=e,t.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,t.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,t.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};i.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var a=class{constructor(e){e instanceof n.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new n.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new t.Emitter,this._onDidChange=new t.Emitter,this._onDidSave=new t.Emitter,this._onDidClose=new t.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let t=this.notebookCellMap.get(e);return t&&t[0]}findNotebookDocumentForCell(e){let t=typeof e==`string`?e:e.document,n=this.notebookCellMap.get(t);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new i,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(e=>{this.notebookDocuments.set(e.notebookDocument.uri,e.notebookDocument);for(let t of e.cellTextDocuments)n.openTextDocument({textDocument:t});this.updateCellMap(e.notebookDocument),this._onDidOpen.fire(e.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(e=>{let t=this.notebookDocuments.get(e.notebookDocument.uri);if(t===void 0)return;t.version=e.notebookDocument.version;let r=t.metadata,i=!1,a=e.change;a.metadata!==void 0&&(i=!0,t.metadata=a.metadata);let o=[],s=[],c=[],l=[];if(a.cells!==void 0){let e=a.cells;if(e.structure!==void 0){let r=e.structure.array;if(t.cells.splice(r.start,r.deleteCount,...r.cells===void 0?[]:r.cells),e.structure.didOpen!==void 0)for(let t of e.structure.didOpen)n.openTextDocument({textDocument:t}),o.push(t.uri);if(e.structure.didClose)for(let t of e.structure.didClose)n.closeTextDocument({textDocument:t}),s.push(t.uri)}if(e.data!==void 0){let n=new Map(e.data.map(e=>[e.document,e]));for(let e=0;e<=t.cells.length;e++){let r=n.get(t.cells[e].document);if(r!==void 0){let i=t.cells.splice(e,1,r);if(c.push({old:i[0],new:r}),n.delete(r.document),n.size===0)break}}}if(e.textContent!==void 0)for(let t of e.textContent)n.changeTextDocument({textDocument:t.document,contentChanges:t.changes}),l.push(t.document.uri)}this.updateCellMap(t);let u={notebookDocument:t};i&&(u.metadata={old:r,new:t.metadata});let d=[];for(let e of o)d.push(this.getNotebookCell(e));let f=[];for(let e of s)f.push(this.getNotebookCell(e));let p=[];for(let e of l)p.push(this.getNotebookCell(e));(d.length>0||f.length>0||c.length>0||p.length>0)&&(u.cells={added:d,removed:f,changed:{data:c,textContent:p}}),(u.metadata!==void 0||u.cells!==void 0)&&this._onDidChange.fire(u)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(e=>{let t=this.notebookDocuments.get(e.notebookDocument.uri);t!==void 0&&this._onDidSave.fire(t)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(e=>{let t=this.notebookDocuments.get(e.notebookDocument.uri);if(t!==void 0){this._onDidClose.fire(t);for(let t of e.cellTextDocuments)n.closeTextDocument({textDocument:t});this.notebookDocuments.delete(e.notebookDocument.uri);for(let e of t.cells)this.notebookCellMap.delete(e.document)}})),t.Disposable.create(()=>{r.forEach(e=>e.dispose())})}updateCellMap(e){for(let t of e.cells)this.notebookCellMap.set(t.document,[t,e])}};exports.NotebookDocuments=a})),Fe=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.MonikerFeature=void 0;let t=J(),n=e=>class extends e{get moniker(){return{on:e=>{let n=t.MonikerRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}};exports.MonikerFeature=n})),Ie=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createConnection=exports.combineFeatures=exports.combineNotebooksFeatures=exports.combineLanguagesFeatures=exports.combineWorkspaceFeatures=exports.combineWindowFeatures=exports.combineClientFeatures=exports.combineTracerFeatures=exports.combineTelemetryFeatures=exports.combineConsoleFeatures=exports._NotebooksImpl=exports._LanguagesImpl=exports.BulkUnregistration=exports.BulkRegistration=exports.ErrorMessageTracker=void 0;let t=J(),n=D(),r=Y(),i=we(),a=X(),o=Z(),s=Te(),c=Ee(),l=Q(),u=De(),d=Oe(),f=ke(),p=Ae(),m=je(),h=$(),g=Me(),_=Pe(),v=Fe();function y(e){if(e!==null)return e}var b=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}};exports.ErrorMessageTracker=b;var x=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(t.MessageType.Error,e)}warn(e){this.send(t.MessageType.Warning,e)}info(e){this.send(t.MessageType.Info,e)}log(e){this.send(t.MessageType.Log,e)}debug(e){this.send(t.MessageType.Debug,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(t.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,t.RAL)().console.error(`Sending log message failed`)})}},S=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:t.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(y)}showWarningMessage(e,...n){let r={type:t.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(y)}showInformationMessage(e,...n){let r={type:t.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(y)}};let C=(0,l.ShowDocumentFeature)((0,i.ProgressFeature)(S));var w;(function(e){function t(){return new T}e.create=t})(w||(exports.BulkRegistration=w={}));var T=class{constructor(){this._registrations=[],this._registered=new Set}add(e,t){let i=n.string(e)?e:e.method;if(this._registered.has(i))throw Error(`${i} is already added to this registration`);let a=r.generateUuid();this._registrations.push({id:a,method:i,registerOptions:t||{}}),this._registered.add(i)}asRegistrationParams(){return{registrations:this._registrations}}},E;(function(e){function t(){return new O(void 0,[])}e.create=t})(E||(exports.BulkUnregistration=E={}));var O=class{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let n={unregisterations:e};this._connection.sendRequest(t.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info(`Bulk unregistration failed.`)})}disposeSingle(e){let r=n.string(e)?e:e.method,i=this._unregistrations.get(r);if(!i)return!1;let a={unregisterations:[i]};return this._connection.sendRequest(t.UnregistrationRequest.type,a).then(()=>{this._unregistrations.delete(r)},e=>{this._connection.console.info(`Un-registering request handler for ${i.id} failed.`)}),!0}},k=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof T?this.registerMany(e):e instanceof O?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,i,a){let o=n.string(i)?i:i.method,s=r.generateUuid(),c={registrations:[{id:s,method:o,registerOptions:a||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(t.RegistrationRequest.type,c).then(t=>(e.add({id:s,method:o}),e),e=>(this.connection.console.info(`Registering request handler for ${o} failed.`),Promise.reject(e)))}registerSingle2(e,i){let a=n.string(e)?e:e.method,o=r.generateUuid(),s={registrations:[{id:o,method:a,registerOptions:i||{}}]};return this.connection.sendRequest(t.RegistrationRequest.type,s).then(e=>t.Disposable.create(()=>{this.unregisterSingle(o,a).catch(()=>{this.connection.console.info(`Un-registering capability with id ${o} failed.`)})}),e=>(this.connection.console.info(`Registering request handler for ${a} failed.`),Promise.reject(e)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(t.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(t.RegistrationRequest.type,n).then(()=>new O(this._connection,n.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info(`Bulk registration failed.`),Promise.reject(e)))}},A=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(e){return e&&!!e.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(t.ApplyWorkspaceEditRequest.type,r)}};let j=(0,u.FileOperationsFeature)((0,o.WorkspaceFoldersFeature)((0,a.ConfigurationFeature)(A)));var M=class{constructor(){this._trace=t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==t.Trace.Off&&this.connection.sendNotification(t.LogTraceNotification.type,{message:e,verbose:this._trace===t.Trace.Verbose?n:void 0}).catch(()=>{})}},N=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(t.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log(`Sending TelemetryEventNotification failed`)})}},P=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,i.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,i.attachPartialResult)(this.connection,t)}};exports._LanguagesImpl=P;let F=(0,m.FoldingRangeFeature)((0,v.MonikerFeature)((0,g.DiagnosticFeature)((0,h.InlayHintFeature)((0,p.InlineValueFeature)((0,f.TypeHierarchyFeature)((0,d.LinkedEditingRangeFeature)((0,c.SemanticTokensFeature)((0,s.CallHierarchyFeature)(P)))))))));var I=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,i.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,i.attachPartialResult)(this.connection,t)}};exports._NotebooksImpl=I;let L=(0,_.NotebookSyncFeature)(I);function R(e,t){return function(n){return t(e(n))}}exports.combineConsoleFeatures=R;function z(e,t){return function(n){return t(e(n))}}exports.combineTelemetryFeatures=z;function B(e,t){return function(n){return t(e(n))}}exports.combineTracerFeatures=B;function V(e,t){return function(n){return t(e(n))}}exports.combineClientFeatures=V;function H(e,t){return function(n){return t(e(n))}}exports.combineWindowFeatures=H;function U(e,t){return function(n){return t(e(n))}}exports.combineWorkspaceFeatures=U;function W(e,t){return function(n){return t(e(n))}}exports.combineLanguagesFeatures=W;function ee(e,t){return function(n){return t(e(n))}}exports.combineNotebooksFeatures=ee;function G(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}let r={__brand:`features`,console:n(e.console,t.console,R),tracer:n(e.tracer,t.tracer,B),telemetry:n(e.telemetry,t.telemetry,z),client:n(e.client,t.client,V),window:n(e.window,t.window,H),workspace:n(e.workspace,t.workspace,U),languages:n(e.languages,t.languages,W),notebooks:n(e.notebooks,t.notebooks,ee)};return r}exports.combineFeatures=G;function te(e,r,a){let o=a&&a.console?new(a.console(x)):new x,s=e(o);o.rawAttach(s);let c=a&&a.tracer?new(a.tracer(M)):new M,l=a&&a.telemetry?new(a.telemetry(N)):new N,u=a&&a.client?new(a.client(k)):new k,d=a&&a.window?new(a.window(C)):new C,f=a&&a.workspace?new(a.workspace(j)):new j,p=a&&a.languages?new(a.languages(F)):new F,m=a&&a.notebooks?new(a.notebooks(L)):new L,h=[o,c,l,u,d,f,p,m];function g(e){return e instanceof Promise?e:n.thenable(e)?new Promise((t,n)=>{e.then(e=>t(e),e=>n(e))}):Promise.resolve(e)}let _,v,y,b={listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(n.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(e,t),sendNotification:(e,t)=>{let r=n.string(e)?e:e.method;return s.sendNotification(r,t)},onNotification:(e,t)=>s.onNotification(e,t),onProgress:s.onProgress,sendProgress:s.sendProgress,onInitialize:e=>(v=e,{dispose:()=>{v=void 0}}),onInitialized:e=>s.onNotification(t.InitializedNotification.type,e),onShutdown:e=>(_=e,{dispose:()=>{_=void 0}}),onExit:e=>(y=e,{dispose:()=>{y=void 0}}),get console(){return o},get telemetry(){return l},get tracer(){return c},get client(){return u},get window(){return d},get workspace(){return f},get languages(){return p},get notebooks(){return m},onDidChangeConfiguration:e=>s.onNotification(t.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>s.onNotification(t.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>s.onNotification(t.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>s.onNotification(t.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>s.onNotification(t.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>s.onNotification(t.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>s.onRequest(t.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>s.onNotification(t.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>s.sendNotification(t.PublishDiagnosticsNotification.type,e),onHover:e=>s.onRequest(t.HoverRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onCompletion:e=>s.onRequest(t.CompletionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onCompletionResolve:e=>s.onRequest(t.CompletionResolveRequest.type,e),onSignatureHelp:e=>s.onRequest(t.SignatureHelpRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onDeclaration:e=>s.onRequest(t.DeclarationRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDefinition:e=>s.onRequest(t.DefinitionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onTypeDefinition:e=>s.onRequest(t.TypeDefinitionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onImplementation:e=>s.onRequest(t.ImplementationRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onReferences:e=>s.onRequest(t.ReferencesRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDocumentHighlight:e=>s.onRequest(t.DocumentHighlightRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDocumentSymbol:e=>s.onRequest(t.DocumentSymbolRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onWorkspaceSymbol:e=>s.onRequest(t.WorkspaceSymbolRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onWorkspaceSymbolResolve:e=>s.onRequest(t.WorkspaceSymbolResolveRequest.type,e),onCodeAction:e=>s.onRequest(t.CodeActionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onCodeActionResolve:e=>s.onRequest(t.CodeActionResolveRequest.type,(t,n)=>e(t,n)),onCodeLens:e=>s.onRequest(t.CodeLensRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onCodeLensResolve:e=>s.onRequest(t.CodeLensResolveRequest.type,(t,n)=>e(t,n)),onDocumentFormatting:e=>s.onRequest(t.DocumentFormattingRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onDocumentRangeFormatting:e=>s.onRequest(t.DocumentRangeFormattingRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onDocumentOnTypeFormatting:e=>s.onRequest(t.DocumentOnTypeFormattingRequest.type,(t,n)=>e(t,n)),onRenameRequest:e=>s.onRequest(t.RenameRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onPrepareRename:e=>s.onRequest(t.PrepareRenameRequest.type,(t,n)=>e(t,n)),onDocumentLinks:e=>s.onRequest(t.DocumentLinkRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDocumentLinkResolve:e=>s.onRequest(t.DocumentLinkResolveRequest.type,(t,n)=>e(t,n)),onDocumentColor:e=>s.onRequest(t.DocumentColorRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onColorPresentation:e=>s.onRequest(t.ColorPresentationRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onFoldingRanges:e=>s.onRequest(t.FoldingRangeRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onSelectionRanges:e=>s.onRequest(t.SelectionRangeRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onExecuteCommand:e=>s.onRequest(t.ExecuteCommandRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),dispose:()=>s.dispose()};for(let e of h)e.attach(b);return s.onRequest(t.InitializeRequest.type,e=>{r.initialize(e),n.string(e.trace)&&(c.trace=t.Trace.fromString(e.trace));for(let t of h)t.initialize(e.capabilities);if(v){let r=v(e,new t.CancellationTokenSource().token,(0,i.attachWorkDone)(s,e),void 0);return g(r).then(e=>{if(e instanceof t.ResponseError)return e;let r=e;r||(r={capabilities:{}});let i=r.capabilities;i||(i={},r.capabilities=i),i.textDocumentSync===void 0||i.textDocumentSync===null?i.textDocumentSync=n.number(b.__textDocumentSync)?b.__textDocumentSync:t.TextDocumentSyncKind.None:!n.number(i.textDocumentSync)&&!n.number(i.textDocumentSync.change)&&(i.textDocumentSync.change=n.number(b.__textDocumentSync)?b.__textDocumentSync:t.TextDocumentSyncKind.None);for(let e of h)e.fillServerCapabilities(i);return r})}else{let e={capabilities:{textDocumentSync:t.TextDocumentSyncKind.None}};for(let t of h)t.fillServerCapabilities(e.capabilities);return e}}),s.onRequest(t.ShutdownRequest.type,()=>{if(r.shutdownReceived=!0,_)return _(new t.CancellationTokenSource().token)}),s.onNotification(t.ExitNotification.type,()=>{try{y&&y()}finally{r.shutdownReceived?r.exit(0):r.exit(1)}}),s.onNotification(t.SetTraceNotification.type,e=>{c.trace=t.Trace.fromString(e.value)}),b}exports.createConnection=te})),Le=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.resolveModulePath=exports.FileSystem=exports.resolveGlobalYarnPath=exports.resolveGlobalNodePath=exports.resolve=exports.uriToFilePath=void 0;let t=require(`url`),n=require(`path`),r=require(`fs`),i=require(`child_process`);function a(e){let r=t.parse(e);if(r.protocol!==`file:`||!r.path)return;let i=r.path.split(`/`);for(var a=0,o=i.length;a<o;a++)i[a]=decodeURIComponent(i[a]);if(process.platform===`win32`&&i.length>1){let e=i[0],t=i[1];e.length===0&&t.length>1&&t[1]===`:`&&i.shift()}return n.normalize(i.join(`/`))}exports.uriToFilePath=a;function o(){return process.platform===`win32`}function s(e,t,a,o){let s=`NODE_PATH`,c=[`var p = process;`,`p.on('message',function(m){`,`if(m.c==='e'){`,`p.exit(0);`,`}`,`else if(m.c==='rs'){`,`try{`,`var r=require.resolve(m.a);`,`p.send({c:'r',s:true,r:r});`,`}`,`catch(err){`,`p.send({c:'r',s:false});`,`}`,`}`,`});`].join(``);return new Promise((l,u)=>{let d=process.env,f=Object.create(null);Object.keys(d).forEach(e=>f[e]=d[e]),t&&r.existsSync(t)&&(f[s]?f[s]=t+n.delimiter+f[s]:f[s]=t,o&&o(`NODE_PATH value is: ${f[s]}`)),f.ELECTRON_RUN_AS_NODE=`1`;try{let t=(0,i.fork)(``,[],{cwd:a,env:f,execArgv:[`-e`,c]});if(t.pid===void 0){u(Error(`Starting process to resolve node module  ${e} failed`));return}t.on(`error`,e=>{u(e)}),t.on(`message`,n=>{n.c===`r`&&(t.send({c:`e`}),n.s?l(n.r):u(Error(`Failed to resolve module: ${e}`)))});let n={c:`rs`,a:e};t.send(n)}catch(e){u(e)}})}exports.resolve=s;function c(e){let t=`npm`,r=Object.create(null);Object.keys(process.env).forEach(e=>r[e]=process.env[e]),r.NO_UPDATE_NOTIFIER=`true`;let a={encoding:`utf8`,env:r};o()&&(t=`npm.cmd`,a.shell=!0);let s=()=>{};try{process.on(`SIGPIPE`,s);let r=(0,i.spawnSync)(t,[`config`,`get`,`prefix`],a).stdout;if(!r){e&&e(`'npm config get prefix' didn't return a value.`);return}let c=r.trim();return e&&e(`'npm config get prefix' value is: ${c}`),c.length>0?o()?n.join(c,`node_modules`):n.join(c,`lib`,`node_modules`):void 0}catch(e){return}finally{process.removeListener(`SIGPIPE`,s)}}exports.resolveGlobalNodePath=c;function l(e){let t=`yarn`,r={encoding:`utf8`};o()&&(t=`yarn.cmd`,r.shell=!0);let a=()=>{};try{process.on(`SIGPIPE`,a);let o=(0,i.spawnSync)(t,[`global`,`dir`,`--json`],r),s=o.stdout;if(!s){e&&(e(`'yarn global dir' didn't return a value.`),o.stderr&&e(o.stderr));return}let c=s.trim().split(/\r?\n/);for(let e of c)try{let t=JSON.parse(e);if(t.type===`log`)return n.join(t.data,`node_modules`)}catch(e){}return}catch(e){return}finally{process.removeListener(`SIGPIPE`,a)}}exports.resolveGlobalYarnPath=l;var u;(function(e){let t;function i(){return t===void 0&&(t=process.platform===`win32`?!1:!r.existsSync(__filename.toUpperCase())||!r.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=i;function a(e,t){return i()?n.normalize(t).indexOf(n.normalize(e))===0:n.normalize(t).toLowerCase().indexOf(n.normalize(e).toLowerCase())===0}e.isParent=a})(u||(exports.FileSystem=u={}));function d(e,t,r,i){return r?(n.isAbsolute(r)||(r=n.join(e,r)),s(t,r,r,i).then(e=>u.isParent(r,e)?e:Promise.reject(Error(`Failed to load ${t} from node path location.`))).then(void 0,n=>s(t,c(i),e,i))):s(t,c(i),e,i)}exports.resolveModulePath=d})),Re=o(((exports,t)=>{t.exports=J()})),ze=o((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlineCompletionFeature=void 0;let t=J(),n=e=>class extends e{get inlineCompletion(){return{on:e=>this.connection.onRequest(t.InlineCompletionRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t)))}}};exports.InlineCompletionFeature=n})),Be=o((exports=>{var t=exports&&exports.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=exports&&exports.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ProposedFeatures=exports.NotebookDocuments=exports.TextDocuments=exports.SemanticTokensBuilder=void 0;let r=Ee();Object.defineProperty(exports,`SemanticTokensBuilder`,{enumerable:!0,get:function(){return r.SemanticTokensBuilder}});let i=ze();n(J(),exports);let a=Ne();Object.defineProperty(exports,`TextDocuments`,{enumerable:!0,get:function(){return a.TextDocuments}});let o=Pe();Object.defineProperty(exports,`NotebookDocuments`,{enumerable:!0,get:function(){return o.NotebookDocuments}}),n(Ie(),exports);var s;(function(e){e.all={__brand:`features`,languages:i.InlineCompletionFeature}})(s||(exports.ProposedFeatures=s={}))})),Ve=o((exports=>{var t=exports&&exports.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=exports&&exports.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createConnection=exports.Files=void 0;let r=require(`node:util`),i=D(),a=Ie(),o=Le(),s=Re();n(Re(),exports),n(Be(),exports);var c;(function(e){e.uriToFilePath=o.uriToFilePath,e.resolveGlobalNodePath=o.resolveGlobalNodePath,e.resolveGlobalYarnPath=o.resolveGlobalYarnPath,e.resolve=o.resolve,e.resolveModulePath=o.resolveModulePath})(c||(exports.Files=c={}));let l=!1,u;function d(){let e=`--clientProcessId`;function t(e){try{let t=parseInt(e);isNaN(t)||(u=setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(l?0:1)}},3e3))}catch(e){}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===e&&n+1<process.argv.length){t(process.argv[n+1]);return}else{let n=r.split(`=`);n[0]===e&&t(n[1])}}}d();let f={initialize:e=>{let t=e.processId;i.number(t)&&u===void 0&&setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(l?0:1)}},3e3)},get shutdownReceived(){return l},set shutdownReceived(e){l=e},exit:e=>{process.exit(e)}};function p(e,t,n,r){let i,a,o,c;return e!==void 0&&e.__brand===`features`&&(i=e,e=t,t=n,n=r),s.ConnectionStrategy.is(e)||s.ConnectionOptions.is(e)?c=e:(a=e,o=t,c=n),m(a,o,c,i)}exports.createConnection=p;function m(e,t,n,r){let o=!1;if(!e&&!t&&process.argv.length>2){let n,r,i=process.argv.slice(2);for(let a=0;a<i.length;a++){let l=i[a];if(l===`--node-ipc`){e=new s.IPCMessageReader(process),t=new s.IPCMessageWriter(process);break}else if(l===`--stdio`){o=!0,e=process.stdin,t=process.stdout;break}else if(l===`--socket`){n=parseInt(i[a+1]);break}else if(l===`--pipe`){r=i[a+1];break}else{var c=l.split(`=`);if(c[0]===`--socket`){n=parseInt(c[1]);break}else if(c[0]===`--pipe`){r=c[1];break}}}if(n){let r=(0,s.createServerSocketTransport)(n);e=r[0],t=r[1]}else if(r){let n=(0,s.createServerPipeTransport)(r);e=n[0],t=n[1]}}var u=`Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'`;if(!e)throw Error(`Connection input stream is not set. `+u);if(!t)throw Error(`Connection output stream is not set. `+u);if(i.func(e.read)&&i.func(e.on)){let t=e;t.on(`end`,()=>{process.exit(l?0:1)}),t.on(`close`,()=>{process.exit(l?0:1)})}let d=r=>{let i=(0,s.createProtocolConnection)(e,t,r,n);return o&&h(r),i};return(0,a.createConnection)(d,f,r)}function h(e){function t(e){return e.map(e=>typeof e==`string`?e:(0,r.inspect)(e)).join(` `)}let n=new Map;console.assert=function(n,...r){if(!n)if(r.length===0)e.error(`Assertion failed`);else{let[n,...i]=r;e.error(`Assertion failed: ${n} ${t(i)}`)}},console.count=function(t=`default`){let r=String(t),i=n.get(r)??0;i+=1,n.set(r,i),e.log(`${r}: ${r}`)},console.countReset=function(e){e===void 0?n.clear():n.delete(String(e))},console.debug=function(...n){e.log(t(n))},console.dir=function(t,n){e.log((0,r.inspect)(t,n))},console.log=function(...n){e.log(t(n))},console.error=function(...n){e.error(t(n))},console.trace=function(...n){let r=Error().stack.replace(/(.+\n){2}/,``),i=`Trace`;n.length!==0&&(i+=`: ${t(n)}`),e.log(`${i}\n${r}`)},console.warn=function(...n){e.warn(t(n))}}})),He=o(((exports,t)=>{t.exports=Ve()})),Ue=c(He(),1),We=class e{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(t,n){for(let n of t)if(e.isIncremental(n)){let e=Ye(n.range),t=this.offsetAt(e.start),r=this.offsetAt(e.end);this._content=this._content.substring(0,t)+n.text+this._content.substring(r,this._content.length);let i=Math.max(e.start.line,0),a=Math.max(e.end.line,0),o=this._lineOffsets,s=qe(n.text,!1,t);if(a-i===s.length)for(let e=0,t=s.length;e<t;e++)o[e+i+1]=s[e];else s.length<1e4?o.splice(i+1,a-i,...s):this._lineOffsets=o=o.slice(0,i+1).concat(s,o.slice(a+1));let c=n.text.length-(r-t);if(c!==0)for(let e=i+1+s.length,t=o.length;e<t;e++)o[e]=o[e]+c}else if(e.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw Error(`Unknown change event received`);this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=qe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,r=t.length;if(r===0)return{line:0,character:e};for(;n<r;){let i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}let i=n-1;return e=this.ensureBeforeEOL(e,t[i]),{line:i,character:e-t[i]}}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line];if(e.character<=0)return n;let r=e.line+1<t.length?t[e.line+1]:this._content.length,i=Math.min(n+e.character,r);return this.ensureBeforeEOL(i,n)}ensureBeforeEOL(e,t){for(;e>t&&Je(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let t=e;return t!=null&&typeof t.text==`string`&&t.range!==void 0&&(t.rangeLength===void 0||typeof t.rangeLength==`number`)}static isFull(e){let t=e;return t!=null&&typeof t.text==`string`&&t.range===void 0&&t.rangeLength===void 0}},Ge;(function(e){function t(e,t,n,r){return new We(e,t,n,r)}e.create=t;function n(e,t,n){if(e instanceof We)return e.update(t,n),e;throw Error(`TextDocument.update: document must be created by TextDocument.create`)}e.update=n;function r(e,t){let n=e.getText(),r=Ke(t.map(Xe),(e,t)=>{let n=e.range.start.line-t.range.start.line;return n===0?e.range.start.character-t.range.start.character:n}),i=0,a=[];for(let t of r){let r=e.offsetAt(t.range.start);if(r<i)throw Error(`Overlapping edit`);r>i&&a.push(n.substring(i,r)),t.newText.length&&a.push(t.newText),i=e.offsetAt(t.range.end)}return a.push(n.substr(i)),a.join(``)}e.applyEdits=r})(Ge||(Ge={}));function Ke(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);Ke(r,t),Ke(i,t);let a=0,o=0,s=0;for(;a<r.length&&o<i.length;){let n=t(r[a],i[o]);n<=0?e[s++]=r[a++]:e[s++]=i[o++]}for(;a<r.length;)e[s++]=r[a++];for(;o<i.length;)e[s++]=i[o++];return e}function qe(e,t,n=0){let r=t?[n]:[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);Je(i)&&(i===13&&t+1<e.length&&e.charCodeAt(t+1)===10&&t++,r.push(n+t+1))}return r}function Je(e){return e===13||e===10}function Ye(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function Xe(e){let t=Ye(e.range);return t===e.range?e:{newText:e.newText,range:t}}function Ze(e){return e!=null}var Qe=Object.create,$e=Object.defineProperty,et=Object.getOwnPropertyDescriptor,tt=Object.getOwnPropertyNames,nt=Object.getPrototypeOf,rt=Object.prototype.hasOwnProperty,it=(e,t)=>function(){return t||(0,e[tt(e)[0]])((t={exports:{}}).exports,t),t.exports},at=(e,t,n,r)=>{if(t&&typeof t==`object`||typeof t==`function`)for(var i=tt(t),a=0,o=i.length,s;a<o;a++)s=i[a],!rt.call(e,s)&&s!==n&&$e(e,s,{get:(e=>t[e]).bind(null,s),enumerable:!(r=et(t,s))||r.enumerable});return e},ot=(e,t,n)=>(n=e==null?{}:Qe(nt(e)),at(t||!e||!e.__esModule?$e(n,`default`,{value:e,enumerable:!0}):n,e));function st(e){if(e instanceof RegExp)return e;let{source:t,flags:n}=e;if(!n.includes(`x`))return e;n=n.replace(`x`,``),t=t.replace(/#.*$/gm,``),t=t.replace(/\s+/g,``);let r={source:t,flags:n};return e.lastIndex!==void 0&&(r.lastIndex=e.lastIndex),r}function ct(e,t){let n=t[0][0],r=[``];r.input=e,r.index=n,r.indices=t;let i=r;for(let n=0;n<t.length;n++){if(!t[n]){i[n]=void 0;continue}let[a,o]=t[n];r[n]=e.slice(a,o)}let a=t.groups?Object.fromEntries(Object.entries(t.groups).map(([t,[n,r]])=>[t,e.slice(n,r)])):void 0;return a&&(r.groups=a),r}function lt(e){return e?performance.now()-e:0}function ut(e,t){e.then(()=>{}).catch(e=>t?.(e)).catch(()=>{})}let dt=ft()[0];function ft(){let e=performance.now(),t=Math.floor(e/1e3);return[t,Math.floor((e-t*1e3)*1e6)]}function pt(){++dt;let e=ft(),t=dt^e[0]^e[1],n=(`0`+t%13).slice(-2),r=t,i=dt,a=(i+r)%7;return`ID-${n}-${r}-${i}-${a}`}function mt(e){if(typeof e==`string`&&/^ID-\d+-\d+-\d+-\d+$/.test(e)){let[t,n,r,i]=e.split(`-`).slice(1).map(e=>Number.parseInt(e,10));return t===n%13&&i===(n+r)%7}return!1}function ht(e){if(!e||typeof e!=`object`)return!1;let t=e;return typeof t.requestType==`string`&&mt(t.id)}function gt(e,t){return _t(e)&&e.responseType===t}function _t(e){if(!e||typeof e!=`object`)return!1;let t=e;return typeof t.responseType==`string`&&mt(t.id)}function vt(e,t){return{id:pt(),requestType:e,data:t}}const yt=`Error`;function bt(e){return gt(e,`Error`)}const xt=`ExecRegExp`;function St(e){return vt(`ExecRegExp`,e)}const Ct=`MatchAllRegExp`;function wt(e){return vt(`MatchAllRegExp`,e)}const Tt=`MatchAllRegExpArray`;function Et(e){return vt(`MatchAllRegExpArray`,e)}const Dt=`MatchAllRegExpAsRange`;function Ot(e){return vt(`MatchAllRegExpAsRange`,e)}const kt=`MatchRegExp`;function At(e){return vt(`MatchRegExp`,e)}var jt=class extends Error{message;elapsedTimeMs;constructor(e,t){super(e),this.name=`TimeoutError`,this.message=e,this.elapsedTimeMs=t}};function Mt(e){if(e instanceof jt)return!0;if(!e||typeof e!=`object`)return!1;let t=e;return typeof t.message==`string`&&typeof t.elapsedTimeMs==`number`}const Nt=1e3,Pt=200;var Ft=class{pending;requestQueue;_worker;currentRequest;timeoutID;stopped=!1;dispose;constructor(e,t=1e3,n=200){this.createWorker=e,this.executionTimeLimitMs=t,this.stopIdleWorkerAfterMs=n,this.dispose=()=>this._dispose(),this.pending=new Map,this.requestQueue=new Map,this.currentRequest=void 0}scheduleRequest(e,t=this.executionTimeLimitMs){if(this.stopped)return Promise.reject(new It(`Scheduler has been stopped`,e.requestType,0,e.data));if(!ht(e))return Promise.reject(new Rt(`Bad Request`,e));let n=this.requestQueue.get(e.id);if(n)return n.promise;let r=new Promise((t,n)=>{this.pending.set(e.id,{resolve:e=>t(e),reject:n}),this.trigger()}).then(t=>zt(t,e.data));return this.requestQueue.set(e.id,{request:e,promise:r,timeLimitMs:t,startTime:void 0}),this.trigger(),r}_dispose(){if(this.stopped)return Promise.resolve();this.stopped=!0;let e=this.stopWorker();for(let e of this.requestQueue.keys())ut(this.terminateRequest(e,`Scheduler has been stopped`));return this.pending.clear(),this.requestQueue.clear(),this.currentRequest=void 0,e}terminateRequest(e,t=`Request Terminated`){e===this.currentRequest&&ut(this.stopWorker());let n=this.pending.get(e);if(!n)return this.cleanupRequest(e),Promise.reject(new Rt(`Unknown Request`));let r=this.requestQueue.get(e),i=r?.startTime?lt(r.startTime):0;return n.reject(new It(t,r?.request.requestType||`Unknown`,i)),this.cleanupRequest(e),Promise.resolve()}listener(e){if(_t(e)){let t=this.pending.get(e.id);if(this.cleanupRequest(e.id),t){t.resolve(e);return}}console.warn(`Unhandled Response ${JSON.stringify(e)}`)}trigger(){this.stopped||this.currentRequest||setTimeout(()=>{if(this.stopped||this.currentRequest)return;let e=this.getNextRequest();if(!e){this.scheduleTimeout(()=>this.stopWorker(),this.stopIdleWorkerAfterMs);return}e.startTime=performance.now();let t=e.request.id;this.currentRequest=t,this.scheduleTimeout(()=>this.terminateRequest(t,`Request Timeout`),e.timeLimitMs),this.worker.postMessage(e.request)},0)}cleanupRequest(e){this.pending.delete(e),this.requestQueue.delete(e),this.currentRequest===e&&(this.currentRequest=void 0,this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=void 0),this.trigger()}scheduleTimeout(e,t){this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout(e,t)}getNextRequest(){let e=this.requestQueue.entries().next();if(!e.done)return e.value[1]}static createRequest(e,t){return vt(e,t)}#onMessage=e=>this.listener(e);stopWorker(){if(!this._worker)return Promise.resolve();this._worker?.off(`message`,this.#onMessage),this._worker.removeAllListeners?.();let e=this._worker;return this._worker=void 0,Promise.resolve(e.terminate()).then(()=>{})}get worker(){return this._worker||(this._worker=this.createWorker(),this._worker.on(`message`,this.#onMessage)),this._worker}},It=class extends jt{timestamp=Date.now();constructor(e,t,n,r){super(e,n),this.requestType=t,this.data=r,this.name=`ErrorCanceledRequest`}},Lt=class extends Error{timestamp=Date.now();constructor(e,t,n){super(e),this.requestType=t,this.data=n,this.name=`ErrorFailedRequest`}},Rt=class extends Error{timestamp=Date.now();constructor(e,t){super(e),this.data=t,this.name=`ErrorBadRequest`}};function zt(e,t){if(bt(e))throw new Lt(e.data.message,e.data.requestType,t);return e}var Bt=it({"node_modules/.pnpm/@oxc-project+runtime@0.77.2/node_modules/@oxc-project/runtime/src/helpers/usingCtx.js"(e,t){function n(){var e=typeof SuppressedError==`function`?SuppressedError:function(e,t){var n=Error();return n.name=`SuppressedError`,n.error=e,n.suppressed=t,n},t={},n=[];function r(e,t){if(t!=null){if(Object(t)!==t)throw TypeError(`using declarations can only be used with objects, functions, null, or undefined.`);if(e)var r=t[Symbol.asyncDispose||Symbol.for(`Symbol.asyncDispose`)];if(r===void 0&&(r=t[Symbol.dispose||Symbol.for(`Symbol.dispose`)],e))var i=r;if(typeof r!=`function`)throw TypeError(`Object is not disposable.`);i&&(r=function(){try{i.call(t)}catch(e){return Promise.reject(e)}}),n.push({v:t,d:r,a:e})}else e&&n.push({d:t,a:e});return t}return{e:t,u:r.bind(null,!1),a:r.bind(null,!0),d:function(){var r,i=this.e,a=0;function o(){for(;r=n.pop();)try{if(!r.a&&a===1)return a=0,n.push(r),Promise.resolve().then(o);if(r.d){var e=r.d.call(r.v);if(r.a)return a|=2,Promise.resolve(e).then(o,s)}else a|=1}catch(e){return s(e)}if(a===1)return i===t?Promise.resolve():Promise.reject(i);if(i!==t)throw i}function s(n){return i=i===t?n:new e(n,i),o()}return o()}}}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}}),Vt=ot(Bt(),1);Symbol.dispose===void 0&&(Symbol.dispose=Symbol.for(`dispose`)),Symbol.asyncDispose===void 0&&(Symbol.asyncDispose=Symbol.for(`asyncDispose`));var Ht=class{scheduler;dispose=()=>this._dispose();constructor(e,t,n){this.scheduler=new Ft(e,t,n)}exec(e,t,n){e=st(e);let r=St({regexp:e,text:t});return this.makeRequest(r,n)}async matchAll(e,t,n){t=st(t);let r=wt({regexp:t,text:e}),i=await this.makeRequest(r,n);return{elapsedTimeMs:i.elapsedTimeMs,matches:i.matches.map(t=>ct(e,t))}}match(e,t,n){t=st(t);let r=At({regexp:t,text:e});return this.makeRequest(r,n)}async matchAllArray(e,t,n){let r=await this.matchAllArrayIndices(e,t,n);return{elapsedTimeMs:r.elapsedTimeMs,results:r.results.map(t=>({elapsedTimeMs:t.elapsedTimeMs,matches:t.matches.map(t=>ct(e,t))}))}}matchAllArrayIndices(e,t,n){t=t.map(st);let r=Et({regexps:t,text:e});return this.makeRequest(r,n)}async matchAllAsRangePairs(e,t,n){t=st(t);let r=Ot({regexp:t,text:e}),i=await this.makeRequest(r,n);return{elapsedTimeMs:i.elapsedTimeMs,ranges:Gt(i.ranges)}}makeRequest(e,t){return this.scheduler.scheduleRequest(e,t).then(Ut,Wt)}[Symbol.dispose](){this._dispose().catch(()=>{})}[Symbol.asyncDispose](){return this._dispose().catch(()=>{})}async _dispose(){return this.scheduler.dispose()}set timeout(e){this.scheduler.executionTimeLimitMs=e}get timeout(){return this.scheduler.executionTimeLimitMs}};function Ut(e){return e.data}function Wt(e){return e instanceof jt||e instanceof Error?Promise.reject(e):Mt(e)?Promise.reject(new jt(e.message,e.elapsedTimeMs)):Promise.reject(Error(`Unknown Error`,{cause:e}))}function Gt(e){let t=e.length,n=Array(t/2);for(let r=0,i=0;r<t;r+=2,i++)n[i]=[e[r],e[r+1]];return n}const Kt=`data:application/javascript;base64,aW1wb3J0IHsgaXNNYWluVGhyZWFkLCBwYXJlbnRQb3J0IH0gZnJvbSAid29ya2VyX3RocmVhZHMiOwoKLy8jcmVnaW9uIHNyYy90aW1lci50cwpmdW5jdGlvbiBtZWFzdXJlRXhlY3V0aW9uKGZuKSB7Cgljb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwoJY29uc3QgciA9IGZuKCk7CglyZXR1cm4gewoJCWVsYXBzZWRUaW1lTXM6IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQsCgkJcgoJfTsKfQoKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBzcmMvaGVscGVycy9ldmFsdWF0ZVJlZ0V4cC50cwovKioKKiBSZXR1cm5zIGEgdGltZWQgdmVyc2lvbiBvZiBTdHJpbmcucHJvdG90eXBlLm1hdGNoQWxsCiogQHBhcmFtIHRleHQKKiBAcGFyYW0gcmVnRXhwCiogQHJldHVybnMKKi8KZnVuY3Rpb24gbWF0Y2hBbGxSZWdFeHAodGV4dCwgcmVnRXhwKSB7Cgljb25zdCB7IGVsYXBzZWRUaW1lTXMsIHIgfSA9IG1lYXN1cmVFeGVjdXRpb24oKCkgPT4gQXJyYXkuZnJvbShkb01hdGNoQWxsUmVnRXhwKHJlZ0V4cCwgdGV4dCkpLm1hcCgobSkgPT4gbS5pbmRpY2VzIHx8IFtdKSk7CglyZXR1cm4gewoJCWVsYXBzZWRUaW1lTXMsCgkJbWF0Y2hlczogcgoJfTsKfQovKioKKiBSZXR1cm5zIGEgdGltZWQgdmVyc2lvbiBvZiBSZWdFeHAuZXhlYwoqIEBwYXJhbSByZWdFeHAKKiBAcGFyYW0gdGV4dAoqIEByZXR1cm5zCiovCmZ1bmN0aW9uIGV4ZWNSZWdFeHAocmVnRXhwLCB0ZXh0KSB7Cgljb25zdCB7IGVsYXBzZWRUaW1lTXMsIHI6IG1hdGNoIH0gPSBtZWFzdXJlRXhlY3V0aW9uKCgpID0+IGRvRXhlY1JlZ0V4cChyZWdFeHAsIHRleHQpKTsKCXJldHVybiB7CgkJZWxhcHNlZFRpbWVNcywKCQlsYXN0SW5kZXg6IHJlZ0V4cC5sYXN0SW5kZXgsCgkJbWF0Y2gKCX07Cn0KLyoqCiogUmV0dXJucyBhIHRpbWVkIHZlcnNpb24gb2YgU3RyaW5nLnByb3RvdHlwZS5tYXRjaAoqIEBwYXJhbSB0ZXh0CiogQHBhcmFtIHJlZ0V4cAoqIEByZXR1cm5zCiovCmZ1bmN0aW9uIG1hdGNoUmVnRXhwKHRleHQsIHJlZ0V4cCkgewoJY29uc3QgeyBlbGFwc2VkVGltZU1zLCByOiBtYXRjaCB9ID0gbWVhc3VyZUV4ZWN1dGlvbigoKSA9PiBkb01hdGNoUmVnRXhwKHJlZ0V4cCwgdGV4dCkpOwoJcmV0dXJuIHsKCQllbGFwc2VkVGltZU1zLAoJCWxhc3RJbmRleDogcmVnRXhwLmxhc3RJbmRleCwKCQltYXRjaAoJfTsKfQovKioKKiBSZXR1cm5zIGEgdGltZWQgdmVyc2lvbiBvZiBtYXRjaEFsbFJlZ0V4cCBmb3IgYW4gYXJyYXkgb2YgcmVndWxhciBleHByZXNzaW9ucwoqIEBwYXJhbSB0ZXh0CiogQHBhcmFtIHJlZ0V4cEFycmF5CiogQHJldHVybnMKKi8KZnVuY3Rpb24gbWF0Y2hBbGxSZWdFeHBBcnJheSh0ZXh0LCByZWdFeHBBcnJheSkgewoJY29uc3QgeyBlbGFwc2VkVGltZU1zLCByOiByZXN1bHRzIH0gPSBtZWFzdXJlRXhlY3V0aW9uKCgpID0+IHsKCQlyZXR1cm4gcmVnRXhwQXJyYXkubWFwKChyKSA9PiBtYXRjaEFsbFJlZ0V4cCh0ZXh0LCByKSk7Cgl9KTsKCXJldHVybiB7CgkJZWxhcHNlZFRpbWVNcywKCQlyZXN1bHRzCgl9Owp9Ci8qKgoqIENvbnZlcnRzIGEgUmVnRXhwIG9yIFJlZ0V4cExpa2Ugb2JqZWN0IHRvIGEgUmVnRXhwIG9iamVjdC4KKiBJZiB0aGUgaW5wdXQgaXMgYSBSZWdFeHAsIGl0IGlzIHJldHVybmVkIGFzIGlzLgoqIElmIHRoZSBpbnB1dCBpcyBhIFJlZ0V4cExpa2Ugb2JqZWN0LCBpdCBzaG91bGQgaGF2ZSBgc291cmNlYCBhbmQgYGZsYWdzYCBwcm9wZXJ0aWVzLgoqIFRoZSBgeGAgZmxhZyBpcyBOT1Qgc3VwcG9ydGVkIGFuZCB3aWxsIHRocm93IGFuIGVycm9yIGlmIHByZXNlbnQuCiogQHBhcmFtIHJlZ2V4cAoqIEBwYXJhbSBkZWZhdWx0RmxhZ3MKKiBAcmV0dXJucwoqLwpmdW5jdGlvbiB0b1JlZ0V4cChyZWdleHApIHsKCWlmIChyZWdleHAgaW5zdGFuY2VvZiBSZWdFeHApIHJldHVybiByZWdleHA7Cgljb25zdCB7IHNvdXJjZSwgZmxhZ3MgfSA9IHJlZ2V4cDsKCWlmICh0eXBlb2Ygc291cmNlICE9PSAic3RyaW5nIikgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBSZWdFeHAuIik7Cgljb25zdCByZWcgPSBuZXcgUmVnRXhwKHNvdXJjZSwgZmxhZ3MpOwoJaWYgKHJlZ2V4cC5sYXN0SW5kZXggIT09IHZvaWQgMCkgcmVnLmxhc3RJbmRleCA9IHJlZ2V4cC5sYXN0SW5kZXg7CglyZXR1cm4gcmVnOwp9CmZ1bmN0aW9uIGRvRXhlY1JlZ0V4cChyZWdFeHAsIHRleHQpIHsKCXJldHVybiByZWdFeHAuZXhlYyh0ZXh0KTsKfQpmdW5jdGlvbiBkb01hdGNoQWxsUmVnRXhwKHJlZ0V4cCwgdGV4dCkgewoJcmVnRXhwID0gcmVnRXhwLmhhc0luZGljZXMgPyByZWdFeHAgOiBuZXcgUmVnRXhwKHJlZ0V4cC5zb3VyY2UsIHJlZ0V4cC5mbGFncyArICJkIik7CglyZXR1cm4gcmVnRXhwW1N5bWJvbC5tYXRjaEFsbF0odGV4dCk7Cn0KZnVuY3Rpb24gZG9NYXRjaFJlZ0V4cChyZWdFeHAsIHRleHQpIHsKCXJldHVybiB0ZXh0Lm1hdGNoKHJlZ0V4cCk7Cn0KZnVuY3Rpb24gdG9SYW5nZXMocikgewoJY29uc3QgcmFuZ2VzID0gbmV3IFVpbnQzMkFycmF5KHIubWF0Y2hlcy5sZW5ndGggKiAyKTsKCWxldCBpID0gMDsKCWZvciAoY29uc3QgbSBvZiByLm1hdGNoZXMpIHsKCQljb25zdCBbc3RhcnQgPSAwLCBlbmQgPSAwXSA9IG1bMF07CgkJcmFuZ2VzW2krK10gPSBzdGFydDsKCQlyYW5nZXNbaSsrXSA9IGVuZDsKCX0KCXJldHVybiB7CgkJZWxhcHNlZFRpbWVNczogci5lbGFwc2VkVGltZU1zLAoJCXJhbmdlcwoJfTsKfQpmdW5jdGlvbiBtYXRjaEFsbFRvUmFuZ2VzUmVnRXhwKHRleHQsIHJlZ0V4cCkgewoJcmV0dXJuIHRvUmFuZ2VzKG1hdGNoQWxsUmVnRXhwKHRleHQsIHJlZ0V4cCkpOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy91dGlsL2Zvcm1hdC50cwpmdW5jdGlvbiBmb3JtYXQodmFsdWUpIHsKCWNvbnN0IHZpc2l0ZWQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwoJZnVuY3Rpb24gX2Zvcm1hdCh2YWx1ZSQxKSB7CgkJaWYgKHZpc2l0ZWQuaGFzKHZhbHVlJDEpKSByZXR1cm4gIltDaXJjdWxhcl0iOwoJCXZpc2l0ZWQuYWRkKHZhbHVlJDEpOwoJCXN3aXRjaCAodHlwZW9mIHZhbHVlJDEpIHsKCQkJY2FzZSAiYmlnaW50IjogcmV0dXJuIHZhbHVlJDEudG9TdHJpbmcoKSArICJuIjsKCQkJY2FzZSAic3ltYm9sIjogcmV0dXJuIHZhbHVlJDEudG9TdHJpbmcoKTsKCQkJY2FzZSAiZnVuY3Rpb24iOiByZXR1cm4gdmFsdWUkMS5uYW1lID8gYFtGdW5jdGlvbjogJHt2YWx1ZSQxLm5hbWV9XWAgOiAiW0Z1bmN0aW9uXSI7CgkJCWNhc2UgInVuZGVmaW5lZCI6IHJldHVybiAidW5kZWZpbmVkIjsKCQkJY2FzZSAib2JqZWN0IjogcmV0dXJuIG9ialRvU3RyaW5nKHZhbHVlJDEpOwoJCQljYXNlICJzdHJpbmciOiByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUkMSk7CgkJfQoJCXJldHVybiBTdHJpbmcodmFsdWUkMSk7Cgl9CglmdW5jdGlvbiBvYmpUb1N0cmluZyh2YWx1ZSQxKSB7CgkJdHJ5IHsKCQkJaWYgKHZhbHVlJDEgPT09IG51bGwpIHJldHVybiAibnVsbCI7CgkJCWlmICh2YWx1ZSQxIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiBgRXJyb3I6ICR7dmFsdWUkMS5tZXNzYWdlfVxuU3RhY2s6ICR7dmFsdWUkMS5zdGFja31gOwoJCQlpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSQxKSkgcmV0dXJuIGBbJHt2YWx1ZSQxLm1hcChfZm9ybWF0KS5qb2luKCIsICIpfV1gOwoJCQlpZiAoInRvU3RyaW5nIiBpbiB2YWx1ZSQxICYmIHR5cGVvZiB2YWx1ZSQxWyJ0b1N0cmluZyJdID09PSAiZnVuY3Rpb24iICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgIT09IHZhbHVlJDFbInRvU3RyaW5nIl0pIHJldHVybiB2YWx1ZSQxWyJ0b1N0cmluZyJdKCk7CgkJCWNvbnN0IHMgPSBPYmplY3QuZW50cmllcyh2YWx1ZSQxKS5tYXAoKFtrZXksIHZhbF0pID0+IGAke2tleX06ICR7X2Zvcm1hdCh2YWwpfWApLmpvaW4oIiwgIik7CgkJCXJldHVybiBgeyR7cyA/IGAgJHtzfSBgIDogIiJ9fWA7CgkJfSBjYXRjaCAoZSkgewoJCQlyZXR1cm4gU3RyaW5nKGUpOwoJCX0KCX0KCXJldHVybiBfZm9ybWF0KHZhbHVlKTsKfQoKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBzcmMvaGVscGVycy9lcnJvcnMudHMKY29uc3QgYWxsb3dTdHJpbmdPclVuZGVmaW5lZCA9IHsKCXN0cmluZzogdHJ1ZSwKCXVuZGVmaW5lZDogdHJ1ZQp9OwpmdW5jdGlvbiBpc0Vycm9yTGlrZShlKSB7CglpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gdHJ1ZTsKCWlmICghZSB8fCB0eXBlb2YgZSAhPT0gIm9iamVjdCIpIHJldHVybiBmYWxzZTsKCWNvbnN0IGV4ID0gZTsKCXJldHVybiB0eXBlb2YgZXgubmFtZSA9PSAic3RyaW5nIiAmJiB0eXBlb2YgZXgubWVzc2FnZSA9PSAic3RyaW5nIiAmJiB0eXBlb2YgZXguc3RhY2sgaW4gYWxsb3dTdHJpbmdPclVuZGVmaW5lZDsKfQpmdW5jdGlvbiB0b0Vycm9yKGUpIHsKCWlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiBlOwoJaWYgKGlzRXJyb3JMaWtlKGUpKSByZXR1cm4gbmV3IEVycm9yKGUubWVzc2FnZSB8fCAiVW5rbm93biBlcnJvciIsIHsgY2F1c2U6IGUgfSk7CglpZiAodHlwZW9mIGUgPT09ICJzdHJpbmciKSByZXR1cm4gbmV3IEVycm9yKGUpOwoJcmV0dXJuIG5ldyBFcnJvcihTdHJpbmcoZSksIHsgY2F1c2U6IGUgfSk7Cn0KCi8vI2VuZHJlZ2lvbgovLyNyZWdpb24gc3JjL1Byb2NlZHVyZXMvdW5pcXVlSWQudHMKbGV0IGlkID0gdHQoKVswXTsKZnVuY3Rpb24gdHQoKSB7Cgljb25zdCBuID0gcGVyZm9ybWFuY2Uubm93KCk7Cgljb25zdCBzID0gTWF0aC5mbG9vcihuIC8gMWUzKTsKCXJldHVybiBbcywgTWF0aC5mbG9vcigobiAtIHMgKiAxZTMpICogMWU2KV07Cn0KZnVuY3Rpb24gaXNJZCh2YWx1ZSkgewoJaWYgKHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgJiYgL15JRC1cZCstXGQrLVxkKy1cZCskLy50ZXN0KHZhbHVlKSkgewoJCWNvbnN0IFthLCBiLCBjLCBkXSA9IHZhbHVlLnNwbGl0KCItIikuc2xpY2UoMSkubWFwKCh2KSA9PiBOdW1iZXIucGFyc2VJbnQodiwgMTApKTsKCQlyZXR1cm4gYSA9PT0gYiAlIDEzICYmIGQgPT09IChiICsgYykgJSA3OwoJfQoJcmV0dXJuIGZhbHNlOwp9CmNvbnN0IE51bGxJRCA9ICJJRC0wLTAtMC0wIjsKCi8vI2VuZHJlZ2lvbgovLyNyZWdpb24gc3JjL1Byb2NlZHVyZXMvcHJvY2VkdXJlLnRzCmZ1bmN0aW9uIGlzUmVxdWVzdFR5cGUodiwgcmVxdWVzdFR5cGUpIHsKCXJldHVybiBpc1JlcXVlc3QodikgJiYgdi5yZXF1ZXN0VHlwZSA9PT0gcmVxdWVzdFR5cGU7Cn0KZnVuY3Rpb24gaXNSZXF1ZXN0KHYpIHsKCWlmICghdiB8fCB0eXBlb2YgdiAhPT0gIm9iamVjdCIpIHJldHVybiBmYWxzZTsKCWNvbnN0IHIgPSB2OwoJcmV0dXJuIHR5cGVvZiByLnJlcXVlc3RUeXBlID09PSAic3RyaW5nIiAmJiBpc0lkKHIuaWQpOwp9CmZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlKGlkJDEsIHJlc3BvbnNlVHlwZSwgZGF0YSkgewoJcmV0dXJuIHsKCQlpZDogaWQkMSwKCQl0aW1lc3RhbXA6IERhdGUubm93KCksCgkJcmVzcG9uc2VUeXBlLAoJCWRhdGEKCX07Cn0KY29uc3QgcmVzcG9uc2VUeXBlRXJyb3IgPSAiRXJyb3IiOwpmdW5jdGlvbiBjcmVhdGVFcnJvclJlc3BvbnNlKHJlcXVlc3QsIG1lc3NhZ2UsIGVycm9yKSB7CglpZiAoIWlzUmVxdWVzdChyZXF1ZXN0KSkgewoJCWNvbnN0IHIgPSByZXF1ZXN0ICYmIHR5cGVvZiByZXF1ZXN0ID09PSAib2JqZWN0IiA/IHJlcXVlc3QgOiB7fTsKCQljb25zdCBpZCQyID0gaXNJZChyLmlkKSA/IHIuaWQgOiBOdWxsSUQ7CgkJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKGlkJDIsIHJlc3BvbnNlVHlwZUVycm9yLCB7CgkJCXJlcXVlc3RUeXBlOiB0eXBlb2Ygci5yZXF1ZXN0VHlwZSA9PT0gInN0cmluZyIgPyByLnJlcXVlc3RUeXBlIDogdm9pZCAwLAoJCQltZXNzYWdlLAoJCQllcnJvcjogdG9FcnJvcihlcnJvcikKCQl9KTsKCX0KCWNvbnN0IHsgaWQ6IGlkJDEsIHJlcXVlc3RUeXBlIH0gPSByZXF1ZXN0OwoJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKGlkJDEsIHJlc3BvbnNlVHlwZUVycm9yLCB7CgkJcmVxdWVzdFR5cGUsCgkJbWVzc2FnZSwKCQllcnJvcjogdG9FcnJvcihlcnJvcikKCX0pOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy9Qcm9jZWR1cmVzL3Byb2NFeGVjUmVnRXhwLnRzCmNvbnN0IHJlcXVlc3RUeXBlRXhlY1JlZ0V4cCA9ICJFeGVjUmVnRXhwIjsKZnVuY3Rpb24gaXNFeGVjUmVnRXhwUmVxdWVzdCh2KSB7CglyZXR1cm4gaXNSZXF1ZXN0VHlwZSh2LCByZXF1ZXN0VHlwZUV4ZWNSZWdFeHApOwp9CmZ1bmN0aW9uIHByb2NFeGVjUmVnRXhwKHIpIHsKCWlmICghaXNFeGVjUmVnRXhwUmVxdWVzdChyKSkgcmV0dXJuIHZvaWQgMDsKCXRyeSB7CgkJY29uc3QgcmVnZXggPSB0b1JlZ0V4cChyLmRhdGEucmVnZXhwKTsKCQlyZXR1cm4gY3JlYXRlUmVzcG9uc2VFeGVjUmVnRXhwKHIsIGV4ZWNSZWdFeHAocmVnZXgsIHIuZGF0YS50ZXh0KSk7Cgl9IGNhdGNoIChlKSB7CgkJcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UociwgZm9ybWF0KGUpKTsKCX0KfQpmdW5jdGlvbiBjcmVhdGVSZXNwb25zZUV4ZWNSZWdFeHAocmVxdWVzdCwgZGF0YSkgewoJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKHJlcXVlc3QuaWQsIHJlcXVlc3QucmVxdWVzdFR5cGUsIGRhdGEpOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy9Qcm9jZWR1cmVzL3Byb2NNYXRjaEFsbFJlZ0V4cC50cwpjb25zdCByZXF1ZXN0VHlwZU1hdGNoQWxsUmVnRXhwID0gIk1hdGNoQWxsUmVnRXhwIjsKZnVuY3Rpb24gaXNNYXRjaEFsbFJlZ0V4cFJlcXVlc3QodikgewoJcmV0dXJuIGlzUmVxdWVzdFR5cGUodiwgcmVxdWVzdFR5cGVNYXRjaEFsbFJlZ0V4cCk7Cn0KZnVuY3Rpb24gcHJvY01hdGNoQWxsUmVnRXhwKHIpIHsKCWlmICghaXNNYXRjaEFsbFJlZ0V4cFJlcXVlc3QocikpIHJldHVybiB2b2lkIDA7Cgl0cnkgewoJCWNvbnN0IHJlZ2V4ID0gdG9SZWdFeHAoci5kYXRhLnJlZ2V4cCk7CgkJY29uc3QgcmVnZXhSZXN1bHQgPSBtYXRjaEFsbFJlZ0V4cChyLmRhdGEudGV4dCwgcmVnZXgpOwoJCXJldHVybiBjcmVhdGVSZXNwb25zZU1hdGNoQWxsUmVnRXhwKHIsIHJlZ2V4UmVzdWx0KTsKCX0gY2F0Y2ggKGUpIHsKCQlyZXR1cm4gY3JlYXRlRXJyb3JSZXNwb25zZShyLCBmb3JtYXQoZSkpOwoJfQp9CmZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlTWF0Y2hBbGxSZWdFeHAocmVxdWVzdCwgZGF0YSkgewoJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKHJlcXVlc3QuaWQsIHJlcXVlc3QucmVxdWVzdFR5cGUsIGRhdGEpOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy9Qcm9jZWR1cmVzL3Byb2NNYXRjaEFsbFJlZ0V4cEFycmF5LnRzCmNvbnN0IHJlcXVlc3RUeXBlTWF0Y2hSZWdFeHBBcnJheSA9ICJNYXRjaEFsbFJlZ0V4cEFycmF5IjsKZnVuY3Rpb24gaXNNYXRjaFJlZ0V4cEFycmF5UmVxdWVzdCh2KSB7CglyZXR1cm4gaXNSZXF1ZXN0VHlwZSh2LCByZXF1ZXN0VHlwZU1hdGNoUmVnRXhwQXJyYXkpOwp9CmZ1bmN0aW9uIHByb2NNYXRjaEFsbFJlZ0V4cEFycmF5KHIpIHsKCWlmICghaXNNYXRjaFJlZ0V4cEFycmF5UmVxdWVzdChyKSkgcmV0dXJuIHZvaWQgMDsKCXRyeSB7CgkJY29uc3QgcmVnZXggPSByLmRhdGEucmVnZXhwcy5tYXAoKHIkMSkgPT4gdG9SZWdFeHAociQxKSk7CgkJY29uc3QgcmVnZXhSZXN1bHQgPSBtYXRjaEFsbFJlZ0V4cEFycmF5KHIuZGF0YS50ZXh0LCByZWdleCk7CgkJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlTWF0Y2hSZWdFeHBBcnJheShyLCByZWdleFJlc3VsdCk7Cgl9IGNhdGNoIChlKSB7CgkJcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UociwgZm9ybWF0KGUpKTsKCX0KfQpmdW5jdGlvbiBjcmVhdGVSZXNwb25zZU1hdGNoUmVnRXhwQXJyYXkocmVxdWVzdCwgZGF0YSkgewoJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKHJlcXVlc3QuaWQsIHJlcXVlc3QucmVxdWVzdFR5cGUsIGRhdGEpOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy9Qcm9jZWR1cmVzL3Byb2NNYXRjaEFsbFJlZ0V4cEFzUmFuZ2UudHMKY29uc3QgcmVxdWVzdFR5cGVNYXRjaEFsbFJlZ0V4cEFzUmFuZ2UgPSAiTWF0Y2hBbGxSZWdFeHBBc1JhbmdlIjsKZnVuY3Rpb24gaXNNYXRjaEFsbFJlZ0V4cEFzUmFuZ2VSZXF1ZXN0KHYpIHsKCXJldHVybiBpc1JlcXVlc3RUeXBlKHYsIHJlcXVlc3RUeXBlTWF0Y2hBbGxSZWdFeHBBc1JhbmdlKTsKfQpmdW5jdGlvbiBwcm9jTWF0Y2hBbGxSZWdFeHBBc1JhbmdlKHIpIHsKCWlmICghaXNNYXRjaEFsbFJlZ0V4cEFzUmFuZ2VSZXF1ZXN0KHIpKSByZXR1cm4gdm9pZCAwOwoJdHJ5IHsKCQljb25zdCByZWdleCA9IHRvUmVnRXhwKHIuZGF0YS5yZWdleHApOwoJCWNvbnN0IHJlZ2V4UmVzdWx0ID0gbWF0Y2hBbGxUb1Jhbmdlc1JlZ0V4cChyLmRhdGEudGV4dCwgcmVnZXgpOwoJCXJldHVybiBjcmVhdGVSZXNwb25zZU1hdGNoQWxsUmVnRXhwQXNSYW5nZShyLCByZWdleFJlc3VsdCk7Cgl9IGNhdGNoIChlKSB7CgkJcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UociwgZm9ybWF0KGUpKTsKCX0KfQpmdW5jdGlvbiBjcmVhdGVSZXNwb25zZU1hdGNoQWxsUmVnRXhwQXNSYW5nZShyZXF1ZXN0LCBkYXRhKSB7CglyZXR1cm4gY3JlYXRlUmVzcG9uc2UocmVxdWVzdC5pZCwgcmVxdWVzdC5yZXF1ZXN0VHlwZSwgZGF0YSk7Cn0KCi8vI2VuZHJlZ2lvbgovLyNyZWdpb24gc3JjL1Byb2NlZHVyZXMvcHJvY01hdGNoUmVnRXhwLnRzCmNvbnN0IHJlcXVlc3RUeXBlTWF0Y2hSZWdFeHAgPSAiTWF0Y2hSZWdFeHAiOwpmdW5jdGlvbiBpc01hdGNoUmVnRXhwUmVxdWVzdCh2KSB7CglyZXR1cm4gaXNSZXF1ZXN0VHlwZSh2LCByZXF1ZXN0VHlwZU1hdGNoUmVnRXhwKTsKfQpmdW5jdGlvbiBwcm9jTWF0Y2hSZWdFeHAocikgewoJaWYgKCFpc01hdGNoUmVnRXhwUmVxdWVzdChyKSkgcmV0dXJuIHZvaWQgMDsKCXRyeSB7CgkJY29uc3QgcmVnZXggPSB0b1JlZ0V4cChyLmRhdGEucmVnZXhwKTsKCQljb25zdCByZWdleFJlc3VsdCA9IG1hdGNoUmVnRXhwKHIuZGF0YS50ZXh0LCByZWdleCk7CgkJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlTWF0Y2hSZWdFeHAociwgcmVnZXhSZXN1bHQpOwoJfSBjYXRjaCAoZSkgewoJCXJldHVybiBjcmVhdGVFcnJvclJlc3BvbnNlKHIsIGZvcm1hdChlKSk7Cgl9Cn0KZnVuY3Rpb24gY3JlYXRlUmVzcG9uc2VNYXRjaFJlZ0V4cChyZXF1ZXN0LCBkYXRhKSB7CglyZXR1cm4gY3JlYXRlUmVzcG9uc2UocmVxdWVzdC5pZCwgcmVxdWVzdC5yZXF1ZXN0VHlwZSwgZGF0YSk7Cn0KCi8vI2VuZHJlZ2lvbgovLyNyZWdpb24gc3JjL1Byb2NlZHVyZXMvcHJvY2VkdXJlcy50cwovKioKKiBDb2xsZWN0aW9uIG9mIGFsbCBwcm9jZWR1cmVzIHJlbGF0ZWQgdG8gcmVndWxhciBleHByZXNzaW9ucy4KKiBPcmRlciBpcyBpbXBvcnRhbnQgZm9yIHRoZSB3b3JrZXIsIGFzIGl0IHByb2Nlc3NlcyB0aGVtIHNlcXVlbnRpYWxseS4KKi8KY29uc3QgcHJvY2VkdXJlcyA9IFsKCXByb2NNYXRjaEFsbFJlZ0V4cCwKCXByb2NNYXRjaEFsbFJlZ0V4cEFzUmFuZ2UsCglwcm9jRXhlY1JlZ0V4cCwKCXByb2NNYXRjaEFsbFJlZ0V4cEFycmF5LAoJcHJvY01hdGNoUmVnRXhwCl07CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy93b3JrZXIvTG9nTGV2ZWwudHMKbGV0IExvZ0xldmVsID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKExvZ0xldmVsJDEpIHsKCUxvZ0xldmVsJDFbTG9nTGV2ZWwkMVsiTG9nTGV2ZWxOb25lIl0gPSAwXSA9ICJMb2dMZXZlbE5vbmUiOwoJTG9nTGV2ZWwkMVtMb2dMZXZlbCQxWyJMb2dMZXZlbEVycm9yIl0gPSAxXSA9ICJMb2dMZXZlbEVycm9yIjsKCUxvZ0xldmVsJDFbTG9nTGV2ZWwkMVsiTG9nTGV2ZWxXYXJuIl0gPSAyXSA9ICJMb2dMZXZlbFdhcm4iOwoJTG9nTGV2ZWwkMVtMb2dMZXZlbCQxWyJMb2dMZXZlbEluZm8iXSA9IDNdID0gIkxvZ0xldmVsSW5mbyI7CglMb2dMZXZlbCQxW0xvZ0xldmVsJDFbIkxvZ0xldmVsRGVidWciXSA9IDRdID0gIkxvZ0xldmVsRGVidWciOwoJcmV0dXJuIExvZ0xldmVsJDE7Cn0oe30pOwoKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBzcmMvd29ya2VyL01lc3NhZ2VQb3J0LnRzCmNvbnN0IG51bGxQb3J0ID0gT2JqZWN0LmZyZWV6ZSh7Cglwb3N0TWVzc2FnZSgpIHt9LAoJb24oKSB7CgkJcmV0dXJuIG51bGxQb3J0OwoJfSwKCW9mZigpIHsKCQlyZXR1cm4gbnVsbFBvcnQ7Cgl9LAoJb25jZSgpIHsKCQlyZXR1cm4gbnVsbFBvcnQ7Cgl9Cn0pOwoKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBzcmMvd29ya2VyL1dvcmtlck1lc3NhZ2VIYW5kbGVyLnRzCnZhciBXb3JrZXJNZXNzYWdlSGFuZGxlciA9IGNsYXNzIHsKCWxvZ0xldmVsID0gTG9nTGV2ZWwuTG9nTGV2ZWxFcnJvcjsKCWxpc3RlbmVyOwoJY29uc3RydWN0b3IocG9ydCwgcHJvY2VkdXJlcyQxKSB7CgkJdGhpcy5wb3J0ID0gcG9ydDsKCQl0aGlzLnByb2NlZHVyZXMgPSBwcm9jZWR1cmVzJDE7CgkJdGhpcy5saXN0ZW5lciA9ICh2KSA9PiB0aGlzLmxpc3RlbmVyTWVzc2FnZSh2KTsKCQlwb3J0Lm9uKCJtZXNzYWdlIiwgdGhpcy5saXN0ZW5lcik7Cgl9CglkaXNwb3NlKCkgewoJCXRoaXMucG9ydC5vZmYoIm1lc3NhZ2UiLCB0aGlzLmxpc3RlbmVyKTsKCQl0aGlzLnBvcnQgPSBudWxsUG9ydDsKCX0KCXBvc3QobXNnKSB7CgkJdGhpcy5sb2coTG9nTGV2ZWwuTG9nTGV2ZWxEZWJ1ZywgIlBvc3Q6ICIgKyBKU09OLnN0cmluZ2lmeShtc2cpKTsKCQl0aGlzLnBvcnQucG9zdE1lc3NhZ2UobXNnKTsKCX0KCWxvZyhsZXZlbCwgLi4ucGFyYW1zKSB7CgkJaWYgKGxldmVsID4gdGhpcy5sb2dMZXZlbCkgcmV0dXJuOwoJCXN3aXRjaCAobGV2ZWwpIHsKCQkJY2FzZSBMb2dMZXZlbC5Mb2dMZXZlbEVycm9yOgoJCQkJY29uc29sZS5lcnJvciguLi5wYXJhbXMpOwoJCQkJYnJlYWs7CgkJCWNhc2UgTG9nTGV2ZWwuTG9nTGV2ZWxXYXJuOgoJCQkJY29uc29sZS53YXJuKC4uLnBhcmFtcyk7CgkJCQlicmVhazsKCQkJZGVmYXVsdDogY29uc29sZS5sb2coLi4ucGFyYW1zKTsKCQl9Cgl9CglsaXN0ZW5lck1lc3NhZ2UodmFsdWUpIHsKCQl0aGlzLmxvZyhMb2dMZXZlbC5Mb2dMZXZlbERlYnVnLCBgbWVzc2FnZTogJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YCk7CgkJaWYgKCFpc1JlcXVlc3QodmFsdWUpKSB7CgkJCWNvbnN0IG1zZyA9IGBCYWRseSBmb3JtZWQgUmVxdWVzdDogJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YDsKCQkJdGhpcy5sb2coTG9nTGV2ZWwuTG9nTGV2ZWxFcnJvciwgbXNnKTsKCQkJdGhpcy5wb3N0KGNyZWF0ZUVycm9yUmVzcG9uc2UodmFsdWUsIG1zZykpOwoJCQlyZXR1cm47CgkJfQoJCWNvbnN0IHJlcXVlc3QgPSB2YWx1ZTsKCQlmb3IgKGNvbnN0IHByb2Mgb2YgdGhpcy5wcm9jZWR1cmVzKSB0cnkgewoJCQljb25zdCByZXNwb25zZSA9IHByb2MocmVxdWVzdCk7CgkJCWlmIChyZXNwb25zZSAhPT0gdm9pZCAwKSB7CgkJCQlQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpLmNhdGNoKChyZWFzb24pID0+IGNyZWF0ZUVycm9yUmVzcG9uc2UocmVxdWVzdCwgU3RyaW5nKHJlYXNvbiksIHRvRXJyb3IocmVhc29uKSkpLnRoZW4oKHIpID0+IHRoaXMucG9zdChyKSkuY2F0Y2goKCkgPT4ge30pOwoJCQkJcmV0dXJuOwoJCQl9CgkJfSBjYXRjaCAoZSkgewoJCQljb25zdCBtc2cgPSBpc0Vycm9yTGlrZShlKSA/IGUubWVzc2FnZSA6IGZvcm1hdChlKTsKCQkJdGhpcy5wb3N0KGNyZWF0ZUVycm9yUmVzcG9uc2UocmVxdWVzdCwgbXNnLCBpc0Vycm9yTGlrZShlKSA/IGUgOiB2b2lkIDApKTsKCQkJcmV0dXJuOwoJCX0KCQl0aGlzLmxvZyhMb2dMZXZlbC5Mb2dMZXZlbFdhcm4sIGBVbmhhbmRsZWQgUmVxdWVzdCAiJHt2YWx1ZS5yZXF1ZXN0VHlwZX0iYCk7CgkJdGhpcy5wb3N0KGNyZWF0ZUVycm9yUmVzcG9uc2UocmVxdWVzdCwgIlVuaGFuZGxlZCBSZXF1ZXN0IikpOwoJfQp9OwpmdW5jdGlvbiBjcmVhdGVIYW5kbGVyKHBvcnQsIHByb2NlZHVyZXMkMSkgewoJcmV0dXJuIG5ldyBXb3JrZXJNZXNzYWdlSGFuZGxlcihwb3J0LCBwcm9jZWR1cmVzJDEpOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy93b3JrZXIvd29ya2VyQ29kZU5vZGUudHMKaWYgKCFpc01haW5UaHJlYWQgJiYgcGFyZW50UG9ydCkgewoJY29uc3QgaGFuZGxlciA9IGNyZWF0ZUhhbmRsZXIocGFyZW50UG9ydCwgcHJvY2VkdXJlcyk7CglwYXJlbnRQb3J0Lm9uY2UoImNsb3NlIiwgKCkgPT4gaGFuZGxlci5kaXNwb3NlKCkpOwp9CgovLyNlbmRyZWdpb24=`,qt=new URL(`data:application/javascript;base64,aW1wb3J0IHsgaXNNYWluVGhyZWFkLCBwYXJlbnRQb3J0IH0gZnJvbSAid29ya2VyX3RocmVhZHMiOwoKLy8jcmVnaW9uIHNyYy90aW1lci50cwpmdW5jdGlvbiBtZWFzdXJlRXhlY3V0aW9uKGZuKSB7Cgljb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwoJY29uc3QgciA9IGZuKCk7CglyZXR1cm4gewoJCWVsYXBzZWRUaW1lTXM6IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQsCgkJcgoJfTsKfQoKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBzcmMvaGVscGVycy9ldmFsdWF0ZVJlZ0V4cC50cwovKioKKiBSZXR1cm5zIGEgdGltZWQgdmVyc2lvbiBvZiBTdHJpbmcucHJvdG90eXBlLm1hdGNoQWxsCiogQHBhcmFtIHRleHQKKiBAcGFyYW0gcmVnRXhwCiogQHJldHVybnMKKi8KZnVuY3Rpb24gbWF0Y2hBbGxSZWdFeHAodGV4dCwgcmVnRXhwKSB7Cgljb25zdCB7IGVsYXBzZWRUaW1lTXMsIHIgfSA9IG1lYXN1cmVFeGVjdXRpb24oKCkgPT4gQXJyYXkuZnJvbShkb01hdGNoQWxsUmVnRXhwKHJlZ0V4cCwgdGV4dCkpLm1hcCgobSkgPT4gbS5pbmRpY2VzIHx8IFtdKSk7CglyZXR1cm4gewoJCWVsYXBzZWRUaW1lTXMsCgkJbWF0Y2hlczogcgoJfTsKfQovKioKKiBSZXR1cm5zIGEgdGltZWQgdmVyc2lvbiBvZiBSZWdFeHAuZXhlYwoqIEBwYXJhbSByZWdFeHAKKiBAcGFyYW0gdGV4dAoqIEByZXR1cm5zCiovCmZ1bmN0aW9uIGV4ZWNSZWdFeHAocmVnRXhwLCB0ZXh0KSB7Cgljb25zdCB7IGVsYXBzZWRUaW1lTXMsIHI6IG1hdGNoIH0gPSBtZWFzdXJlRXhlY3V0aW9uKCgpID0+IGRvRXhlY1JlZ0V4cChyZWdFeHAsIHRleHQpKTsKCXJldHVybiB7CgkJZWxhcHNlZFRpbWVNcywKCQlsYXN0SW5kZXg6IHJlZ0V4cC5sYXN0SW5kZXgsCgkJbWF0Y2gKCX07Cn0KLyoqCiogUmV0dXJucyBhIHRpbWVkIHZlcnNpb24gb2YgU3RyaW5nLnByb3RvdHlwZS5tYXRjaAoqIEBwYXJhbSB0ZXh0CiogQHBhcmFtIHJlZ0V4cAoqIEByZXR1cm5zCiovCmZ1bmN0aW9uIG1hdGNoUmVnRXhwKHRleHQsIHJlZ0V4cCkgewoJY29uc3QgeyBlbGFwc2VkVGltZU1zLCByOiBtYXRjaCB9ID0gbWVhc3VyZUV4ZWN1dGlvbigoKSA9PiBkb01hdGNoUmVnRXhwKHJlZ0V4cCwgdGV4dCkpOwoJcmV0dXJuIHsKCQllbGFwc2VkVGltZU1zLAoJCWxhc3RJbmRleDogcmVnRXhwLmxhc3RJbmRleCwKCQltYXRjaAoJfTsKfQovKioKKiBSZXR1cm5zIGEgdGltZWQgdmVyc2lvbiBvZiBtYXRjaEFsbFJlZ0V4cCBmb3IgYW4gYXJyYXkgb2YgcmVndWxhciBleHByZXNzaW9ucwoqIEBwYXJhbSB0ZXh0CiogQHBhcmFtIHJlZ0V4cEFycmF5CiogQHJldHVybnMKKi8KZnVuY3Rpb24gbWF0Y2hBbGxSZWdFeHBBcnJheSh0ZXh0LCByZWdFeHBBcnJheSkgewoJY29uc3QgeyBlbGFwc2VkVGltZU1zLCByOiByZXN1bHRzIH0gPSBtZWFzdXJlRXhlY3V0aW9uKCgpID0+IHsKCQlyZXR1cm4gcmVnRXhwQXJyYXkubWFwKChyKSA9PiBtYXRjaEFsbFJlZ0V4cCh0ZXh0LCByKSk7Cgl9KTsKCXJldHVybiB7CgkJZWxhcHNlZFRpbWVNcywKCQlyZXN1bHRzCgl9Owp9Ci8qKgoqIENvbnZlcnRzIGEgUmVnRXhwIG9yIFJlZ0V4cExpa2Ugb2JqZWN0IHRvIGEgUmVnRXhwIG9iamVjdC4KKiBJZiB0aGUgaW5wdXQgaXMgYSBSZWdFeHAsIGl0IGlzIHJldHVybmVkIGFzIGlzLgoqIElmIHRoZSBpbnB1dCBpcyBhIFJlZ0V4cExpa2Ugb2JqZWN0LCBpdCBzaG91bGQgaGF2ZSBgc291cmNlYCBhbmQgYGZsYWdzYCBwcm9wZXJ0aWVzLgoqIFRoZSBgeGAgZmxhZyBpcyBOT1Qgc3VwcG9ydGVkIGFuZCB3aWxsIHRocm93IGFuIGVycm9yIGlmIHByZXNlbnQuCiogQHBhcmFtIHJlZ2V4cAoqIEBwYXJhbSBkZWZhdWx0RmxhZ3MKKiBAcmV0dXJucwoqLwpmdW5jdGlvbiB0b1JlZ0V4cChyZWdleHApIHsKCWlmIChyZWdleHAgaW5zdGFuY2VvZiBSZWdFeHApIHJldHVybiByZWdleHA7Cgljb25zdCB7IHNvdXJjZSwgZmxhZ3MgfSA9IHJlZ2V4cDsKCWlmICh0eXBlb2Ygc291cmNlICE9PSAic3RyaW5nIikgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBSZWdFeHAuIik7Cgljb25zdCByZWcgPSBuZXcgUmVnRXhwKHNvdXJjZSwgZmxhZ3MpOwoJaWYgKHJlZ2V4cC5sYXN0SW5kZXggIT09IHZvaWQgMCkgcmVnLmxhc3RJbmRleCA9IHJlZ2V4cC5sYXN0SW5kZXg7CglyZXR1cm4gcmVnOwp9CmZ1bmN0aW9uIGRvRXhlY1JlZ0V4cChyZWdFeHAsIHRleHQpIHsKCXJldHVybiByZWdFeHAuZXhlYyh0ZXh0KTsKfQpmdW5jdGlvbiBkb01hdGNoQWxsUmVnRXhwKHJlZ0V4cCwgdGV4dCkgewoJcmVnRXhwID0gcmVnRXhwLmhhc0luZGljZXMgPyByZWdFeHAgOiBuZXcgUmVnRXhwKHJlZ0V4cC5zb3VyY2UsIHJlZ0V4cC5mbGFncyArICJkIik7CglyZXR1cm4gcmVnRXhwW1N5bWJvbC5tYXRjaEFsbF0odGV4dCk7Cn0KZnVuY3Rpb24gZG9NYXRjaFJlZ0V4cChyZWdFeHAsIHRleHQpIHsKCXJldHVybiB0ZXh0Lm1hdGNoKHJlZ0V4cCk7Cn0KZnVuY3Rpb24gdG9SYW5nZXMocikgewoJY29uc3QgcmFuZ2VzID0gbmV3IFVpbnQzMkFycmF5KHIubWF0Y2hlcy5sZW5ndGggKiAyKTsKCWxldCBpID0gMDsKCWZvciAoY29uc3QgbSBvZiByLm1hdGNoZXMpIHsKCQljb25zdCBbc3RhcnQgPSAwLCBlbmQgPSAwXSA9IG1bMF07CgkJcmFuZ2VzW2krK10gPSBzdGFydDsKCQlyYW5nZXNbaSsrXSA9IGVuZDsKCX0KCXJldHVybiB7CgkJZWxhcHNlZFRpbWVNczogci5lbGFwc2VkVGltZU1zLAoJCXJhbmdlcwoJfTsKfQpmdW5jdGlvbiBtYXRjaEFsbFRvUmFuZ2VzUmVnRXhwKHRleHQsIHJlZ0V4cCkgewoJcmV0dXJuIHRvUmFuZ2VzKG1hdGNoQWxsUmVnRXhwKHRleHQsIHJlZ0V4cCkpOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy91dGlsL2Zvcm1hdC50cwpmdW5jdGlvbiBmb3JtYXQodmFsdWUpIHsKCWNvbnN0IHZpc2l0ZWQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwoJZnVuY3Rpb24gX2Zvcm1hdCh2YWx1ZSQxKSB7CgkJaWYgKHZpc2l0ZWQuaGFzKHZhbHVlJDEpKSByZXR1cm4gIltDaXJjdWxhcl0iOwoJCXZpc2l0ZWQuYWRkKHZhbHVlJDEpOwoJCXN3aXRjaCAodHlwZW9mIHZhbHVlJDEpIHsKCQkJY2FzZSAiYmlnaW50IjogcmV0dXJuIHZhbHVlJDEudG9TdHJpbmcoKSArICJuIjsKCQkJY2FzZSAic3ltYm9sIjogcmV0dXJuIHZhbHVlJDEudG9TdHJpbmcoKTsKCQkJY2FzZSAiZnVuY3Rpb24iOiByZXR1cm4gdmFsdWUkMS5uYW1lID8gYFtGdW5jdGlvbjogJHt2YWx1ZSQxLm5hbWV9XWAgOiAiW0Z1bmN0aW9uXSI7CgkJCWNhc2UgInVuZGVmaW5lZCI6IHJldHVybiAidW5kZWZpbmVkIjsKCQkJY2FzZSAib2JqZWN0IjogcmV0dXJuIG9ialRvU3RyaW5nKHZhbHVlJDEpOwoJCQljYXNlICJzdHJpbmciOiByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUkMSk7CgkJfQoJCXJldHVybiBTdHJpbmcodmFsdWUkMSk7Cgl9CglmdW5jdGlvbiBvYmpUb1N0cmluZyh2YWx1ZSQxKSB7CgkJdHJ5IHsKCQkJaWYgKHZhbHVlJDEgPT09IG51bGwpIHJldHVybiAibnVsbCI7CgkJCWlmICh2YWx1ZSQxIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiBgRXJyb3I6ICR7dmFsdWUkMS5tZXNzYWdlfVxuU3RhY2s6ICR7dmFsdWUkMS5zdGFja31gOwoJCQlpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSQxKSkgcmV0dXJuIGBbJHt2YWx1ZSQxLm1hcChfZm9ybWF0KS5qb2luKCIsICIpfV1gOwoJCQlpZiAoInRvU3RyaW5nIiBpbiB2YWx1ZSQxICYmIHR5cGVvZiB2YWx1ZSQxWyJ0b1N0cmluZyJdID09PSAiZnVuY3Rpb24iICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgIT09IHZhbHVlJDFbInRvU3RyaW5nIl0pIHJldHVybiB2YWx1ZSQxWyJ0b1N0cmluZyJdKCk7CgkJCWNvbnN0IHMgPSBPYmplY3QuZW50cmllcyh2YWx1ZSQxKS5tYXAoKFtrZXksIHZhbF0pID0+IGAke2tleX06ICR7X2Zvcm1hdCh2YWwpfWApLmpvaW4oIiwgIik7CgkJCXJldHVybiBgeyR7cyA/IGAgJHtzfSBgIDogIiJ9fWA7CgkJfSBjYXRjaCAoZSkgewoJCQlyZXR1cm4gU3RyaW5nKGUpOwoJCX0KCX0KCXJldHVybiBfZm9ybWF0KHZhbHVlKTsKfQoKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBzcmMvaGVscGVycy9lcnJvcnMudHMKY29uc3QgYWxsb3dTdHJpbmdPclVuZGVmaW5lZCA9IHsKCXN0cmluZzogdHJ1ZSwKCXVuZGVmaW5lZDogdHJ1ZQp9OwpmdW5jdGlvbiBpc0Vycm9yTGlrZShlKSB7CglpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gdHJ1ZTsKCWlmICghZSB8fCB0eXBlb2YgZSAhPT0gIm9iamVjdCIpIHJldHVybiBmYWxzZTsKCWNvbnN0IGV4ID0gZTsKCXJldHVybiB0eXBlb2YgZXgubmFtZSA9PSAic3RyaW5nIiAmJiB0eXBlb2YgZXgubWVzc2FnZSA9PSAic3RyaW5nIiAmJiB0eXBlb2YgZXguc3RhY2sgaW4gYWxsb3dTdHJpbmdPclVuZGVmaW5lZDsKfQpmdW5jdGlvbiB0b0Vycm9yKGUpIHsKCWlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiBlOwoJaWYgKGlzRXJyb3JMaWtlKGUpKSByZXR1cm4gbmV3IEVycm9yKGUubWVzc2FnZSB8fCAiVW5rbm93biBlcnJvciIsIHsgY2F1c2U6IGUgfSk7CglpZiAodHlwZW9mIGUgPT09ICJzdHJpbmciKSByZXR1cm4gbmV3IEVycm9yKGUpOwoJcmV0dXJuIG5ldyBFcnJvcihTdHJpbmcoZSksIHsgY2F1c2U6IGUgfSk7Cn0KCi8vI2VuZHJlZ2lvbgovLyNyZWdpb24gc3JjL1Byb2NlZHVyZXMvdW5pcXVlSWQudHMKbGV0IGlkID0gdHQoKVswXTsKZnVuY3Rpb24gdHQoKSB7Cgljb25zdCBuID0gcGVyZm9ybWFuY2Uubm93KCk7Cgljb25zdCBzID0gTWF0aC5mbG9vcihuIC8gMWUzKTsKCXJldHVybiBbcywgTWF0aC5mbG9vcigobiAtIHMgKiAxZTMpICogMWU2KV07Cn0KZnVuY3Rpb24gaXNJZCh2YWx1ZSkgewoJaWYgKHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgJiYgL15JRC1cZCstXGQrLVxkKy1cZCskLy50ZXN0KHZhbHVlKSkgewoJCWNvbnN0IFthLCBiLCBjLCBkXSA9IHZhbHVlLnNwbGl0KCItIikuc2xpY2UoMSkubWFwKCh2KSA9PiBOdW1iZXIucGFyc2VJbnQodiwgMTApKTsKCQlyZXR1cm4gYSA9PT0gYiAlIDEzICYmIGQgPT09IChiICsgYykgJSA3OwoJfQoJcmV0dXJuIGZhbHNlOwp9CmNvbnN0IE51bGxJRCA9ICJJRC0wLTAtMC0wIjsKCi8vI2VuZHJlZ2lvbgovLyNyZWdpb24gc3JjL1Byb2NlZHVyZXMvcHJvY2VkdXJlLnRzCmZ1bmN0aW9uIGlzUmVxdWVzdFR5cGUodiwgcmVxdWVzdFR5cGUpIHsKCXJldHVybiBpc1JlcXVlc3QodikgJiYgdi5yZXF1ZXN0VHlwZSA9PT0gcmVxdWVzdFR5cGU7Cn0KZnVuY3Rpb24gaXNSZXF1ZXN0KHYpIHsKCWlmICghdiB8fCB0eXBlb2YgdiAhPT0gIm9iamVjdCIpIHJldHVybiBmYWxzZTsKCWNvbnN0IHIgPSB2OwoJcmV0dXJuIHR5cGVvZiByLnJlcXVlc3RUeXBlID09PSAic3RyaW5nIiAmJiBpc0lkKHIuaWQpOwp9CmZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlKGlkJDEsIHJlc3BvbnNlVHlwZSwgZGF0YSkgewoJcmV0dXJuIHsKCQlpZDogaWQkMSwKCQl0aW1lc3RhbXA6IERhdGUubm93KCksCgkJcmVzcG9uc2VUeXBlLAoJCWRhdGEKCX07Cn0KY29uc3QgcmVzcG9uc2VUeXBlRXJyb3IgPSAiRXJyb3IiOwpmdW5jdGlvbiBjcmVhdGVFcnJvclJlc3BvbnNlKHJlcXVlc3QsIG1lc3NhZ2UsIGVycm9yKSB7CglpZiAoIWlzUmVxdWVzdChyZXF1ZXN0KSkgewoJCWNvbnN0IHIgPSByZXF1ZXN0ICYmIHR5cGVvZiByZXF1ZXN0ID09PSAib2JqZWN0IiA/IHJlcXVlc3QgOiB7fTsKCQljb25zdCBpZCQyID0gaXNJZChyLmlkKSA/IHIuaWQgOiBOdWxsSUQ7CgkJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKGlkJDIsIHJlc3BvbnNlVHlwZUVycm9yLCB7CgkJCXJlcXVlc3RUeXBlOiB0eXBlb2Ygci5yZXF1ZXN0VHlwZSA9PT0gInN0cmluZyIgPyByLnJlcXVlc3RUeXBlIDogdm9pZCAwLAoJCQltZXNzYWdlLAoJCQllcnJvcjogdG9FcnJvcihlcnJvcikKCQl9KTsKCX0KCWNvbnN0IHsgaWQ6IGlkJDEsIHJlcXVlc3RUeXBlIH0gPSByZXF1ZXN0OwoJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKGlkJDEsIHJlc3BvbnNlVHlwZUVycm9yLCB7CgkJcmVxdWVzdFR5cGUsCgkJbWVzc2FnZSwKCQllcnJvcjogdG9FcnJvcihlcnJvcikKCX0pOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy9Qcm9jZWR1cmVzL3Byb2NFeGVjUmVnRXhwLnRzCmNvbnN0IHJlcXVlc3RUeXBlRXhlY1JlZ0V4cCA9ICJFeGVjUmVnRXhwIjsKZnVuY3Rpb24gaXNFeGVjUmVnRXhwUmVxdWVzdCh2KSB7CglyZXR1cm4gaXNSZXF1ZXN0VHlwZSh2LCByZXF1ZXN0VHlwZUV4ZWNSZWdFeHApOwp9CmZ1bmN0aW9uIHByb2NFeGVjUmVnRXhwKHIpIHsKCWlmICghaXNFeGVjUmVnRXhwUmVxdWVzdChyKSkgcmV0dXJuIHZvaWQgMDsKCXRyeSB7CgkJY29uc3QgcmVnZXggPSB0b1JlZ0V4cChyLmRhdGEucmVnZXhwKTsKCQlyZXR1cm4gY3JlYXRlUmVzcG9uc2VFeGVjUmVnRXhwKHIsIGV4ZWNSZWdFeHAocmVnZXgsIHIuZGF0YS50ZXh0KSk7Cgl9IGNhdGNoIChlKSB7CgkJcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UociwgZm9ybWF0KGUpKTsKCX0KfQpmdW5jdGlvbiBjcmVhdGVSZXNwb25zZUV4ZWNSZWdFeHAocmVxdWVzdCwgZGF0YSkgewoJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKHJlcXVlc3QuaWQsIHJlcXVlc3QucmVxdWVzdFR5cGUsIGRhdGEpOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy9Qcm9jZWR1cmVzL3Byb2NNYXRjaEFsbFJlZ0V4cC50cwpjb25zdCByZXF1ZXN0VHlwZU1hdGNoQWxsUmVnRXhwID0gIk1hdGNoQWxsUmVnRXhwIjsKZnVuY3Rpb24gaXNNYXRjaEFsbFJlZ0V4cFJlcXVlc3QodikgewoJcmV0dXJuIGlzUmVxdWVzdFR5cGUodiwgcmVxdWVzdFR5cGVNYXRjaEFsbFJlZ0V4cCk7Cn0KZnVuY3Rpb24gcHJvY01hdGNoQWxsUmVnRXhwKHIpIHsKCWlmICghaXNNYXRjaEFsbFJlZ0V4cFJlcXVlc3QocikpIHJldHVybiB2b2lkIDA7Cgl0cnkgewoJCWNvbnN0IHJlZ2V4ID0gdG9SZWdFeHAoci5kYXRhLnJlZ2V4cCk7CgkJY29uc3QgcmVnZXhSZXN1bHQgPSBtYXRjaEFsbFJlZ0V4cChyLmRhdGEudGV4dCwgcmVnZXgpOwoJCXJldHVybiBjcmVhdGVSZXNwb25zZU1hdGNoQWxsUmVnRXhwKHIsIHJlZ2V4UmVzdWx0KTsKCX0gY2F0Y2ggKGUpIHsKCQlyZXR1cm4gY3JlYXRlRXJyb3JSZXNwb25zZShyLCBmb3JtYXQoZSkpOwoJfQp9CmZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlTWF0Y2hBbGxSZWdFeHAocmVxdWVzdCwgZGF0YSkgewoJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKHJlcXVlc3QuaWQsIHJlcXVlc3QucmVxdWVzdFR5cGUsIGRhdGEpOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy9Qcm9jZWR1cmVzL3Byb2NNYXRjaEFsbFJlZ0V4cEFycmF5LnRzCmNvbnN0IHJlcXVlc3RUeXBlTWF0Y2hSZWdFeHBBcnJheSA9ICJNYXRjaEFsbFJlZ0V4cEFycmF5IjsKZnVuY3Rpb24gaXNNYXRjaFJlZ0V4cEFycmF5UmVxdWVzdCh2KSB7CglyZXR1cm4gaXNSZXF1ZXN0VHlwZSh2LCByZXF1ZXN0VHlwZU1hdGNoUmVnRXhwQXJyYXkpOwp9CmZ1bmN0aW9uIHByb2NNYXRjaEFsbFJlZ0V4cEFycmF5KHIpIHsKCWlmICghaXNNYXRjaFJlZ0V4cEFycmF5UmVxdWVzdChyKSkgcmV0dXJuIHZvaWQgMDsKCXRyeSB7CgkJY29uc3QgcmVnZXggPSByLmRhdGEucmVnZXhwcy5tYXAoKHIkMSkgPT4gdG9SZWdFeHAociQxKSk7CgkJY29uc3QgcmVnZXhSZXN1bHQgPSBtYXRjaEFsbFJlZ0V4cEFycmF5KHIuZGF0YS50ZXh0LCByZWdleCk7CgkJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlTWF0Y2hSZWdFeHBBcnJheShyLCByZWdleFJlc3VsdCk7Cgl9IGNhdGNoIChlKSB7CgkJcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UociwgZm9ybWF0KGUpKTsKCX0KfQpmdW5jdGlvbiBjcmVhdGVSZXNwb25zZU1hdGNoUmVnRXhwQXJyYXkocmVxdWVzdCwgZGF0YSkgewoJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKHJlcXVlc3QuaWQsIHJlcXVlc3QucmVxdWVzdFR5cGUsIGRhdGEpOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy9Qcm9jZWR1cmVzL3Byb2NNYXRjaEFsbFJlZ0V4cEFzUmFuZ2UudHMKY29uc3QgcmVxdWVzdFR5cGVNYXRjaEFsbFJlZ0V4cEFzUmFuZ2UgPSAiTWF0Y2hBbGxSZWdFeHBBc1JhbmdlIjsKZnVuY3Rpb24gaXNNYXRjaEFsbFJlZ0V4cEFzUmFuZ2VSZXF1ZXN0KHYpIHsKCXJldHVybiBpc1JlcXVlc3RUeXBlKHYsIHJlcXVlc3RUeXBlTWF0Y2hBbGxSZWdFeHBBc1JhbmdlKTsKfQpmdW5jdGlvbiBwcm9jTWF0Y2hBbGxSZWdFeHBBc1JhbmdlKHIpIHsKCWlmICghaXNNYXRjaEFsbFJlZ0V4cEFzUmFuZ2VSZXF1ZXN0KHIpKSByZXR1cm4gdm9pZCAwOwoJdHJ5IHsKCQljb25zdCByZWdleCA9IHRvUmVnRXhwKHIuZGF0YS5yZWdleHApOwoJCWNvbnN0IHJlZ2V4UmVzdWx0ID0gbWF0Y2hBbGxUb1Jhbmdlc1JlZ0V4cChyLmRhdGEudGV4dCwgcmVnZXgpOwoJCXJldHVybiBjcmVhdGVSZXNwb25zZU1hdGNoQWxsUmVnRXhwQXNSYW5nZShyLCByZWdleFJlc3VsdCk7Cgl9IGNhdGNoIChlKSB7CgkJcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UociwgZm9ybWF0KGUpKTsKCX0KfQpmdW5jdGlvbiBjcmVhdGVSZXNwb25zZU1hdGNoQWxsUmVnRXhwQXNSYW5nZShyZXF1ZXN0LCBkYXRhKSB7CglyZXR1cm4gY3JlYXRlUmVzcG9uc2UocmVxdWVzdC5pZCwgcmVxdWVzdC5yZXF1ZXN0VHlwZSwgZGF0YSk7Cn0KCi8vI2VuZHJlZ2lvbgovLyNyZWdpb24gc3JjL1Byb2NlZHVyZXMvcHJvY01hdGNoUmVnRXhwLnRzCmNvbnN0IHJlcXVlc3RUeXBlTWF0Y2hSZWdFeHAgPSAiTWF0Y2hSZWdFeHAiOwpmdW5jdGlvbiBpc01hdGNoUmVnRXhwUmVxdWVzdCh2KSB7CglyZXR1cm4gaXNSZXF1ZXN0VHlwZSh2LCByZXF1ZXN0VHlwZU1hdGNoUmVnRXhwKTsKfQpmdW5jdGlvbiBwcm9jTWF0Y2hSZWdFeHAocikgewoJaWYgKCFpc01hdGNoUmVnRXhwUmVxdWVzdChyKSkgcmV0dXJuIHZvaWQgMDsKCXRyeSB7CgkJY29uc3QgcmVnZXggPSB0b1JlZ0V4cChyLmRhdGEucmVnZXhwKTsKCQljb25zdCByZWdleFJlc3VsdCA9IG1hdGNoUmVnRXhwKHIuZGF0YS50ZXh0LCByZWdleCk7CgkJcmV0dXJuIGNyZWF0ZVJlc3BvbnNlTWF0Y2hSZWdFeHAociwgcmVnZXhSZXN1bHQpOwoJfSBjYXRjaCAoZSkgewoJCXJldHVybiBjcmVhdGVFcnJvclJlc3BvbnNlKHIsIGZvcm1hdChlKSk7Cgl9Cn0KZnVuY3Rpb24gY3JlYXRlUmVzcG9uc2VNYXRjaFJlZ0V4cChyZXF1ZXN0LCBkYXRhKSB7CglyZXR1cm4gY3JlYXRlUmVzcG9uc2UocmVxdWVzdC5pZCwgcmVxdWVzdC5yZXF1ZXN0VHlwZSwgZGF0YSk7Cn0KCi8vI2VuZHJlZ2lvbgovLyNyZWdpb24gc3JjL1Byb2NlZHVyZXMvcHJvY2VkdXJlcy50cwovKioKKiBDb2xsZWN0aW9uIG9mIGFsbCBwcm9jZWR1cmVzIHJlbGF0ZWQgdG8gcmVndWxhciBleHByZXNzaW9ucy4KKiBPcmRlciBpcyBpbXBvcnRhbnQgZm9yIHRoZSB3b3JrZXIsIGFzIGl0IHByb2Nlc3NlcyB0aGVtIHNlcXVlbnRpYWxseS4KKi8KY29uc3QgcHJvY2VkdXJlcyA9IFsKCXByb2NNYXRjaEFsbFJlZ0V4cCwKCXByb2NNYXRjaEFsbFJlZ0V4cEFzUmFuZ2UsCglwcm9jRXhlY1JlZ0V4cCwKCXByb2NNYXRjaEFsbFJlZ0V4cEFycmF5LAoJcHJvY01hdGNoUmVnRXhwCl07CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy93b3JrZXIvTG9nTGV2ZWwudHMKbGV0IExvZ0xldmVsID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKExvZ0xldmVsJDEpIHsKCUxvZ0xldmVsJDFbTG9nTGV2ZWwkMVsiTG9nTGV2ZWxOb25lIl0gPSAwXSA9ICJMb2dMZXZlbE5vbmUiOwoJTG9nTGV2ZWwkMVtMb2dMZXZlbCQxWyJMb2dMZXZlbEVycm9yIl0gPSAxXSA9ICJMb2dMZXZlbEVycm9yIjsKCUxvZ0xldmVsJDFbTG9nTGV2ZWwkMVsiTG9nTGV2ZWxXYXJuIl0gPSAyXSA9ICJMb2dMZXZlbFdhcm4iOwoJTG9nTGV2ZWwkMVtMb2dMZXZlbCQxWyJMb2dMZXZlbEluZm8iXSA9IDNdID0gIkxvZ0xldmVsSW5mbyI7CglMb2dMZXZlbCQxW0xvZ0xldmVsJDFbIkxvZ0xldmVsRGVidWciXSA9IDRdID0gIkxvZ0xldmVsRGVidWciOwoJcmV0dXJuIExvZ0xldmVsJDE7Cn0oe30pOwoKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBzcmMvd29ya2VyL01lc3NhZ2VQb3J0LnRzCmNvbnN0IG51bGxQb3J0ID0gT2JqZWN0LmZyZWV6ZSh7Cglwb3N0TWVzc2FnZSgpIHt9LAoJb24oKSB7CgkJcmV0dXJuIG51bGxQb3J0OwoJfSwKCW9mZigpIHsKCQlyZXR1cm4gbnVsbFBvcnQ7Cgl9LAoJb25jZSgpIHsKCQlyZXR1cm4gbnVsbFBvcnQ7Cgl9Cn0pOwoKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBzcmMvd29ya2VyL1dvcmtlck1lc3NhZ2VIYW5kbGVyLnRzCnZhciBXb3JrZXJNZXNzYWdlSGFuZGxlciA9IGNsYXNzIHsKCWxvZ0xldmVsID0gTG9nTGV2ZWwuTG9nTGV2ZWxFcnJvcjsKCWxpc3RlbmVyOwoJY29uc3RydWN0b3IocG9ydCwgcHJvY2VkdXJlcyQxKSB7CgkJdGhpcy5wb3J0ID0gcG9ydDsKCQl0aGlzLnByb2NlZHVyZXMgPSBwcm9jZWR1cmVzJDE7CgkJdGhpcy5saXN0ZW5lciA9ICh2KSA9PiB0aGlzLmxpc3RlbmVyTWVzc2FnZSh2KTsKCQlwb3J0Lm9uKCJtZXNzYWdlIiwgdGhpcy5saXN0ZW5lcik7Cgl9CglkaXNwb3NlKCkgewoJCXRoaXMucG9ydC5vZmYoIm1lc3NhZ2UiLCB0aGlzLmxpc3RlbmVyKTsKCQl0aGlzLnBvcnQgPSBudWxsUG9ydDsKCX0KCXBvc3QobXNnKSB7CgkJdGhpcy5sb2coTG9nTGV2ZWwuTG9nTGV2ZWxEZWJ1ZywgIlBvc3Q6ICIgKyBKU09OLnN0cmluZ2lmeShtc2cpKTsKCQl0aGlzLnBvcnQucG9zdE1lc3NhZ2UobXNnKTsKCX0KCWxvZyhsZXZlbCwgLi4ucGFyYW1zKSB7CgkJaWYgKGxldmVsID4gdGhpcy5sb2dMZXZlbCkgcmV0dXJuOwoJCXN3aXRjaCAobGV2ZWwpIHsKCQkJY2FzZSBMb2dMZXZlbC5Mb2dMZXZlbEVycm9yOgoJCQkJY29uc29sZS5lcnJvciguLi5wYXJhbXMpOwoJCQkJYnJlYWs7CgkJCWNhc2UgTG9nTGV2ZWwuTG9nTGV2ZWxXYXJuOgoJCQkJY29uc29sZS53YXJuKC4uLnBhcmFtcyk7CgkJCQlicmVhazsKCQkJZGVmYXVsdDogY29uc29sZS5sb2coLi4ucGFyYW1zKTsKCQl9Cgl9CglsaXN0ZW5lck1lc3NhZ2UodmFsdWUpIHsKCQl0aGlzLmxvZyhMb2dMZXZlbC5Mb2dMZXZlbERlYnVnLCBgbWVzc2FnZTogJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YCk7CgkJaWYgKCFpc1JlcXVlc3QodmFsdWUpKSB7CgkJCWNvbnN0IG1zZyA9IGBCYWRseSBmb3JtZWQgUmVxdWVzdDogJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YDsKCQkJdGhpcy5sb2coTG9nTGV2ZWwuTG9nTGV2ZWxFcnJvciwgbXNnKTsKCQkJdGhpcy5wb3N0KGNyZWF0ZUVycm9yUmVzcG9uc2UodmFsdWUsIG1zZykpOwoJCQlyZXR1cm47CgkJfQoJCWNvbnN0IHJlcXVlc3QgPSB2YWx1ZTsKCQlmb3IgKGNvbnN0IHByb2Mgb2YgdGhpcy5wcm9jZWR1cmVzKSB0cnkgewoJCQljb25zdCByZXNwb25zZSA9IHByb2MocmVxdWVzdCk7CgkJCWlmIChyZXNwb25zZSAhPT0gdm9pZCAwKSB7CgkJCQlQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpLmNhdGNoKChyZWFzb24pID0+IGNyZWF0ZUVycm9yUmVzcG9uc2UocmVxdWVzdCwgU3RyaW5nKHJlYXNvbiksIHRvRXJyb3IocmVhc29uKSkpLnRoZW4oKHIpID0+IHRoaXMucG9zdChyKSkuY2F0Y2goKCkgPT4ge30pOwoJCQkJcmV0dXJuOwoJCQl9CgkJfSBjYXRjaCAoZSkgewoJCQljb25zdCBtc2cgPSBpc0Vycm9yTGlrZShlKSA/IGUubWVzc2FnZSA6IGZvcm1hdChlKTsKCQkJdGhpcy5wb3N0KGNyZWF0ZUVycm9yUmVzcG9uc2UocmVxdWVzdCwgbXNnLCBpc0Vycm9yTGlrZShlKSA/IGUgOiB2b2lkIDApKTsKCQkJcmV0dXJuOwoJCX0KCQl0aGlzLmxvZyhMb2dMZXZlbC5Mb2dMZXZlbFdhcm4sIGBVbmhhbmRsZWQgUmVxdWVzdCAiJHt2YWx1ZS5yZXF1ZXN0VHlwZX0iYCk7CgkJdGhpcy5wb3N0KGNyZWF0ZUVycm9yUmVzcG9uc2UocmVxdWVzdCwgIlVuaGFuZGxlZCBSZXF1ZXN0IikpOwoJfQp9OwpmdW5jdGlvbiBjcmVhdGVIYW5kbGVyKHBvcnQsIHByb2NlZHVyZXMkMSkgewoJcmV0dXJuIG5ldyBXb3JrZXJNZXNzYWdlSGFuZGxlcihwb3J0LCBwcm9jZWR1cmVzJDEpOwp9CgovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHNyYy93b3JrZXIvd29ya2VyQ29kZU5vZGUudHMKaWYgKCFpc01haW5UaHJlYWQgJiYgcGFyZW50UG9ydCkgewoJY29uc3QgaGFuZGxlciA9IGNyZWF0ZUhhbmRsZXIocGFyZW50UG9ydCwgcHJvY2VkdXJlcyk7CglwYXJlbnRQb3J0Lm9uY2UoImNsb3NlIiwgKCkgPT4gaGFuZGxlci5kaXNwb3NlKCkpOwp9CgovLyNlbmRyZWdpb24=`);function Jt(e=qt){return new u.Worker(e)}var Yt=class extends Ht{constructor(e,t){super(Jt,e,t)}};const Xt=`gim`;var Zt=class{worker;dispose=()=>this.worker.dispose();constructor(e=2e3){this.worker=new Yt(e)}async matchPatternsInText(e,t,n){let r=cn(e,n),i=_n(r);b(`Matching patterns in text. Patterns: ${e.length}, Unique RegExps: ${i.length}`);let a=await $t(this.worker,t,i);return b(`Matched patterns %i`,a.length),Qt(a,r)}};function Qt(e,t){let n=new Map(e.map(e=>[e.regexp.toString(),e]));function r(e){return n.get(e.toString())||{regexp:e,message:`not found`,elapsedTimeMs:0}}let i=t.map(e=>({name:e.name,matches:e.regexp.map(r)}));return i}function $t(e,t,n){return en(e,t,n).catch(r=>sn(r)?tn(e,t,n):Promise.reject(r))}function en(e,t,n){return e.matchAllArrayIndices(t,n).then(e=>e.results.map((e,t)=>nn(e,n[t])))}function tn(e,t,n){let r=n.map(n=>an(e,t,n));return Promise.all(r)}function nn(e,t){let{elapsedTimeMs:n,matches:r}=e,i=r.map(vn);return rn({elapsedTimeMs:n,ranges:i},t)}function rn(e,t){let{elapsedTimeMs:n,ranges:r}=e;return{regexp:t,ranges:r,elapsedTimeMs:n}}function an(e,t,n){return e.matchAllAsRangePairs(t,n).then(e=>rn(e,n)).catch(e=>on(n,e))}function on(e,t){return sn(t)?{...t,regexp:e}:Promise.reject(t)}function sn(e){return!!e&&typeof e==`object`&&`message`in e&&typeof e.message==`string`&&`elapsedTimeMs`in e&&typeof e.elapsedTimeMs==`number`}function cn(e,t){let n=fn(t),r=e.map(e=>ln(e,n));return r}function ln(e,t){if(un(e))return dn(e);let n=typeof e==`string`?mn(e,`gim`)?.toString():void 0;return t.get(e)||t.get(e.toLowerCase())||n&&t.get(n)||{name:e,altPatternNames:[],regexp:[mn(e,`gim`)].filter(Ze)}}function un(e){return typeof e!=`string`}function dn(e){return pn(e)}function fn(e){let t=e.patterns?.map(pn)||[],n=t.map(e=>[e.name.toLowerCase(),e]),r=t.flatMap(e=>e.altPatternNames.map(t=>[t,e])),i=t.map(e=>[e.regexp.map(e=>e.toString()).join(`,`),e]);return new Map([...n,...r,...i])}function pn(e){let{name:t,pattern:n}=e,r=Array.isArray(n)?n:[n],i=new Set([...r.map(e=>mn(e)?.toString()).filter(Ze),...r.map(e=>e.toString())]),a=r.map(e=>mn(e,`gim`)).filter(Ze);return{name:t,altPatternNames:[...i],regexp:a}}function mn(e,t){try{if(hn(e))return e;let n=e.match(/^\/(.*)\/([gimsuy]*)$/);return n?new RegExp(n[1],n[2]||void 0):new RegExp(e,t)}catch(e){x(e)}}function hn(e){return e instanceof RegExp}function*gn(e){for(let t of e)yield*t}function _n(e){let t=e.map(e=>e.regexp.map(e=>[e.toString(),e])),n=new Map(gn(t));return[...n.values()]}function vn(e){return e[0]}const yn=b;yn(`Starting Pattern Matcher Server`);function bn(){let e=[],t={matchPatternsInDocument:a};yn(`Create Connection`);let n=(0,Ue.createConnection)(Ue.ProposedFeatures.all);v.setConnection(n);let r=new Ue.TextDocuments(Ge),i=new Zt;n.onInitialize(e=>{yn(`onInitialize`),S(e.workspaceFolders?.[0].uri??``);let t={textDocumentSync:{openClose:!0,change:Ue.TextDocumentSyncKind.Incremental}};return{capabilities:t}});async function a(e){try{return e.uri.startsWith(`output:`)?{uri:e.uri,version:-1,patternMatches:[]}:await o(e)}catch(t){let n=(0,l.format)(`Error handling matchPatternsInDocument: %s`,t);return yn(n),{uri:e.uri,version:-1,patternMatches:[],message:n}}}async function o(e){let{uri:t,patterns:n,settings:a}=e,o=t&&r.get(t);if(!o)return{uri:t,version:-1,patternMatches:[],message:`Document not found.`};let s=o.getText(),c=o.version;if(s.length>1e6){let e=`Document is too large to process. Length: ${s.length}.`;return yn(e,t),{uri:t,version:-1,patternMatches:[],message:e}}let l=await i.matchPatternsInText(n,s,a),u={ranges:[],message:void 0};function d(e){let{elapsedTimeMs:t,message:n,regexp:r,ranges:i}={...u,...e};return{regexp:r.toString(),elapsedTime:t,matches:i,errorMessage:n}}function f(e){return{name:e.name,defs:e.matches.map(d)}}let p=l.map(f);return{uri:t,version:c,patternMatches:p}}Object.entries(t).forEach(([e,t])=>{n.onRequest(e,t)}),r.listen(n),e.push(i),n.onShutdown(()=>{e.forEach(e=>e.dispose()),e.length=0}),n.listen()}process.on(`unhandledRejection`,e=>{console.log(`unhandledRejection`,e)}),process.on(`uncaughtException`,e=>{console.log(`uncaughtException`,e)}),bn();
//# sourceMappingURL=main.cjs.map